import{s as Te,f as m,g as _,h as L,d,j as h,i as V,S as He,o as Ie,e as he,M as Ve,r as J,y as U,l as F,m as x,w as f,n as X,a as N,c as R,C as Ce,G as Ae}from"../chunks/scheduler.6e697b3e.js";import{S as Le,i as ze,g as te,t as j,c as re,a as P,b as oe,d as se,m as le,e as ie,f as pe}from"../chunks/index.4c318b21.js";import{m as Pe}from"../chunks/metadataStore.a46319de.js";import{e as me}from"../chunks/each.904065af.js";import{f as _e}from"../chunks/index.cc33f051.js";import{s as qe}from"../chunks/supabase.8f09c013.js";import{I as ve}from"../chunks/InteractionButton.7313e59b.js";import{i as We,s as Ne,C as Re,t as je,r as Fe}from"../chunks/essayInteractionService.859a6e22.js";function ge(o,e,t){const r=o.slice();return r[16]=e[t],r}function xe(o){let e,t,r=me(o[0]),n=[];for(let s=0;s<r.length;s+=1)n[s]=be(ge(o,r,s));const i=s=>j(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=he()},l(s){for(let c=0;c<n.length;c+=1)n[c].l(s);e=he()},m(s,c){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(s,c);V(s,e,c),t=!0},p(s,c){if(c&249){r=me(s[0]);let a;for(a=0;a<r.length;a+=1){const u=ge(s,r,a);n[a]?(n[a].p(u,c),P(n[a],1)):(n[a]=be(u),n[a].c(),P(n[a],1),n[a].m(e.parentNode,e))}for(te(),a=r.length;a<n.length;a+=1)i(a);re()}},i(s){if(!t){for(let c=0;c<r.length;c+=1)P(n[c]);t=!0}},o(s){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)j(n[c]);t=!1},d(s){s&&d(e),Ve(n,s)}}}function Be(o){let e,t="<p>No essays found. Check back soon!</p>";return{c(){e=m("div"),e.innerHTML=t,this.h()},l(r){e=_(r,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-9tlz20"&&(e.innerHTML=t),this.h()},h(){h(e,"class","no-essays svelte-zx7vvp")},m(r,n){V(r,e,n)},p:U,i:U,o:U,d(r){r&&d(e)}}}function Ue(o){let e,t,r,n;return{c(){e=m("div"),t=m("p"),r=F("Error: "),n=F(o[2]),this.h()},l(i){e=_(i,"DIV",{class:!0});var s=L(e);t=_(s,"P",{});var c=L(t);r=x(c,"Error: "),n=x(c,o[2]),c.forEach(d),s.forEach(d),this.h()},h(){h(e,"class","error-state svelte-zx7vvp")},m(i,s){V(i,e,s),f(e,t),f(t,r),f(t,n)},p(i,s){s&4&&X(n,i[2])},i:U,o:U,d(i){i&&d(e)}}}function Ke(o){let e,t="<p>Loading essays...</p>";return{c(){e=m("div"),e.innerHTML=t,this.h()},l(r){e=_(r,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-4id6j2"&&(e.innerHTML=t),this.h()},h(){h(e,"class","loading-state svelte-zx7vvp")},m(r,n){V(r,e,n)},p:U,i:U,o:U,d(r){r&&d(e)}}}function $e(o){let e=o[16].description+"",t;return{c(){t=F(e)},l(r){t=x(r,e)},m(r,n){V(r,t,n)},p(r,n){n&1&&e!==(e=r[16].description+"")&&X(t,e)},d(r){r&&d(t)}}}function Ge(o){let e=o[16].excerpt+"",t;return{c(){t=F(e)},l(r){t=x(r,e)},m(r,n){V(r,t,n)},p(r,n){n&1&&e!==(e=r[16].excerpt+"")&&X(t,e)},d(r){r&&d(t)}}}function ye(o){let e,t,r,n;return{c(){e=m("div"),t=F(o[3]),this.h()},l(i){e=_(i,"DIV",{class:!0});var s=L(e);t=x(s,o[3]),s.forEach(d),this.h()},h(){h(e,"class","copy-feedback svelte-zx7vvp")},m(i,s){V(i,e,s),f(e,t),n=!0},p(i,s){(!n||s&8)&&X(t,i[3])},i(i){n||(i&&Ce(()=>{n&&(r||(r=pe(e,_e,{duration:150},!0)),r.run(1))}),n=!0)},o(i){i&&(r||(r=pe(e,_e,{duration:150},!1)),r.run(0)),n=!1},d(i){i&&d(e),i&&r&&r.end()}}}function ke(o){let e=we(o[16])+"",t;return{c(){t=F(e)},l(r){t=x(r,e)},m(r,n){V(r,t,n)},p(r,n){n&1&&e!==(e=we(r[16])+"")&&X(t,e)},d(r){r&&d(t)}}}function be(o){let e,t,r,n,i=Ee(o[16].date)+"",s,c,a,u=o[16].title+"",g,S,z,C,q,K='<span class="read-more-text svelte-zx7vvp">Read more</span> &gt;',H,I,y,l,p,k,b,v,w,A,B,ne,G;function ae(T,M){return T[16].excerpt?Ge:$e}let O=ae(o),W=O(o);function De(...T){return o[11](o[16],...T)}p=new ve({props:{type:"like",active:o[5][o[16].id]||!1,count:void 0}}),p.$on("click",De);function Se(...T){return o[12](o[16],...T)}v=new ve({props:{type:"share",active:!1,count:void 0}}),v.$on("click",Se);let E=o[3]&&o[4]===o[16].id&&ye(o),D=o[16].id&&ke(o);return{c(){e=m("div"),t=m("a"),r=m("div"),n=m("p"),s=F(i),c=N(),a=m("h3"),g=F(u),S=N(),z=m("p"),W.c(),C=N(),q=m("span"),q.innerHTML=K,I=N(),y=m("div"),l=m("div"),oe(p.$$.fragment),k=N(),b=m("div"),oe(v.$$.fragment),w=N(),E&&E.c(),A=N(),B=m("div"),D&&D.c(),ne=N(),this.h()},l(T){e=_(T,"DIV",{class:!0});var M=L(e);t=_(M,"A",{href:!0,class:!0,"data-sveltekit-preload-data":!0});var Y=L(t);r=_(Y,"DIV",{class:!0});var $=L(r);n=_($,"P",{class:!0});var ce=L(n);s=x(ce,i),ce.forEach(d),c=R($),a=_($,"H3",{class:!0});var ue=L(a);g=x(ue,u),ue.forEach(d),S=R($),z=_($,"P",{class:!0});var de=L(z);W.l(de),de.forEach(d),C=R($),q=_($,"SPAN",{class:!0,"data-svelte-h":!0}),J(q)!=="svelte-wq4u18"&&(q.innerHTML=K),$.forEach(d),Y.forEach(d),I=R(M),y=_(M,"DIV",{class:!0});var Q=L(y);l=_(Q,"DIV",{class:!0});var Z=L(l);se(p.$$.fragment,Z),k=R(Z),b=_(Z,"DIV",{class:!0});var ee=L(b);se(v.$$.fragment,ee),w=R(ee),E&&E.l(ee),ee.forEach(d),Z.forEach(d),A=R(Q),B=_(Q,"DIV",{class:!0});var fe=L(B);D&&D.l(fe),fe.forEach(d),Q.forEach(d),ne=R(M),M.forEach(d),this.h()},h(){h(n,"class","essay-date svelte-zx7vvp"),h(a,"class","essay-title svelte-zx7vvp"),h(z,"class","essay-description"),h(q,"class","read-more svelte-zx7vvp"),h(r,"class","essay-content svelte-zx7vvp"),h(t,"href",H="/writing/"+o[16].slug),h(t,"class","essay-card-link svelte-zx7vvp"),h(t,"data-sveltekit-preload-data","off"),h(b,"class","share-button-container svelte-zx7vvp"),h(l,"class","essay-buttons svelte-zx7vvp"),h(B,"class","essay-counters svelte-zx7vvp"),h(y,"class","essay-interaction-container svelte-zx7vvp"),h(e,"class","essay-card svelte-zx7vvp")},m(T,M){V(T,e,M),f(e,t),f(t,r),f(r,n),f(n,s),f(r,c),f(r,a),f(a,g),f(r,S),f(r,z),W.m(z,null),f(r,C),f(r,q),f(e,I),f(e,y),f(y,l),le(p,l,null),f(l,k),f(l,b),le(v,b,null),f(b,w),E&&E.m(b,null),f(y,A),f(y,B),D&&D.m(B,null),f(e,ne),G=!0},p(T,M){o=T,(!G||M&1)&&i!==(i=Ee(o[16].date)+"")&&X(s,i),(!G||M&1)&&u!==(u=o[16].title+"")&&X(g,u),O===(O=ae(o))&&W?W.p(o,M):(W.d(1),W=O(o),W&&(W.c(),W.m(z,null))),(!G||M&1&&H!==(H="/writing/"+o[16].slug))&&h(t,"href",H);const Y={};M&33&&(Y.active=o[5][o[16].id]||!1),p.$set(Y),o[3]&&o[4]===o[16].id?E?(E.p(o,M),M&25&&P(E,1)):(E=ye(o),E.c(),P(E,1),E.m(b,null)):E&&(te(),j(E,1,1,()=>{E=null}),re()),o[16].id?D?D.p(o,M):(D=ke(o),D.c(),D.m(B,null)):D&&(D.d(1),D=null)},i(T){G||(P(p.$$.fragment,T),P(v.$$.fragment,T),P(E),G=!0)},o(T){j(p.$$.fragment,T),j(v.$$.fragment,T),j(E),G=!1},d(T){T&&d(e),W.d(),ie(p),ie(v),E&&E.d(),D&&D.d()}}}function Xe(o){let e,t,r,n;const i=[Ke,Ue,Be,xe],s=[];function c(a,u){return a[1]?0:a[2]?1:a[0].length===0?2:3}return t=c(o),r=s[t]=i[t](o),{c(){e=m("div"),r.c(),this.h()},l(a){e=_(a,"DIV",{class:!0});var u=L(e);r.l(u),u.forEach(d),this.h()},h(){h(e,"class","essays svelte-zx7vvp")},m(a,u){V(a,e,u),s[t].m(e,null),n=!0},p(a,[u]){let g=t;t=c(a),t===g?s[t].p(a,u):(te(),j(s[g],1,1,()=>{s[g]=null}),re(),r=s[t],r?r.p(a,u):(r=s[t]=i[t](a),r.c()),P(r,1),r.m(e,null))},i(a){n||(P(r),n=!0)},o(a){j(r),n=!1},d(a){a&&d(e),s[t].d()}}}function Ee(o){if(!o)return"";try{return new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(e){return console.error("Error formatting date:",e),o}}function we(o){const e=o.like_count||0,t=o.share_count||0,r=o.view_count||0;let n="";return e>0&&(n+=`${e} ${e===1?"like":"likes"}`),t>0&&(n&&(n+=" · "),n+=`${t} ${t===1?"share":"shares"}`),r>0&&(n&&(n+=" · "),n+=`${r} ${r===1?"view":"views"}`),n||"No interactions yet"}function Ye(o,e,t){let{preloadedEssays:r=[]}=e,{serverError:n=null}=e;const i=He();let s=r||[],c=!r.length,a=n,u="",g="",S=null,z={likes:{},shares:{},views:{}},C={};async function q(){if(r.length>0){console.log("Using preloaded essays, skipping client-side fetch");return}try{console.log("Loading essays from Supabase...");const{data:l,error:p}=await qe.from("essays").select(`
          id, title, description, date, published, excerpt, slug,
          like_count, share_count, view_count
        `).eq("published",!0).order("date",{ascending:!1});if(p)throw p;console.log(`Successfully loaded ${(l==null?void 0:l.length)||0} essays from Supabase`),t(0,s=l||[]),t(1,c=!1)}catch(l){console.error("Error loading essays:",l),t(2,a=l instanceof Error?l.message:"Failed to load essays"),t(1,c=!1),i("error",l)}}async function K(l){if(l){console.log(`Like button clicked for essay: ${l}`);try{const p=await je(l);console.log(`New like status for essay ${l}:`,p)}catch(p){console.error(`Error toggling like for essay ${l}:`,p),i("error",p)}}}async function H(l){if(!(l!=null&&l.id)||!(l!=null&&l.slug))return;console.log(`Share button clicked for essay: ${l.id}`);const p=`https://xnham.com/writing/${l.slug}`;try{navigator.share?(await navigator.share({title:l.title,text:l.description||l.excerpt||"Check out this essay",url:p}),console.log("Successfully shared via Web Share API"),t(3,u="Shared!")):(await navigator.clipboard.writeText(p),console.log("URL copied to clipboard"),t(3,u="Link copied!")),t(4,g=l.id),await Fe(l.id),S&&clearTimeout(S),S=setTimeout(()=>{t(3,u=""),t(4,g="")},2e3)}catch(k){console.error("Error sharing essay:",k),t(3,u="Error sharing"),t(4,g=l.id),S&&clearTimeout(S),S=setTimeout(()=>{t(3,u=""),t(4,g="")},2e3),i("error",k)}}Ie(()=>{console.log("Initializing interactions on Essays component");let l=()=>{},p=null;try{p=setTimeout(async()=>{try{const b=await We();if(console.log("Interactions initialized with device ID:",b),!b){console.error("Failed to initialize interactions - no device ID returned"),i("error",new Error("Failed to initialize interactions"));return}await q(),l=Ne(v=>{console.log("Interaction state updated",v),t(10,z=v)})}catch(b){console.error("Error during delayed interaction initialization:",b),i("error",b)}},300);const k=b=>{b.key==="Escape"&&(t(3,u=""),t(4,g=""))};return window.addEventListener("keydown",k),()=>{l&&l(),p&&clearTimeout(p),S&&clearTimeout(S),window.removeEventListener("keydown",k)}}catch(k){console.error("Error in Essays component onMount:",k),i("error",k)}});const I=(l,p)=>{console.log("Like button clicked in list view for:",l.id),K(l.id)},y=(l,p)=>{console.log("Share button clicked in list view for:",l.id),H(l)};return o.$$set=l=>{"preloadedEssays"in l&&t(8,r=l.preloadedEssays),"serverError"in l&&t(9,n=l.serverError)},o.$$.update=()=>{o.$$.dirty&1025&&t(5,C=(s==null?void 0:s.reduce((l,p)=>{if(p.id){const k=`${Re.ESSAY}:${p.id}`;l[p.id]=(z==null?void 0:z.likes[k])||!1}return l},{}))||{})},[s,c,a,u,g,C,K,H,r,n,z,I,y]}class Je extends Le{constructor(e){super(),ze(this,e,Ye,Xe,Te,{preloadedEssays:8,serverError:9})}}function Oe(o){let e,t;return e=new Je({props:{preloadedEssays:o[0].essays||[]}}),e.$on("error",o[3]),{c(){oe(e.$$.fragment)},l(r){se(e.$$.fragment,r)},m(r,n){le(e,r,n),t=!0},p(r,n){const i={};n&1&&(i.preloadedEssays=r[0].essays||[]),e.$set(i)},i(r){t||(P(e.$$.fragment,r),t=!0)},o(r){j(e.$$.fragment,r),t=!1},d(r){ie(e,r)}}}function Qe(o){let e,t,r;function n(c,a){return c[2]>=Me?et:Ze}let i=n(o),s=i(o);return{c(){e=m("div"),t=m("p"),r=F(`There was an error loading the essays. 
          `),s.c(),this.h()},l(c){e=_(c,"DIV",{class:!0});var a=L(e);t=_(a,"P",{});var u=L(t);r=x(u,`There was an error loading the essays. 
          `),s.l(u),u.forEach(d),a.forEach(d),this.h()},h(){h(e,"class","error-message svelte-c611qv")},m(c,a){V(c,e,a),f(e,t),f(t,r),s.m(t,null)},p(c,a){i!==(i=n(c))&&(s.d(1),s=i(c),s&&(s.c(),s.m(t,null)))},i:U,o:U,d(c){c&&d(e),s.d()}}}function Ze(o){let e;return{c(){e=F("Retrying...")},l(t){e=x(t,"Retrying...")},m(t,r){V(t,e,r)},d(t){t&&d(e)}}}function et(o){let e;return{c(){e=F("Please try refreshing the page.")},l(t){e=x(t,"Please try refreshing the page.")},m(t,r){V(t,e,r)},d(t){t&&d(e)}}}function tt(o){let e,t,r,n,i,s,c,a,u,g,S='Thoughts about <span class="purple">Software.</span>',z,C,q=`<p>How do our natural behaviors and cognitive patterns uncover opportunities
      to rethink software design and create tools that <span class="small-font svelte-c611qv">quietly</span> complement our lives?</p>`,K,H,I,y,l;const p=[Qe,Oe],k=[];function b(v,w){return v[1]?0:1}return I=b(o),y=k[I]=p[I](o),{c(){e=m("meta"),t=m("link"),r=m("meta"),n=m("meta"),i=m("meta"),s=m("meta"),c=m("meta"),a=N(),u=m("main"),g=m("h2"),g.innerHTML=S,z=N(),C=m("div"),C.innerHTML=q,K=N(),H=m("div"),y.c(),this.h()},l(v){const w=Ae("svelte-23ab49",document.head);e=_(w,"META",{name:!0,content:!0}),t=_(w,"LINK",{rel:!0,href:!0}),r=_(w,"META",{property:!0,content:!0}),n=_(w,"META",{property:!0,content:!0}),i=_(w,"META",{property:!0,content:!0}),s=_(w,"META",{property:!0,content:!0}),c=_(w,"META",{property:!0,content:!0}),w.forEach(d),a=R(v),u=_(v,"MAIN",{class:!0});var A=L(u);g=_(A,"H2",{class:!0,"data-svelte-h":!0}),J(g)!=="svelte-1l1gur7"&&(g.innerHTML=S),z=R(A),C=_(A,"DIV",{class:!0,"data-svelte-h":!0}),J(C)!=="svelte-1dyp2ll"&&(C.innerHTML=q),K=R(A),H=_(A,"DIV",{class:!0});var B=L(H);y.l(B),B.forEach(d),A.forEach(d),this.h()},h(){document.title="Writing | Wendy Ham's Weekend Projects",h(e,"name","description"),h(e,"content","Thoughts about creating software that quietly complements our lives."),h(t,"rel","canonical"),h(t,"href","https://xnham.com/writing"),h(r,"property","og:type"),h(r,"content","website"),h(n,"property","og:url"),h(n,"content","https://xnham.com/writing"),h(i,"property","og:title"),h(i,"content","Writing | Wendy Ham's Weekend Projects"),h(s,"property","og:description"),h(s,"content","Thoughts about creating software that quietly complements our lives."),h(c,"property","og:image"),h(c,"content","https://xnham.com/images/og-image.png"),h(g,"class","small-bottom-margin"),h(C,"class","writing-intro svelte-c611qv"),h(H,"class","essays-container svelte-c611qv"),h(u,"class","container")},m(v,w){f(document.head,e),f(document.head,t),f(document.head,r),f(document.head,n),f(document.head,i),f(document.head,s),f(document.head,c),V(v,a,w),V(v,u,w),f(u,g),f(u,z),f(u,C),f(u,K),f(u,H),k[I].m(H,null),l=!0},p(v,[w]){let A=I;I=b(v),I===A?k[I].p(v,w):(te(),j(k[A],1,1,()=>{k[A]=null}),re(),y=k[I],y?y.p(v,w):(y=k[I]=p[I](v),y.c()),P(y,1),y.m(H,null))},i(v){l||(P(y),l=!0)},o(v){j(y),l=!1},d(v){v&&(d(a),d(u)),d(e),d(t),d(r),d(n),d(i),d(s),d(c),k[I].d()}}}const Me=2;function rt(o,e,t){let{data:r}=e,n=!1,i=0;function s(c){console.error("Error in Essays component:",c.detail),t(1,n=!0),i<Me&&(t(2,i++,i),setTimeout(()=>{console.log(`Retry attempt ${i} for Essays component`),t(1,n=!1)},1e3))}return Ie(()=>{Pe.set({title:"Writing | Wendy Ham's Weekend Projects",description:"Thoughts about creating software that quietly complements our lives.",canonicalUrl:"https://xnham.com/writing",type:"website",url:typeof window<"u"?window.location.href:"https://xnham.com/writing"})}),o.$$set=c=>{"data"in c&&t(0,r=c.data)},[r,n,i,s]}class dt extends Le{constructor(e){super(),ze(this,e,rt,tt,Te,{data:0})}}export{dt as component};
