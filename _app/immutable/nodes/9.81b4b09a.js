import{_ as qe}from"../chunks/preload-helper.a4192956.js";import{s as Ue,f as b,l as J,a as L,g,h as M,m as O,d as u,c as D,j as d,i as E,w as h,n as q,W as Ye,o as je,C as Ge,r as G,y as z,H as Ke,I as Xe,F as Qe,J as Ze,K as $e,L as xe,e as De,G as et,A as tt,x as Je}from"../chunks/scheduler.90cbc393.js";import{S as Oe,i as ze,b as be,d as ge,m as ke,a as Y,g as we,t as K,c as Ee,e as Ce,f as Ae}from"../chunks/index.f2611f2d.js";import{p as st}from"../chunks/stores.22ce58f4.js";import{m as nt}from"../chunks/metadataStore.410d5ae1.js";import{f as Ve}from"../chunks/index.f9edecbc.js";import{I as Me}from"../chunks/InteractionButton.c0953185.js";import{s as rt,C as lt,i as ot,a as it,b as at,t as ct,r as ut}from"../chunks/essayInteractionService.09dd6a5d.js";const ft=o=>({}),Ne=o=>({});function We(o){let e,t,s,i;return{c(){e=b("div"),t=J(o[3]),this.h()},l(l){e=g(l,"DIV",{class:!0});var r=M(e);t=O(r,o[3]),r.forEach(u),this.h()},h(){d(e,"class","copy-feedback svelte-1b7b8w9")},m(l,r){E(l,e,r),h(e,t),i=!0},p(l,r){(!i||r&8)&&q(t,l[3])},i(l){i||(l&&Ge(()=>{i&&(s||(s=Ae(e,Ve,{duration:150},!0)),s.run(1))}),i=!0)},o(l){l&&(s||(s=Ae(e,Ve,{duration:150},!1)),s.run(0)),i=!1},d(l){l&&u(e),l&&s&&s.end()}}}function dt(o){let e,t="Essay content could not be loaded. Please try again later.",s,i,l,r="View details",n,a,f=JSON.stringify(o[0],null,2)+"",y;return{c(){e=b("p"),e.textContent=t,s=L(),i=b("details"),l=b("summary"),l.textContent=r,n=L(),a=b("pre"),y=J(f),this.h()},l(p){e=g(p,"P",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-gh3r6s"&&(e.textContent=t),s=D(p),i=g(p,"DETAILS",{});var I=M(i);l=g(I,"SUMMARY",{"data-svelte-h":!0}),G(l)!=="svelte-1l5nnlp"&&(l.textContent=r),n=D(I),a=g(I,"PRE",{});var P=M(a);y=O(P,f),P.forEach(u),I.forEach(u),this.h()},h(){d(e,"class","loading error svelte-1b7b8w9")},m(p,I){E(p,e,I),E(p,s,I),E(p,i,I),h(i,l),h(i,n),h(i,a),h(a,y)},p(p,I){I&1&&f!==(f=JSON.stringify(p[0],null,2)+"")&&q(y,f)},i:z,o:z,d(p){p&&(u(e),u(s),u(i))}}}function mt(o){let e,t;return{c(){e=b("div"),t=new Ke(!1),this.h()},l(s){e=g(s,"DIV",{class:!0});var i=M(e);t=Xe(i,!1),i.forEach(u),this.h()},h(){t.a=null,d(e,"class","essay-content svelte-1b7b8w9")},m(s,i){E(s,e,i),t.m(o[1],e)},p(s,i){i&2&&t.p(s[1])},i:z,o:z,d(s){s&&u(e)}}}function _t(o){let e,t,s="Content not available.",i,l;const r=o[11]["content-actions"],n=Qe(r,o,o[10],Ne);return{c(){e=b("div"),t=b("p"),t.textContent=s,i=L(),n&&n.c(),this.h()},l(a){e=g(a,"DIV",{class:!0});var f=M(e);t=g(f,"P",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-rwj97i"&&(t.textContent=s),i=D(f),n&&n.l(f),f.forEach(u),this.h()},h(){d(t,"class","loading svelte-1b7b8w9"),d(e,"class","loading-container svelte-1b7b8w9")},m(a,f){E(a,e,f),h(e,t),h(e,i),n&&n.m(e,null),l=!0},p(a,f){n&&n.p&&(!l||f&1024)&&Ze(n,r,a,a[10],l?xe(r,a[10],f,ft):$e(a[10]),Ne)},i(a){l||(Y(n,a),l=!0)},o(a){K(n,a),l=!1},d(a){a&&u(e),n&&n.d(a)}}}function ht(o){let e,t,s,i=He(o[0].date)+"",l,r,n,a,f,y,p,I,P,N,H=o[0].title+"",S,V,m,v=o[0].description+"",c,w,F,U,W,k,_,T,j,X,Q=o[4]===1?"like":"likes",le,he,Z,oe,pe,ne=o[5]===1?"share":"shares",ie,ye,$,ae,ve,re=o[6]===1?"view":"views",ce,B;a=new Me({props:{type:"like",active:o[2],count:void 0}}),a.$on("click",o[12]),p=new Me({props:{type:"share",active:!1,count:void 0}}),p.$on("click",o[13]);let R=o[3]&&We(o);const Ie=[_t,mt,dt],x=[];function Te(C,A){return C[1]===null?0:C[1]?1:2}return U=Te(o),W=x[U]=Ie[U](o),{c(){e=b("div"),t=b("div"),s=b("p"),l=J(i),r=L(),n=b("div"),be(a.$$.fragment),f=L(),y=b("div"),be(p.$$.fragment),I=L(),R&&R.c(),P=L(),N=b("h2"),S=J(H),V=L(),m=b("p"),c=J(v),w=L(),F=b("div"),W.c(),k=L(),_=b("div"),T=b("span"),j=J(o[4]),X=L(),le=J(Q),he=L(),Z=b("span"),oe=J(o[5]),pe=L(),ie=J(ne),ye=L(),$=b("span"),ae=J(o[6]),ve=L(),ce=J(re),this.h()},l(C){e=g(C,"DIV",{class:!0});var A=M(e);t=g(A,"DIV",{class:!0});var ee=M(t);s=g(ee,"P",{class:!0});var te=M(s);l=O(te,i),te.forEach(u),r=D(ee),n=g(ee,"DIV",{class:!0});var ue=M(n);ge(a.$$.fragment,ue),f=D(ue),y=g(ue,"DIV",{class:!0});var fe=M(y);ge(p.$$.fragment,fe),I=D(fe),R&&R.l(fe),fe.forEach(u),ue.forEach(u),ee.forEach(u),P=D(A),N=g(A,"H2",{class:!0});var Pe=M(N);S=O(Pe,H),Pe.forEach(u),V=D(A),m=g(A,"P",{class:!0});var Se=M(m);c=O(Se,v),Se.forEach(u),w=D(A),F=g(A,"DIV",{class:!0});var Le=M(F);W.l(Le),Le.forEach(u),A.forEach(u),k=D(C),_=g(C,"DIV",{class:!0});var se=M(_);T=g(se,"SPAN",{class:!0});var de=M(T);j=O(de,o[4]),X=D(de),le=O(de,Q),de.forEach(u),he=D(se),Z=g(se,"SPAN",{class:!0});var me=M(Z);oe=O(me,o[5]),pe=D(me),ie=O(me,ne),me.forEach(u),ye=D(se),$=g(se,"SPAN",{class:!0});var _e=M($);ae=O(_e,o[6]),ve=D(_e),ce=O(_e,re),_e.forEach(u),se.forEach(u),this.h()},h(){d(s,"class","essay-date svelte-1b7b8w9"),d(y,"class","share-button-container svelte-1b7b8w9"),d(n,"class","essay-buttons svelte-1b7b8w9"),d(t,"class","essay-header-row svelte-1b7b8w9"),d(N,"class","essay-title svelte-1b7b8w9"),d(m,"class","essay-description svelte-1b7b8w9"),d(F,"class","content svelte-1b7b8w9"),d(e,"class","essay-container svelte-1b7b8w9"),d(T,"class","essay-stat"),d(Z,"class","essay-stat"),d($,"class","essay-stat"),d(_,"class","essay-stats svelte-1b7b8w9")},m(C,A){E(C,e,A),h(e,t),h(t,s),h(s,l),h(t,r),h(t,n),ke(a,n,null),h(n,f),h(n,y),ke(p,y,null),h(y,I),R&&R.m(y,null),h(e,P),h(e,N),h(N,S),h(e,V),h(e,m),h(m,c),h(e,w),h(e,F),x[U].m(F,null),E(C,k,A),E(C,_,A),h(_,T),h(T,j),h(T,X),h(T,le),h(_,he),h(_,Z),h(Z,oe),h(Z,pe),h(Z,ie),h(_,ye),h(_,$),h($,ae),h($,ve),h($,ce),B=!0},p(C,[A]){(!B||A&1)&&i!==(i=He(C[0].date)+"")&&q(l,i);const ee={};A&4&&(ee.active=C[2]),a.$set(ee),C[3]?R?(R.p(C,A),A&8&&Y(R,1)):(R=We(C),R.c(),Y(R,1),R.m(y,null)):R&&(we(),K(R,1,1,()=>{R=null}),Ee()),(!B||A&1)&&H!==(H=C[0].title+"")&&q(S,H),(!B||A&1)&&v!==(v=C[0].description+"")&&q(c,v);let te=U;U=Te(C),U===te?x[U].p(C,A):(we(),K(x[te],1,1,()=>{x[te]=null}),Ee(),W=x[U],W?W.p(C,A):(W=x[U]=Ie[U](C),W.c()),Y(W,1),W.m(F,null)),(!B||A&16)&&q(j,C[4]),(!B||A&16)&&Q!==(Q=C[4]===1?"like":"likes")&&q(le,Q),(!B||A&32)&&q(oe,C[5]),(!B||A&32)&&ne!==(ne=C[5]===1?"share":"shares")&&q(ie,ne),(!B||A&64)&&q(ae,C[6]),(!B||A&64)&&re!==(re=C[6]===1?"view":"views")&&q(ce,re)},i(C){B||(Y(a.$$.fragment,C),Y(p.$$.fragment,C),Y(R),Y(W),B=!0)},o(C){K(a.$$.fragment,C),K(p.$$.fragment,C),K(R),K(W),B=!1},d(C){C&&(u(e),u(k),u(_)),Ce(a),Ce(p),R&&R.d(),x[U].d()}}}function He(o){const[e,t,s]=o.split("-"),i=["January","February","March","April","May","June","July","August","September","October","November","December"],l=parseInt(t,10)-1,r=i[l],n=s.startsWith("0")?s.substring(1):s;return`${r} ${n}, ${e}`}function pt(o,e,t){let{$$slots:s={},$$scope:i}=e;const l=Ye();let{essay:r}=e,{content:n}=e,a={likes:{},shares:{},views:{}},f=!1,y="",p=null,I=0,P=0,N=0,H=!1,S=!1,V=null,m=!1;async function v(){try{console.log("Initializing interactions on Essay component");const k=await ot();if(console.log("Interactions initialized on Essay with device ID:",k),!k){console.error("Failed to initialize interactions on Essay - no device ID returned"),l("error",new Error("Failed to initialize interactions"));return}if(r&&r.id){const _=it(r.id);console.log(`Essay ${r.id} already liked:`,_),t(2,f=_);try{await at(r.id),console.log(`View recorded for essay ${r.id}`)}catch(T){console.error(`Error recording view for essay ${r.id}:`,T)}}}catch(k){console.error("Error during Essay interaction initialization:",k),l("error",k)}}je(()=>{let k=()=>{},_=null;try{return _=setTimeout(async()=>{try{await v(),k=rt(T=>{if(a=T,r&&r.id){const j=`${lt.ESSAY}:${r.id}`;t(2,f=!!T.likes[j])}})}catch(T){console.error("Error during delayed Essay initialization:",T),l("error",T)}},300),window.addEventListener("scroll",c),()=>{k&&k(),_&&clearTimeout(_),window.removeEventListener("scroll",c),p&&clearTimeout(p)}}catch(T){return console.error("Error setting up Essay component:",T),l("error",T),()=>{k&&k(),_&&clearTimeout(_),window.removeEventListener("scroll",c),p&&clearTimeout(p)}}});function c(){typeof window>"u"||m||(m=!0,requestAnimationFrame(()=>{m=!1}))}async function w(){if(console.log("Essay handleLike called"),!r||!r.id){console.error("Cannot like: Missing essay ID");return}try{console.log(`Toggling like for essay ID: ${r.id}`);const k=!f;t(4,I=Math.max(0,I+(k?1:-1))),H=!0,t(2,f=k),t(4,I),t(0,r),t(9,S);const T=await ct(r.id);console.log(`Toggle like result: ${T}`)}catch(k){console.error("Error toggling like:",k),l("error",k),t(4,I=Math.max(0,I+(f?-1:1))),t(2,f=!f),H=!1}}async function F(){try{if(!r||!r.id){console.error("Cannot share: Missing essay ID");return}console.log(`Sharing essay ID: ${r.id}`);const k=`${window.location.origin}/writing/${r.slug}`;t(5,P+=1),H=!0,t(5,P),t(0,r),t(9,S),await navigator.clipboard.writeText(k),t(3,y="URL copied to clipboard!"),p&&clearTimeout(p),p=setTimeout(()=>{t(3,y="")},3e3);const _=await ut(r.id);console.log(`Share recorded: ${_}`)}catch(k){console.error("Error sharing essay:",k),l("error",k),t(3,y="Failed to copy URL"),p=setTimeout(()=>{t(3,y="")},3e3),t(5,P=Math.max(0,P-1)),H=!1}}const U=k=>{console.log("Like button clicked in single essay view"),w()},W=k=>{console.log("Share button clicked in single essay view"),F()};return o.$$set=k=>{"essay"in k&&t(0,r=k.essay),"content"in k&&t(1,n=k.content),"$$scope"in k&&t(10,i=k.$$scope)},o.$$.update=()=>{o.$$.dirty&513&&r&&!S&&(t(4,I=r.like_count||0),t(5,P=r.share_count||0),t(6,N=(r.view_count||0)+1),H=!0,t(9,S=!0))},[r,n,f,y,I,P,N,w,F,S,i,s,U,W]}class yt extends Oe{constructor(e){super(),ze(this,e,pt,ht,Ue,{essay:0,content:1})}}function vt(o){return{c(){this.h()},l(e){this.h()},h(){document.title="Essay Not Found | Wendy Ham's Weekend Projects"},m:z,p:z,d:z}}function bt(o){let e,t,s,i,l,r,n,a,f,y,p,I,P,N,H,S,V,m;document.title=e=o[0].essay.title+" | Wendy Ham's Weekend Projects";let v=o[10]&&Fe();return{c(){t=L(),s=b("meta"),i=L(),l=b("link"),n=L(),v&&v.c(),a=L(),f=b("meta"),y=L(),p=b("meta"),I=L(),P=b("meta"),H=L(),S=b("meta"),V=L(),m=b("meta"),this.h()},l(c){t=D(c),s=g(c,"META",{name:!0,content:!0}),i=D(c),l=g(c,"LINK",{rel:!0,href:!0}),n=D(c),v&&v.l(c),a=D(c),f=g(c,"META",{property:!0,content:!0}),y=D(c),p=g(c,"META",{property:!0,content:!0}),I=D(c),P=g(c,"META",{property:!0,content:!0}),H=D(c),S=g(c,"META",{property:!0,content:!0}),V=D(c),m=g(c,"META",{property:!0,content:!0}),this.h()},h(){d(s,"name","description"),d(s,"content",o[2]),d(l,"rel","canonical"),d(l,"href",r=`https://xnham.com/writing/${o[3].params.slug}`),d(f,"property","og:type"),d(f,"content","article"),d(p,"property","og:url"),d(p,"content",o[1]),d(P,"property","og:title"),d(P,"content",N=`${o[0].essay.title} | Wendy Ham's Weekend Projects`),d(S,"property","og:description"),d(S,"content",o[2]),d(m,"property","og:image"),d(m,"content","https://xnham.com/images/og-image.png")},m(c,w){E(c,t,w),E(c,s,w),E(c,i,w),E(c,l,w),E(c,n,w),v&&v.m(c,w),E(c,a,w),E(c,f,w),E(c,y,w),E(c,p,w),E(c,I,w),E(c,P,w),E(c,H,w),E(c,S,w),E(c,V,w),E(c,m,w)},p(c,w){w&1&&e!==(e=c[0].essay.title+" | Wendy Ham's Weekend Projects")&&(document.title=e),w&4&&d(s,"content",c[2]),w&8&&r!==(r=`https://xnham.com/writing/${c[3].params.slug}`)&&d(l,"href",r),c[10]?v||(v=Fe(),v.c(),v.m(a.parentNode,a)):v&&(v.d(1),v=null),w&2&&d(p,"content",c[1]),w&1&&N!==(N=`${c[0].essay.title} | Wendy Ham's Weekend Projects`)&&d(P,"content",N),w&4&&d(S,"content",c[2])},d(c){c&&(u(t),u(s),u(i),u(l),u(n),u(a),u(f),u(y),u(p),u(I),u(P),u(H),u(S),u(V),u(m)),v&&v.d(c)}}}function Fe(o){let e,t="{JSON.stringify(articleJsonLd)}";return{c(){e=b("script"),e.textContent=t,this.h()},l(s){e=g(s,"SCRIPT",{type:!0,"data-svelte-h":!0}),G(e)!=="svelte-1yce5l5"&&(e.textContent=t),this.h()},h(){d(e,"type","application/ld+json")},m(s,i){E(s,e,i)},d(s){s&&u(e)}}}function gt(o){let e,t;return e=new yt({props:{essay:o[0].essay,content:o[0].content,$$slots:{"content-actions":[It]},$$scope:{ctx:o}}}),e.$on("error",o[11]),{c(){be(e.$$.fragment)},l(s){ge(e.$$.fragment,s)},m(s,i){ke(e,s,i),t=!0},p(s,i){const l={};i&1&&(l.essay=s[0].essay),i&1&&(l.content=s[0].content),i&32960&&(l.$$scope={dirty:i,ctx:s}),e.$set(l)},i(s){t||(Y(e.$$.fragment,s),t=!0)},o(s){K(e.$$.fragment,s),t=!1},d(s){Ce(e,s)}}}function kt(o){let e,t,s;function i(n,a){return n[5]>=Be?Pt:Tt}let l=i(o),r=l(o);return{c(){e=b("div"),t=b("p"),s=J(`There was an error loading the essay. 
          `),r.c(),this.h()},l(n){e=g(n,"DIV",{class:!0});var a=M(e);t=g(a,"P",{});var f=M(t);s=O(f,`There was an error loading the essay. 
          `),r.l(f),f.forEach(u),a.forEach(u),this.h()},h(){d(e,"class","error-message svelte-2m1oay")},m(n,a){E(n,e,a),h(e,t),h(t,s),r.m(t,null)},p(n,a){l!==(l=i(n))&&(r.d(1),r=l(n),r&&(r.c(),r.m(t,null)))},i:z,o:z,d(n){n&&u(e),r.d()}}}function wt(o){let e,t="Essay not found";return{c(){e=b("div"),e.textContent=t,this.h()},l(s){e=g(s,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-976hnr"&&(e.textContent=t),this.h()},h(){d(e,"class","error svelte-2m1oay")},m(s,i){E(s,e,i)},p:z,i:z,o:z,d(s){s&&u(e)}}}function Et(o){let e,t="Load Content",s,i;return{c(){e=b("button"),e.textContent=t,this.h()},l(l){e=g(l,"BUTTON",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1fkv18"&&(e.textContent=t),this.h()},h(){d(e,"class","load-button svelte-2m1oay")},m(l,r){E(l,e,r),s||(i=Je(e,"click",o[12]),s=!0)},p:z,d(l){l&&u(e),s=!1,i()}}}function Ct(o){let e,t="Loading essay content...";return{c(){e=b("p"),e.textContent=t},l(s){e=g(s,"P",{"data-svelte-h":!0}),G(e)!=="svelte-157utc8"&&(e.textContent=t)},m(s,i){E(s,e,i)},p:z,d(s){s&&u(e)}}}function Re(o){let e,t,s,i,l,r="Try Again",n,a;return{c(){e=b("p"),t=J("Error: "),s=J(o[7]),i=L(),l=b("button"),l.textContent=r,this.h()},l(f){e=g(f,"P",{class:!0});var y=M(e);t=O(y,"Error: "),s=O(y,o[7]),y.forEach(u),i=D(f),l=g(f,"BUTTON",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-rkub2y"&&(l.textContent=r),this.h()},h(){d(e,"class","error-message svelte-2m1oay"),d(l,"class","load-button svelte-2m1oay")},m(f,y){E(f,e,y),h(e,t),h(e,s),E(f,i,y),E(f,l,y),n||(a=Je(l,"click",o[12]),n=!0)},p(f,y){y&128&&q(s,f[7])},d(f){f&&(u(e),u(i),u(l)),n=!1,a()}}}function It(o){let e,t;function s(n,a){return n[6]?Ct:Et}let i=s(o),l=i(o),r=o[7]&&Re(o);return{c(){e=b("div"),l.c(),t=L(),r&&r.c(),this.h()},l(n){e=g(n,"DIV",{slot:!0});var a=M(e);l.l(a),t=D(a),r&&r.l(a),a.forEach(u),this.h()},h(){d(e,"slot","content-actions")},m(n,a){E(n,e,a),l.m(e,null),h(e,t),r&&r.m(e,null)},p(n,a){i===(i=s(n))&&l?l.p(n,a):(l.d(1),l=i(n),l&&(l.c(),l.m(e,t))),n[7]?r?r.p(n,a):(r=Re(n),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},d(n){n&&u(e),l.d(),r&&r.d()}}}function Tt(o){let e;return{c(){e=J("Retrying...")},l(t){e=O(t,"Retrying...")},m(t,s){E(t,e,s)},d(t){t&&u(e)}}}function Pt(o){let e;return{c(){e=J("Please try refreshing the page.")},l(t){e=O(t,"Please try refreshing the page.")},m(t,s){E(t,e,s)},d(t){t&&u(e)}}}function St(o){let e,t,s,i,l=`&lt; 
    <a href="/writing" class="svelte-2m1oay"><span class="link-text svelte-2m1oay">Back to essays</span></a>`,r,n,a,f="<",y,p,I="Back",P,N,H,S,V,m,v;function c(_,T){return _[0].essay?bt:vt}let w=c(o),F=w(o);const U=[wt,kt,gt],W=[];function k(_,T){return _[0].essay?_[4]?1:2:0}return V=k(o),m=W[V]=U[V](o),{c(){F.c(),e=De(),t=L(),s=b("div"),i=b("div"),i.innerHTML=l,r=L(),n=b("a"),a=b("span"),a.textContent=f,y=L(),p=b("span"),p.textContent=I,H=L(),S=b("article"),m.c(),this.h()},l(_){const T=et("svelte-akv0tl",document.head);F.l(T),e=De(),T.forEach(u),t=D(_),s=g(_,"DIV",{class:!0});var j=M(s);i=g(j,"DIV",{class:!0,"data-svelte-h":!0}),G(i)!=="svelte-r7biw2"&&(i.innerHTML=l),r=D(j),n=g(j,"A",{href:!0,class:!0,"aria-hidden":!0});var X=M(n);a=g(X,"SPAN",{class:!0,"data-svelte-h":!0}),G(a)!=="svelte-19se4d7"&&(a.textContent=f),y=D(X),p=g(X,"SPAN",{class:!0,"data-svelte-h":!0}),G(p)!=="svelte-1v4nvf1"&&(p.textContent=I),X.forEach(u),H=D(j),S=g(j,"ARTICLE",{class:!0});var Q=M(S);m.l(Q),Q.forEach(u),j.forEach(u),this.h()},h(){d(i,"class","back-button svelte-2m1oay"),d(a,"class","arrow svelte-2m1oay"),d(p,"class","floating-link-text svelte-2m1oay"),d(n,"href","/writing"),d(n,"class",P="floating-back-button "+(o[9]?"visible":"hidden")+" "+(o[8]?"":"instant-hide")+" svelte-2m1oay"),d(n,"aria-hidden",N=!o[9]),d(S,"class","svelte-2m1oay"),d(s,"class","container")},m(_,T){F.m(document.head,null),h(document.head,e),E(_,t,T),E(_,s,T),h(s,i),h(s,r),h(s,n),h(n,a),h(n,y),h(n,p),h(s,H),h(s,S),W[V].m(S,null),v=!0},p(_,[T]){w===(w=c(_))&&F?F.p(_,T):(F.d(1),F=w(_),F&&(F.c(),F.m(e.parentNode,e))),(!v||T&768&&P!==(P="floating-back-button "+(_[9]?"visible":"hidden")+" "+(_[8]?"":"instant-hide")+" svelte-2m1oay"))&&d(n,"class",P),(!v||T&512&&N!==(N=!_[9]))&&d(n,"aria-hidden",N);let j=V;V=k(_),V===j?W[V].p(_,T):(we(),K(W[j],1,1,()=>{W[j]=null}),Ee(),m=W[V],m?m.p(_,T):(m=W[V]=U[V](_),m.c()),Y(m,1),m.m(S,null))},i(_){v||(Y(m),v=!0)},o(_){K(m),v=!1},d(_){_&&(u(t),u(s)),F.d(_),u(e),W[V].d()}}}const Be=2;function Lt(o,e,t){let s,i,l,r;tt(o,st,m=>t(3,r=m));let{data:n}=e,a=!1,f=0,y=!1,p=null,I=!1,P=!1,N=!1;function H(m){console.error("Error in Essay component:",m.detail),t(4,a=!0),f<Be&&(t(5,f++,f),setTimeout(()=>{console.log(`Retry attempt ${f} for Essay component`),t(4,a=!1)},1e3))}async function S(){if(!(!n.essay||y)){t(6,y=!0),t(7,p=null);try{console.log(`Loading content for ${n.essay.slug} on the client side`);const{supabase:m}=await qe(()=>import("../chunks/supabase.977684e5.js"),["../chunks/supabase.977684e5.js","../chunks/_commonjsHelpers.23102255.js","../chunks/preload-helper.a4192956.js"],import.meta.url),{data:v,error:c}=await m.from("essays").select("content").eq("slug",n.essay.slug).single();if(c)throw new Error(`Failed to fetch content: ${c.message}`);if(!v||!v.content)throw new Error("No content available for this essay");console.log(`Content loaded, length: ${v.content.length}`),t(0,n={...n,content:v.content})}catch(m){console.error("Error loading content on client side:",m),t(7,p=m instanceof Error?m.message:"Unknown error occurred")}finally{t(6,y=!1)}}}function V(){typeof window>"u"||N||(N=!0,requestAnimationFrame(()=>{const m=window.scrollY;t(8,I=m>300),I&&!P?t(9,P=!0):!I&&P&&t(9,P=!1),N=!1}))}return je(()=>{n.essay&&(nt.set({title:`${n.essay.title} | Wendy Ham's Weekend Projects`,description:s,canonicalUrl:`https://xnham.com/writing/${r.params.slug}`,type:"article",url:i}),n.content===null&&setTimeout(()=>{S()},100)),window.addEventListener("scroll",V);const m=v=>{console.error("Global error caught in essay page:",v.error||v.message);const c=String(v.error||v.message);(c.includes("Essay")||c.includes("essay")||c.includes("interaction"))&&(t(4,a=!0),v.preventDefault())};return window.addEventListener("error",m),()=>{window.removeEventListener("scroll",V),window.removeEventListener("error",m)}}),o.$$set=m=>{"data"in m&&t(0,n=m.data)},o.$$.update=()=>{var m,v,c,w;o.$$.dirty&1&&t(2,s=(m=n==null?void 0:n.essay)!=null&&m.description&&((v=n==null?void 0:n.essay)!=null&&v.excerpt)?`${n.essay.description} ${n.essay.excerpt}`:((c=n==null?void 0:n.essay)==null?void 0:c.description)||((w=n==null?void 0:n.essay)==null?void 0:w.excerpt)||""),o.$$.dirty&8&&t(1,i=typeof window<"u"?window.location.href:`https://xnham.com/writing/${r.params.slug}`),o.$$.dirty&7&&t(10,l=n!=null&&n.essay?{"@context":"https://schema.org","@type":"Article",headline:n.essay.title,description:s,datePublished:n.essay.date,author:{"@type":"Person",name:"Wendy Ham",url:"https://xnham.com"},publisher:{"@type":"Person",name:"Wendy Ham",url:"https://xnham.com"},mainEntityOfPage:{"@type":"WebPage","@id":i}}:null)},[n,i,s,r,a,f,y,p,I,P,l,H,S]}class Rt extends Oe{constructor(e){super(),ze(this,e,Lt,St,Ue,{data:0})}}export{Rt as component};
