import{s as xe,e as ce,a as A,f as E,G as et,d as c,c as S,g as w,h as z,j as d,w as k,i as h,A as tt,S as ot,o as st,r as re,F as Ie,l as q,m as K,J as We,K as Le,L as Ae,n as fe,y as B,C as at,H as ct,I as ut}from"../chunks/scheduler.0abf8665.js";import{S as rt,i as nt,g as ge,t as G,c as ke,a as J,b as Se,d as je,m as De,e as He,f as Je}from"../chunks/index.6a57b9dd.js";import{p as lt}from"../chunks/stores.f605bf0e.js";import{m as Be}from"../chunks/metadataStore.3f488aae.js";import{f as Oe}from"../chunks/index.da8dadf4.js";import{s as ft}from"../chunks/supabase.8f09c013.js";import{I as qe}from"../chunks/InteractionButton.ea801b82.js";import{s as dt,C as pt,i as mt,a as _t,b as ht,t as yt,r as gt}from"../chunks/essayInteractionService.c4fe877c.js";const kt=n=>({}),Ke=n=>({}),vt=n=>({}),Ge=n=>({}),bt=n=>({}),Ye=n=>({});function Xe(n){let t,s,e,i,u,p,o,y="{JSON.stringify(articleJsonLd)}",m,W,a,P,l,D,T,g,v,b,C;return document.title=t=n[0].title+" | Wendy Ham's Weekend Projects",{c(){s=A(),e=E("meta"),i=A(),u=E("link"),p=A(),o=E("script"),o.textContent=y,m=A(),W=E("meta"),a=A(),P=E("meta"),l=A(),D=E("meta"),g=A(),v=E("meta"),b=A(),C=E("meta"),this.h()},l(r){s=S(r),e=w(r,"META",{name:!0,content:!0}),i=S(r),u=w(r,"LINK",{rel:!0,href:!0}),p=S(r),o=w(r,"SCRIPT",{type:!0,"data-svelte-h":!0}),re(o)!=="svelte-1yj4vgp"&&(o.textContent=y),m=S(r),W=w(r,"META",{property:!0,content:!0}),a=S(r),P=w(r,"META",{property:!0,content:!0}),l=S(r),D=w(r,"META",{property:!0,content:!0}),g=S(r),v=w(r,"META",{property:!0,content:!0}),b=S(r),C=w(r,"META",{property:!0,content:!0}),this.h()},h(){d(e,"name","description"),d(e,"content",n[2]),d(u,"rel","canonical"),d(u,"href",n[1]),d(o,"type","application/ld+json"),d(W,"property","og:type"),d(W,"content","article"),d(P,"property","og:url"),d(P,"content",n[1]),d(D,"property","og:title"),d(D,"content",T=`${n[0].title} | Wendy Ham's Weekend Projects`),d(v,"property","og:description"),d(v,"content",n[2]),d(C,"property","og:image"),d(C,"content","https://xnham.com/images/og-image.png")},m(r,f){h(r,s,f),h(r,e,f),h(r,i,f),h(r,u,f),h(r,p,f),h(r,o,f),h(r,m,f),h(r,W,f),h(r,a,f),h(r,P,f),h(r,l,f),h(r,D,f),h(r,g,f),h(r,v,f),h(r,b,f),h(r,C,f)},p(r,f){f&1&&t!==(t=r[0].title+" | Wendy Ham's Weekend Projects")&&(document.title=t),f&4&&d(e,"content",r[2]),f&2&&d(u,"href",r[1]),f&2&&d(P,"content",r[1]),f&1&&T!==(T=`${r[0].title} | Wendy Ham's Weekend Projects`)&&d(D,"content",T),f&4&&d(v,"content",r[2])},d(r){r&&(c(s),c(e),c(i),c(u),c(p),c(o),c(m),c(W),c(a),c(P),c(l),c(D),c(g),c(v),c(b),c(C))}}}function Et(n){let t,s,e,i,u=Ze(n[0].date)+"",p,o,y,m,W,a,P,l,D,T=n[0].title+"",g,v,b,C=n[0].description+"",r,f,O,V,F,L,H,N,x=n[9]()+"",ne,le,de=n[9]()===1?"like":"likes",ue,I,j,Q=n[10]()+"",U,$,pe=n[10]()===1?"share":"shares",ve,be,ee,Me=n[11]()+"",Ee,we,Ve=n[11]()===1?"view":"views",Pe,me,Z;const Te=n[19]["before-essay"],Y=Ie(Te,n,n[18],Ye);m=new qe({props:{type:"like",active:n[6],count:void 0}}),m.$on("click",n[12]),a=new qe({props:{type:"share",active:!1,count:void 0}}),a.$on("click",n[13]);let R=n[7]&&Qe(n);const Ne=[It,Ct],te=[];function Fe(_,M){return _[3]?0:1}V=Fe(n),F=te[V]=Ne[V](n);const Ce=n[19]["after-essay"],X=Ie(Ce,n,n[18],Ke);return{c(){Y&&Y.c(),t=A(),s=E("div"),e=E("div"),i=E("p"),p=q(u),o=A(),y=E("div"),Se(m.$$.fragment),W=A(),Se(a.$$.fragment),P=A(),R&&R.c(),l=A(),D=E("h2"),g=q(T),v=A(),b=E("p"),r=q(C),f=A(),O=E("div"),F.c(),L=A(),H=E("div"),N=E("span"),ne=q(x),le=A(),ue=q(de),I=A(),j=E("span"),U=q(Q),$=A(),ve=q(pe),be=A(),ee=E("span"),Ee=q(Me),we=A(),Pe=q(Ve),me=A(),X&&X.c(),this.h()},l(_){Y&&Y.l(_),t=S(_),s=w(_,"DIV",{class:!0});var M=z(s);e=w(M,"DIV",{class:!0});var se=z(e);i=w(se,"P",{class:!0});var ie=z(i);p=K(ie,u),ie.forEach(c),o=S(se),y=w(se,"DIV",{class:!0});var oe=z(y);je(m.$$.fragment,oe),W=S(oe),je(a.$$.fragment,oe),P=S(oe),R&&R.l(oe),oe.forEach(c),se.forEach(c),l=S(M),D=w(M,"H2",{class:!0});var Re=z(D);g=K(Re,T),Re.forEach(c),v=S(M),b=w(M,"P",{class:!0});var ze=z(b);r=K(ze,C),ze.forEach(c),f=S(M),O=w(M,"DIV",{class:!0});var Ue=z(O);F.l(Ue),Ue.forEach(c),M.forEach(c),L=S(_),H=w(_,"DIV",{class:!0});var ae=z(H);N=w(ae,"SPAN",{class:!0});var _e=z(N);ne=K(_e,x),le=S(_e),ue=K(_e,de),_e.forEach(c),I=S(ae),j=w(ae,"SPAN",{class:!0});var he=z(j);U=K(he,Q),$=S(he),ve=K(he,pe),he.forEach(c),be=S(ae),ee=w(ae,"SPAN",{class:!0});var ye=z(ee);Ee=K(ye,Me),we=S(ye),Pe=K(ye,Ve),ye.forEach(c),ae.forEach(c),me=S(_),X&&X.l(_),this.h()},h(){d(i,"class","essay-date svelte-15h8k01"),d(y,"class","essay-buttons svelte-15h8k01"),d(e,"class","essay-header-row svelte-15h8k01"),d(D,"class","essay-title svelte-15h8k01"),d(b,"class","essay-description svelte-15h8k01"),d(O,"class","content svelte-15h8k01"),d(s,"class","essay-container svelte-15h8k01"),d(N,"class","essay-stat"),d(j,"class","essay-stat"),d(ee,"class","essay-stat"),d(H,"class","essay-stats svelte-15h8k01")},m(_,M){Y&&Y.m(_,M),h(_,t,M),h(_,s,M),k(s,e),k(e,i),k(i,p),k(e,o),k(e,y),De(m,y,null),k(y,W),De(a,y,null),k(y,P),R&&R.m(y,null),k(s,l),k(s,D),k(D,g),k(s,v),k(s,b),k(b,r),k(s,f),k(s,O),te[V].m(O,null),h(_,L,M),h(_,H,M),k(H,N),k(N,ne),k(N,le),k(N,ue),k(H,I),k(H,j),k(j,U),k(j,$),k(j,ve),k(H,be),k(H,ee),k(ee,Ee),k(ee,we),k(ee,Pe),h(_,me,M),X&&X.m(_,M),Z=!0},p(_,M){Y&&Y.p&&(!Z||M&262144)&&We(Y,Te,_,_[18],Z?Ae(Te,_[18],M,bt):Le(_[18]),Ye),(!Z||M&1)&&u!==(u=Ze(_[0].date)+"")&&fe(p,u);const se={};M&64&&(se.active=_[6]),m.$set(se),_[7]?R?(R.p(_,M),M&128&&J(R,1)):(R=Qe(_),R.c(),J(R,1),R.m(y,null)):R&&(ge(),G(R,1,1,()=>{R=null}),ke()),(!Z||M&1)&&T!==(T=_[0].title+"")&&fe(g,T),(!Z||M&1)&&C!==(C=_[0].description+"")&&fe(r,C);let ie=V;V=Fe(_),V===ie?te[V].p(_,M):(ge(),G(te[ie],1,1,()=>{te[ie]=null}),ke(),F=te[V],F?F.p(_,M):(F=te[V]=Ne[V](_),F.c()),J(F,1),F.m(O,null)),X&&X.p&&(!Z||M&262144)&&We(X,Ce,_,_[18],Z?Ae(Ce,_[18],M,kt):Le(_[18]),Ke)},i(_){Z||(J(Y,_),J(m.$$.fragment,_),J(a.$$.fragment,_),J(R),J(F),J(X,_),Z=!0)},o(_){G(Y,_),G(m.$$.fragment,_),G(a.$$.fragment,_),G(R),G(F),G(X,_),Z=!1},d(_){_&&(c(t),c(s),c(L),c(H),c(me)),Y&&Y.d(_),He(m),He(a),R&&R.d(),te[V].d(),X&&X.d(_)}}}function wt(n){let t,s="Essay not found";return{c(){t=E("div"),t.textContent=s,this.h()},l(e){t=w(e,"DIV",{class:!0,"data-svelte-h":!0}),re(t)!=="svelte-976hnr"&&(t.textContent=s),this.h()},h(){d(t,"class","error svelte-15h8k01")},m(e,i){h(e,t,i)},p:B,i:B,o:B,d(e){e&&c(t)}}}function Pt(n){let t,s;return{c(){t=E("div"),s=q(n[5]),this.h()},l(e){t=w(e,"DIV",{class:!0});var i=z(t);s=K(i,n[5]),i.forEach(c),this.h()},h(){d(t,"class","error svelte-15h8k01")},m(e,i){h(e,t,i),k(t,s)},p(e,i){i&32&&fe(s,e[5])},i:B,o:B,d(e){e&&c(t)}}}function Tt(n){let t,s="Loading essay...";return{c(){t=E("div"),t.textContent=s,this.h()},l(e){t=w(e,"DIV",{class:!0,"data-svelte-h":!0}),re(t)!=="svelte-1hhis7s"&&(t.textContent=s),this.h()},h(){d(t,"class","loading svelte-15h8k01")},m(e,i){h(e,t,i)},p:B,i:B,o:B,d(e){e&&c(t)}}}function Qe(n){let t,s,e,i;return{c(){t=E("div"),s=q(n[7]),this.h()},l(u){t=w(u,"DIV",{class:!0});var p=z(t);s=K(p,n[7]),p.forEach(c),this.h()},h(){d(t,"class","copy-feedback svelte-15h8k01")},m(u,p){h(u,t,p),k(t,s),i=!0},p(u,p){(!i||p&128)&&fe(s,u[7])},i(u){i||(u&&at(()=>{i&&(e||(e=Je(t,Oe,{duration:150},!0)),e.run(1))}),i=!0)},o(u){u&&(e||(e=Je(t,Oe,{duration:150},!1)),e.run(0)),i=!1},d(u){u&&c(t),u&&e&&e.end()}}}function Ct(n){let t;const s=n[19]["content-actions"],e=Ie(s,n,n[18],Ge);return{c(){e&&e.c()},l(i){e&&e.l(i)},m(i,u){e&&e.m(i,u),t=!0},p(i,u){e&&e.p&&(!t||u&262144)&&We(e,s,i,i[18],t?Ae(s,i[18],u,vt):Le(i[18]),Ge)},i(i){t||(J(e,i),t=!0)},o(i){G(e,i),t=!1},d(i){e&&e.d(i)}}}function It(n){let t,s;return{c(){t=new ct(!1),s=ce(),this.h()},l(e){t=ut(e,!1),s=ce(),this.h()},h(){t.a=s},m(e,i){t.m(n[3],e,i),h(e,s,i)},p(e,i){i&8&&t.p(e[3])},i:B,o:B,d(e){e&&(c(s),t.d())}}}function Wt(n){let t,s,e,i,u,p,o=n[0]&&n[8]&&Xe(n);const y=[Tt,Pt,wt,Et],m=[];function W(a,P){return a[4]?0:a[5]?1:a[0]?3:2}return i=W(n),u=m[i]=y[i](n),{c(){o&&o.c(),t=ce(),s=A(),e=E("article"),u.c(),this.h()},l(a){const P=et("svelte-gxo76b",document.head);o&&o.l(P),t=ce(),P.forEach(c),s=S(a),e=w(a,"ARTICLE",{class:!0});var l=z(e);u.l(l),l.forEach(c),this.h()},h(){d(e,"class","svelte-15h8k01")},m(a,P){o&&o.m(document.head,null),k(document.head,t),h(a,s,P),h(a,e,P),m[i].m(e,null),p=!0},p(a,[P]){a[0]&&a[8]?o?o.p(a,P):(o=Xe(a),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null);let l=i;i=W(a),i===l?m[i].p(a,P):(ge(),G(m[l],1,1,()=>{m[l]=null}),ke(),u=m[i],u?u.p(a,P):(u=m[i]=y[i](a),u.c()),J(u,1),u.m(e,null))},i(a){p||(J(u),p=!0)},o(a){G(u),p=!1},d(a){a&&(c(s),c(e)),o&&o.d(a),c(t),m[i].d()}}}function Ze(n){if(!n)return"";try{return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(t){return console.error("Error formatting date:",t),n}}function Lt(n,t,s){let e,i,u,p;tt(n,lt,I=>s(26,p=I));let{$$slots:o={},$$scope:y}=t;const m=ot();let{slug:W=""}=t,{preloadedEssay:a=null}=t,{serverError:P=null}=t,l=a,D=(a==null?void 0:a.content)||null,T=!a,g=P,v={likes:{},shares:{},views:{}},b=!1,C="",r=null,f=0,O=0,V=0,F=!1,L=!1;function H(){return F?f:(l==null?void 0:l.like_count)||0}function N(){return F?O:(l==null?void 0:l.share_count)||0}function x(){return F?V:(l==null?void 0:l.view_count)||0}async function ne(I){if(a){console.log("Using preloaded essay data, skipping client-side fetch");return}if(I)try{s(4,T=!0),s(5,g=null),console.log(`Loading essay with slug: ${I}`);const{data:j,error:Q}=await ft.from("essays").select(`
          id, title, description, date, published, excerpt, slug,
          like_count, share_count, view_count, content
        `).eq("slug",I).single();if(Q)throw console.error(`Error fetching essay: ${Q.message}`),new Error(`Failed to load essay: ${Q.message}`);if(!j)throw new Error(`No essay found with slug: ${I}`);if(j.published===!1)throw new Error("This essay is not yet published");console.log(`Essay loaded: ${j.title}`),s(0,l=j),s(3,D=j.content),s(17,L=!1),await le()}catch(j){console.error("Error loading essay:",j),s(5,g=j instanceof Error?j.message:"Failed to load essay"),m("error",j)}finally{s(4,T=!1)}}async function le(){try{console.log("Initializing interactions on Essay component");const I=await mt();if(console.log("Interactions initialized on Essay with device ID:",I),!I){console.error("Failed to initialize interactions on Essay - no device ID returned"),m("error",new Error("Failed to initialize interactions"));return}if(l&&l.id){const j=_t(l.id);console.log(`Essay ${l.id} already liked:`,j),s(6,b=j);try{await ht(l.id),console.log(`View recorded for essay ${l.id}`)}catch(Q){console.error(`Error recording view for essay ${l.id}:`,Q)}}}catch(I){console.error("Error during Essay interaction initialization:",I),m("error",I)}}async function de(){if(l!=null&&l.id)try{console.log(`Like button clicked for essay ${l.id}`);const I=b,j=H();f=Math.max(0,j+(I?-1:1)),s(6,b=!I);const U=await yt(l.id);if(console.log(`New like status after toggle: ${U}`),U!==b){console.log("Correcting optimistic like status due to mismatch"),s(6,b=U);const $=U?1:-1;f=Math.max(0,H()+$)}}catch(I){console.error(`Error toggling like for essay ${l.id}:`,I),s(6,b=!b);const j=b?1:-1;f=Math.max(0,H()-j),m("error",I)}}async function ue(){if(!(l!=null&&l.id))return;console.log(`Share button clicked for essay ${l.id}`);const I=typeof window<"u"?window.location.href:`https://xnham.com/writing/${l.slug}`;try{navigator.share?(await navigator.share({title:l.title,text:l.description||l.excerpt||"Check out this essay",url:I}),console.log("Successfully shared via Web Share API"),s(7,C="Shared!")):(await navigator.clipboard.writeText(I),console.log("URL copied to clipboard"),s(7,C="Link copied!")),O=N()+1,await gt(l.id),r&&clearTimeout(r),r=setTimeout(()=>{s(7,C="")},2e3)}catch(j){console.error("Error sharing essay:",j),s(7,C="Error sharing"),r&&clearTimeout(r),r=setTimeout(()=>{s(7,C="")},2e3),m("error",j)}}return st(()=>{var Q;let I=()=>{},j=null;try{const U=W||((Q=p==null?void 0:p.params)==null?void 0:Q.slug);return console.log(`Essay component mounted with slug: ${U}`),U&&!a&&(!l||l.slug!==U)?ne(U):a&&le(),j=setTimeout(async()=>{try{I=dt($=>{if(v=$,l!=null&&l.id){const pe=`${pt.ESSAY}:${l.id}`;s(6,b=(v==null?void 0:v.likes[pe])||!1)}})}catch($){console.error("Error in delayed initialization:",$),m("error",$)}},300),()=>{I&&I(),j&&clearTimeout(j),r&&clearTimeout(r)}}catch(U){console.error("Error in Essay onMount:",U),m("error",U)}}),n.$$set=I=>{"slug"in I&&s(14,W=I.slug),"preloadedEssay"in I&&s(15,a=I.preloadedEssay),"serverError"in I&&s(16,P=I.serverError),"$$scope"in I&&s(18,y=I.$$scope)},n.$$.update=()=>{n.$$.dirty&131073&&l&&!L&&(f=l.like_count||0,O=l.share_count||0,V=(l.view_count||0)+1,F=!0,s(17,L=!0)),n.$$.dirty&49153&&W&&!a&&(!(l!=null&&l.slug)||l.slug!==W)&&(console.log(`Slug changed to ${W}, loading essay data`),ne(W)),n.$$.dirty&1&&s(1,e=typeof window<"u"?window.location.href:l!=null&&l.slug?`https://xnham.com/writing/${l.slug}`:""),n.$$.dirty&1&&s(2,i=l!=null&&l.description&&(l!=null&&l.excerpt)?`${l.description} ${l.excerpt}`:(l==null?void 0:l.description)||(l==null?void 0:l.excerpt)||""),n.$$.dirty&7&&s(8,u=l?{"@context":"https://schema.org","@type":"Article",headline:l.title,description:i,datePublished:l.date,author:{"@type":"Person",name:"Wendy Ham",url:"https://xnham.com"},publisher:{"@type":"Person",name:"Wendy Ham",url:"https://xnham.com"},mainEntityOfPage:{"@type":"WebPage","@id":e}}:null)},[l,e,i,D,T,g,b,C,u,H,N,x,de,ue,W,a,P,L,y,o]}class At extends rt{constructor(t){super(),nt(this,t,Lt,Wt,xe,{slug:14,preloadedEssay:15,serverError:16})}}function St(n){return{c(){this.h()},l(t){this.h()},h(){document.title="Essay Not Found | Wendy Ham's Weekend Projects"},m:B,p:B,d:B}}function jt(n){let t,s,e,i,u,p,o,y,m,W,a,P,l,D,T,g,v,b;document.title=t=n[0].essay.title+" | Wendy Ham's Weekend Projects";let C=n[8]&&$e();return{c(){s=A(),e=E("meta"),i=A(),u=E("link"),o=A(),C&&C.c(),y=A(),m=E("meta"),W=A(),a=E("meta"),P=A(),l=E("meta"),T=A(),g=E("meta"),v=A(),b=E("meta"),this.h()},l(r){s=S(r),e=w(r,"META",{name:!0,content:!0}),i=S(r),u=w(r,"LINK",{rel:!0,href:!0}),o=S(r),C&&C.l(r),y=S(r),m=w(r,"META",{property:!0,content:!0}),W=S(r),a=w(r,"META",{property:!0,content:!0}),P=S(r),l=w(r,"META",{property:!0,content:!0}),T=S(r),g=w(r,"META",{property:!0,content:!0}),v=S(r),b=w(r,"META",{property:!0,content:!0}),this.h()},h(){d(e,"name","description"),d(e,"content",n[1]),d(u,"rel","canonical"),d(u,"href",p=`https://xnham.com/writing/${n[3].params.slug}`),d(m,"property","og:type"),d(m,"content","article"),d(a,"property","og:url"),d(a,"content",n[2]),d(l,"property","og:title"),d(l,"content",D=`${n[0].essay.title} | Wendy Ham's Weekend Projects`),d(g,"property","og:description"),d(g,"content",n[1]),d(b,"property","og:image"),d(b,"content","https://xnham.com/images/og-image.png")},m(r,f){h(r,s,f),h(r,e,f),h(r,i,f),h(r,u,f),h(r,o,f),C&&C.m(r,f),h(r,y,f),h(r,m,f),h(r,W,f),h(r,a,f),h(r,P,f),h(r,l,f),h(r,T,f),h(r,g,f),h(r,v,f),h(r,b,f)},p(r,f){f&1&&t!==(t=r[0].essay.title+" | Wendy Ham's Weekend Projects")&&(document.title=t),f&2&&d(e,"content",r[1]),f&8&&p!==(p=`https://xnham.com/writing/${r[3].params.slug}`)&&d(u,"href",p),r[8]?C||(C=$e(),C.c(),C.m(y.parentNode,y)):C&&(C.d(1),C=null),f&4&&d(a,"content",r[2]),f&1&&D!==(D=`${r[0].essay.title} | Wendy Ham's Weekend Projects`)&&d(l,"content",D),f&2&&d(g,"content",r[1])},d(r){r&&(c(s),c(e),c(i),c(u),c(o),c(y),c(m),c(W),c(a),c(P),c(l),c(T),c(g),c(v),c(b)),C&&C.d(r)}}}function $e(n){let t,s="{JSON.stringify(articleJsonLd)}";return{c(){t=E("script"),t.textContent=s,this.h()},l(e){t=w(e,"SCRIPT",{type:!0,"data-svelte-h":!0}),re(t)!=="svelte-1yce5l5"&&(t.textContent=s),this.h()},h(){d(t,"type","application/ld+json")},m(e,i){h(e,t,i)},d(e){e&&c(t)}}}function Dt(n){let t,s;return t=new At({props:{slug:n[3].params.slug,preloadedEssay:n[0].essay}}),t.$on("error",n[9]),{c(){Se(t.$$.fragment)},l(e){je(t.$$.fragment,e)},m(e,i){De(t,e,i),s=!0},p(e,i){const u={};i&8&&(u.slug=e[3].params.slug),i&1&&(u.preloadedEssay=e[0].essay),t.$set(u)},i(e){s||(J(t.$$.fragment,e),s=!0)},o(e){G(t.$$.fragment,e),s=!1},d(e){He(t,e)}}}function Ht(n){let t,s,e;function i(o,y){return o[5]>=it?Vt:Mt}let u=i(n),p=u(n);return{c(){t=E("div"),s=E("p"),e=q(`There was an error loading the essay. 
        `),p.c(),this.h()},l(o){t=w(o,"DIV",{class:!0});var y=z(t);s=w(y,"P",{});var m=z(s);e=K(m,`There was an error loading the essay. 
        `),p.l(m),m.forEach(c),y.forEach(c),this.h()},h(){d(t,"class","error-message svelte-1lhf2gj")},m(o,y){h(o,t,y),k(t,s),k(s,e),p.m(s,null)},p(o,y){u!==(u=i(o))&&(p.d(1),p=u(o),p&&(p.c(),p.m(s,null)))},i:B,o:B,d(o){o&&c(t),p.d()}}}function Mt(n){let t;return{c(){t=q("Retrying...")},l(s){t=K(s,"Retrying...")},m(s,e){h(s,t,e)},d(s){s&&c(t)}}}function Vt(n){let t;return{c(){t=q("Please try refreshing the page.")},l(s){t=K(s,"Please try refreshing the page.")},m(s,e){h(s,t,e)},d(s){s&&c(t)}}}function Nt(n){let t,s,e,i,u=`&lt; 
    <a href="/writing"><span class="link-text svelte-1lhf2gj">Back to essays</span></a>`,p,o,y,m="<",W,a,P="Back",l,D,T,g,v,b;function C(L,H){return L[0].essay?jt:St}let r=C(n),f=r(n);const O=[Ht,Dt],V=[];function F(L,H){return L[4]?0:1}return g=F(n),v=V[g]=O[g](n),{c(){f.c(),t=ce(),s=A(),e=E("div"),i=E("div"),i.innerHTML=u,p=A(),o=E("a"),y=E("span"),y.textContent=m,W=A(),a=E("span"),a.textContent=P,T=A(),v.c(),this.h()},l(L){const H=et("svelte-akv0tl",document.head);f.l(H),t=ce(),H.forEach(c),s=S(L),e=w(L,"DIV",{class:!0});var N=z(e);i=w(N,"DIV",{class:!0,"data-svelte-h":!0}),re(i)!=="svelte-r7biw2"&&(i.innerHTML=u),p=S(N),o=w(N,"A",{href:!0,class:!0,"aria-hidden":!0});var x=z(o);y=w(x,"SPAN",{class:!0,"data-svelte-h":!0}),re(y)!=="svelte-19se4d7"&&(y.textContent=m),W=S(x),a=w(x,"SPAN",{class:!0,"data-svelte-h":!0}),re(a)!=="svelte-1v4nvf1"&&(a.textContent=P),x.forEach(c),T=S(N),v.l(N),N.forEach(c),this.h()},h(){d(i,"class","back-button svelte-1lhf2gj"),d(y,"class","arrow svelte-1lhf2gj"),d(a,"class","floating-link-text svelte-1lhf2gj"),d(o,"href","/writing"),d(o,"class",l="floating-back-button "+(n[7]?"visible":"hidden")+" "+(n[6]?"":"instant-hide")+" svelte-1lhf2gj"),d(o,"aria-hidden",D=!n[7]),d(e,"class","container")},m(L,H){f.m(document.head,null),k(document.head,t),h(L,s,H),h(L,e,H),k(e,i),k(e,p),k(e,o),k(o,y),k(o,W),k(o,a),k(e,T),V[g].m(e,null),b=!0},p(L,[H]){r===(r=C(L))&&f?f.p(L,H):(f.d(1),f=r(L),f&&(f.c(),f.m(t.parentNode,t))),(!b||H&192&&l!==(l="floating-back-button "+(L[7]?"visible":"hidden")+" "+(L[6]?"":"instant-hide")+" svelte-1lhf2gj"))&&d(o,"class",l),(!b||H&128&&D!==(D=!L[7]))&&d(o,"aria-hidden",D);let N=g;g=F(L),g===N?V[g].p(L,H):(ge(),G(V[N],1,1,()=>{V[N]=null}),ke(),v=V[g],v?v.p(L,H):(v=V[g]=O[g](L),v.c()),J(v,1),v.m(e,null))},i(L){b||(J(v),b=!0)},o(L){G(v),b=!1},d(L){L&&(c(s),c(e)),f.d(L),c(t),V[g].d()}}}const it=2;function Ft(n,t,s){let e,i,u,p;tt(n,lt,T=>s(3,p=T));let{data:o}=t,y=!1,m=0,W=!1,a=!1,P=!1;function l(T){console.error("Error in Essay component:",T.detail),s(4,y=!0),m<it&&(s(5,m++,m),setTimeout(()=>{console.log(`Retry attempt ${m} for Essay component`),s(4,y=!1)},1e3))}function D(){typeof window>"u"||P||(P=!0,requestAnimationFrame(()=>{const T=window.scrollY;s(6,W=T>300),W&&!a?s(7,a=!0):!W&&a&&s(7,a=!1),P=!1}))}return st(()=>{o.essay?Be.set({title:`${o.essay.title} | Wendy Ham's Weekend Projects`,description:e,canonicalUrl:`https://xnham.com/writing/${p.params.slug}`,type:"article",url:typeof window<"u"?window.location.href:`https://xnham.com/writing/${p.params.slug}`}):Be.set({title:"Essay | Wendy Ham's Weekend Projects",description:"Essays about design, coding, and more.",canonicalUrl:`https://xnham.com/writing/${p.params.slug}`,type:"article",url:typeof window<"u"?window.location.href:`https://xnham.com/writing/${p.params.slug}`}),window.addEventListener("scroll",D);const T=g=>{console.error("Global error caught in essay page:",g.error||g.message);const v=String(g.error||g.message);(v.includes("Essay")||v.includes("essay")||v.includes("interaction"))&&(s(4,y=!0),g.preventDefault())};return window.addEventListener("error",T),()=>{window.removeEventListener("scroll",D),window.removeEventListener("error",T)}}),n.$$set=T=>{"data"in T&&s(0,o=T.data)},n.$$.update=()=>{var T,g,v,b;n.$$.dirty&1&&s(1,e=(T=o==null?void 0:o.essay)!=null&&T.description&&((g=o==null?void 0:o.essay)!=null&&g.excerpt)?`${o.essay.description} ${o.essay.excerpt}`:((v=o==null?void 0:o.essay)==null?void 0:v.description)||((b=o==null?void 0:o.essay)==null?void 0:b.excerpt)||""),n.$$.dirty&8&&s(2,i=typeof window<"u"?window.location.href:`https://xnham.com/writing/${p.params.slug}`),n.$$.dirty&7&&s(8,u=o!=null&&o.essay?{"@context":"https://schema.org","@type":"Article",headline:o.essay.title,description:e,datePublished:o.essay.date,image:"https://xnham.com/images/og-image.png",author:{"@type":"Person",name:"Wendy Ham",url:"https://xnham.com"},publisher:{"@type":"Person",name:"Wendy Ham",url:"https://xnham.com"},mainEntityOfPage:{"@type":"WebPage","@id":i}}:null)},[o,e,i,p,y,m,W,a,u,l]}class Gt extends rt{constructor(t){super(),nt(this,t,Ft,Nt,xe,{data:0})}}export{Gt as component};
