import{s as xe,e as ce,a as A,f as E,G as et,d as c,c as S,g as w,h as R,j as d,w as k,i as h,A as tt,S as ot,o as st,r as re,F as Ie,l as O,m as K,J as We,K as Le,L as Ae,n as fe,y as J,C as at,H as ct,I as ut}from"../chunks/scheduler.0abf8665.js";import{S as rt,i as nt,g as ge,t as G,c as ke,a as U,b as Se,d as De,m as He,e as Me,f as Ue}from"../chunks/index.6a57b9dd.js";import{p as lt}from"../chunks/stores.59e8367c.js";import{m as Je}from"../chunks/metadataStore.3f488aae.js";import{f as Be}from"../chunks/index.da8dadf4.js";import{s as ft}from"../chunks/supabase.8f09c013.js";import{I as Oe}from"../chunks/InteractionButton.f2f18a2f.js";import{s as dt,C as mt,i as pt,a as _t,b as ht,t as yt,r as gt}from"../chunks/essayInteractionService.c4fe877c.js";const kt=n=>({}),Ke=n=>({}),vt=n=>({}),Ge=n=>({}),bt=n=>({}),Ye=n=>({});function Xe(n){let t,s,e,i,u,m,o,y="{JSON.stringify(articleJsonLd)}",p,W,a,P,l,H,T,g,v,b,C;return document.title=t=n[0].title+" | Wendy Ham's Weekend Projects",{c(){s=A(),e=E("meta"),i=A(),u=E("link"),m=A(),o=E("script"),o.textContent=y,p=A(),W=E("meta"),a=A(),P=E("meta"),l=A(),H=E("meta"),g=A(),v=E("meta"),b=A(),C=E("meta"),this.h()},l(r){s=S(r),e=w(r,"META",{name:!0,content:!0}),i=S(r),u=w(r,"LINK",{rel:!0,href:!0}),m=S(r),o=w(r,"SCRIPT",{type:!0,"data-svelte-h":!0}),re(o)!=="svelte-1yj4vgp"&&(o.textContent=y),p=S(r),W=w(r,"META",{property:!0,content:!0}),a=S(r),P=w(r,"META",{property:!0,content:!0}),l=S(r),H=w(r,"META",{property:!0,content:!0}),g=S(r),v=w(r,"META",{property:!0,content:!0}),b=S(r),C=w(r,"META",{property:!0,content:!0}),this.h()},h(){d(e,"name","description"),d(e,"content",n[2]),d(u,"rel","canonical"),d(u,"href",n[1]),d(o,"type","application/ld+json"),d(W,"property","og:type"),d(W,"content","article"),d(P,"property","og:url"),d(P,"content",n[1]),d(H,"property","og:title"),d(H,"content",T=`${n[0].title} | Wendy Ham's Weekend Projects`),d(v,"property","og:description"),d(v,"content",n[2]),d(C,"property","og:image"),d(C,"content","https://xnham.com/images/og-image.png")},m(r,f){h(r,s,f),h(r,e,f),h(r,i,f),h(r,u,f),h(r,m,f),h(r,o,f),h(r,p,f),h(r,W,f),h(r,a,f),h(r,P,f),h(r,l,f),h(r,H,f),h(r,g,f),h(r,v,f),h(r,b,f),h(r,C,f)},p(r,f){f&1&&t!==(t=r[0].title+" | Wendy Ham's Weekend Projects")&&(document.title=t),f&4&&d(e,"content",r[2]),f&2&&d(u,"href",r[1]),f&2&&d(P,"content",r[1]),f&1&&T!==(T=`${r[0].title} | Wendy Ham's Weekend Projects`)&&d(H,"content",T),f&4&&d(v,"content",r[2])},d(r){r&&(c(s),c(e),c(i),c(u),c(m),c(o),c(p),c(W),c(a),c(P),c(l),c(H),c(g),c(v),c(b),c(C))}}}function Et(n){let t,s,e,i,u=Ze(n[0].date)+"",m,o,y,p,W,a,P,l,H,T=n[0].title+"",g,v,b,C=n[0].description+"",r,f,B,j,F,L,M,N,x=n[9]()+"",ne,le,de=n[9]()===1?"like":"likes",ue,I,D,Q=n[10]()+"",z,$,me=n[10]()===1?"share":"shares",ve,be,ee,Ve=n[11]()+"",Ee,we,je=n[11]()===1?"view":"views",Pe,pe,Z;const Te=n[19]["before-essay"],Y=Ie(Te,n,n[18],Ye);p=new Oe({props:{type:"like",active:n[6],count:void 0}}),p.$on("click",n[12]),a=new Oe({props:{type:"share",active:!1,count:void 0}}),a.$on("click",n[13]);let q=n[7]&&Qe(n);const Ne=[It,Ct],te=[];function Fe(_,V){return _[3]?0:1}j=Fe(n),F=te[j]=Ne[j](n);const Ce=n[19]["after-essay"],X=Ie(Ce,n,n[18],Ke);return{c(){Y&&Y.c(),t=A(),s=E("div"),e=E("div"),i=E("p"),m=O(u),o=A(),y=E("div"),Se(p.$$.fragment),W=A(),Se(a.$$.fragment),P=A(),q&&q.c(),l=A(),H=E("h2"),g=O(T),v=A(),b=E("p"),r=O(C),f=A(),B=E("div"),F.c(),L=A(),M=E("div"),N=E("span"),ne=O(x),le=A(),ue=O(de),I=A(),D=E("span"),z=O(Q),$=A(),ve=O(me),be=A(),ee=E("span"),Ee=O(Ve),we=A(),Pe=O(je),pe=A(),X&&X.c(),this.h()},l(_){Y&&Y.l(_),t=S(_),s=w(_,"DIV",{class:!0});var V=R(s);e=w(V,"DIV",{class:!0});var se=R(e);i=w(se,"P",{class:!0});var ie=R(i);m=K(ie,u),ie.forEach(c),o=S(se),y=w(se,"DIV",{class:!0});var oe=R(y);De(p.$$.fragment,oe),W=S(oe),De(a.$$.fragment,oe),P=S(oe),q&&q.l(oe),oe.forEach(c),se.forEach(c),l=S(V),H=w(V,"H2",{class:!0});var qe=R(H);g=K(qe,T),qe.forEach(c),v=S(V),b=w(V,"P",{class:!0});var Re=R(b);r=K(Re,C),Re.forEach(c),f=S(V),B=w(V,"DIV",{class:!0});var ze=R(B);F.l(ze),ze.forEach(c),V.forEach(c),L=S(_),M=w(_,"DIV",{class:!0});var ae=R(M);N=w(ae,"SPAN",{class:!0});var _e=R(N);ne=K(_e,x),le=S(_e),ue=K(_e,de),_e.forEach(c),I=S(ae),D=w(ae,"SPAN",{class:!0});var he=R(D);z=K(he,Q),$=S(he),ve=K(he,me),he.forEach(c),be=S(ae),ee=w(ae,"SPAN",{class:!0});var ye=R(ee);Ee=K(ye,Ve),we=S(ye),Pe=K(ye,je),ye.forEach(c),ae.forEach(c),pe=S(_),X&&X.l(_),this.h()},h(){d(i,"class","essay-date svelte-15h8k01"),d(y,"class","essay-buttons svelte-15h8k01"),d(e,"class","essay-header-row svelte-15h8k01"),d(H,"class","essay-title svelte-15h8k01"),d(b,"class","essay-description svelte-15h8k01"),d(B,"class","content svelte-15h8k01"),d(s,"class","essay-container svelte-15h8k01"),d(N,"class","essay-stat"),d(D,"class","essay-stat"),d(ee,"class","essay-stat"),d(M,"class","essay-stats svelte-15h8k01")},m(_,V){Y&&Y.m(_,V),h(_,t,V),h(_,s,V),k(s,e),k(e,i),k(i,m),k(e,o),k(e,y),He(p,y,null),k(y,W),He(a,y,null),k(y,P),q&&q.m(y,null),k(s,l),k(s,H),k(H,g),k(s,v),k(s,b),k(b,r),k(s,f),k(s,B),te[j].m(B,null),h(_,L,V),h(_,M,V),k(M,N),k(N,ne),k(N,le),k(N,ue),k(M,I),k(M,D),k(D,z),k(D,$),k(D,ve),k(M,be),k(M,ee),k(ee,Ee),k(ee,we),k(ee,Pe),h(_,pe,V),X&&X.m(_,V),Z=!0},p(_,V){Y&&Y.p&&(!Z||V&262144)&&We(Y,Te,_,_[18],Z?Ae(Te,_[18],V,bt):Le(_[18]),Ye),(!Z||V&1)&&u!==(u=Ze(_[0].date)+"")&&fe(m,u);const se={};V&64&&(se.active=_[6]),p.$set(se),_[7]?q?(q.p(_,V),V&128&&U(q,1)):(q=Qe(_),q.c(),U(q,1),q.m(y,null)):q&&(ge(),G(q,1,1,()=>{q=null}),ke()),(!Z||V&1)&&T!==(T=_[0].title+"")&&fe(g,T),(!Z||V&1)&&C!==(C=_[0].description+"")&&fe(r,C);let ie=j;j=Fe(_),j===ie?te[j].p(_,V):(ge(),G(te[ie],1,1,()=>{te[ie]=null}),ke(),F=te[j],F?F.p(_,V):(F=te[j]=Ne[j](_),F.c()),U(F,1),F.m(B,null)),X&&X.p&&(!Z||V&262144)&&We(X,Ce,_,_[18],Z?Ae(Ce,_[18],V,kt):Le(_[18]),Ke)},i(_){Z||(U(Y,_),U(p.$$.fragment,_),U(a.$$.fragment,_),U(q),U(F),U(X,_),Z=!0)},o(_){G(Y,_),G(p.$$.fragment,_),G(a.$$.fragment,_),G(q),G(F),G(X,_),Z=!1},d(_){_&&(c(t),c(s),c(L),c(M),c(pe)),Y&&Y.d(_),Me(p),Me(a),q&&q.d(),te[j].d(),X&&X.d(_)}}}function wt(n){let t,s="Essay not found";return{c(){t=E("div"),t.textContent=s,this.h()},l(e){t=w(e,"DIV",{class:!0,"data-svelte-h":!0}),re(t)!=="svelte-976hnr"&&(t.textContent=s),this.h()},h(){d(t,"class","error svelte-15h8k01")},m(e,i){h(e,t,i)},p:J,i:J,o:J,d(e){e&&c(t)}}}function Pt(n){let t,s;return{c(){t=E("div"),s=O(n[5]),this.h()},l(e){t=w(e,"DIV",{class:!0});var i=R(t);s=K(i,n[5]),i.forEach(c),this.h()},h(){d(t,"class","error svelte-15h8k01")},m(e,i){h(e,t,i),k(t,s)},p(e,i){i&32&&fe(s,e[5])},i:J,o:J,d(e){e&&c(t)}}}function Tt(n){let t,s="Loading essay...";return{c(){t=E("div"),t.textContent=s,this.h()},l(e){t=w(e,"DIV",{class:!0,"data-svelte-h":!0}),re(t)!=="svelte-1hhis7s"&&(t.textContent=s),this.h()},h(){d(t,"class","loading svelte-15h8k01")},m(e,i){h(e,t,i)},p:J,i:J,o:J,d(e){e&&c(t)}}}function Qe(n){let t,s,e,i;return{c(){t=E("div"),s=O(n[7]),this.h()},l(u){t=w(u,"DIV",{class:!0});var m=R(t);s=K(m,n[7]),m.forEach(c),this.h()},h(){d(t,"class","copy-feedback svelte-15h8k01")},m(u,m){h(u,t,m),k(t,s),i=!0},p(u,m){(!i||m&128)&&fe(s,u[7])},i(u){i||(u&&at(()=>{i&&(e||(e=Ue(t,Be,{duration:150},!0)),e.run(1))}),i=!0)},o(u){u&&(e||(e=Ue(t,Be,{duration:150},!1)),e.run(0)),i=!1},d(u){u&&c(t),u&&e&&e.end()}}}function Ct(n){let t;const s=n[19]["content-actions"],e=Ie(s,n,n[18],Ge);return{c(){e&&e.c()},l(i){e&&e.l(i)},m(i,u){e&&e.m(i,u),t=!0},p(i,u){e&&e.p&&(!t||u&262144)&&We(e,s,i,i[18],t?Ae(s,i[18],u,vt):Le(i[18]),Ge)},i(i){t||(U(e,i),t=!0)},o(i){G(e,i),t=!1},d(i){e&&e.d(i)}}}function It(n){let t,s;return{c(){t=new ct(!1),s=ce(),this.h()},l(e){t=ut(e,!1),s=ce(),this.h()},h(){t.a=s},m(e,i){t.m(n[3],e,i),h(e,s,i)},p(e,i){i&8&&t.p(e[3])},i:J,o:J,d(e){e&&(c(s),t.d())}}}function Wt(n){let t,s,e,i,u,m,o=n[0]&&n[8]&&Xe(n);const y=[Tt,Pt,wt,Et],p=[];function W(a,P){return a[4]?0:a[5]?1:a[0]?3:2}return i=W(n),u=p[i]=y[i](n),{c(){o&&o.c(),t=ce(),s=A(),e=E("article"),u.c(),this.h()},l(a){const P=et("svelte-gxo76b",document.head);o&&o.l(P),t=ce(),P.forEach(c),s=S(a),e=w(a,"ARTICLE",{class:!0});var l=R(e);u.l(l),l.forEach(c),this.h()},h(){d(e,"class","svelte-15h8k01")},m(a,P){o&&o.m(document.head,null),k(document.head,t),h(a,s,P),h(a,e,P),p[i].m(e,null),m=!0},p(a,[P]){a[0]&&a[8]?o?o.p(a,P):(o=Xe(a),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null);let l=i;i=W(a),i===l?p[i].p(a,P):(ge(),G(p[l],1,1,()=>{p[l]=null}),ke(),u=p[i],u?u.p(a,P):(u=p[i]=y[i](a),u.c()),U(u,1),u.m(e,null))},i(a){m||(U(u),m=!0)},o(a){G(u),m=!1},d(a){a&&(c(s),c(e)),o&&o.d(a),c(t),p[i].d()}}}function Ze(n){if(!n)return"";try{return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(t){return console.error("Error formatting date:",t),n}}function Lt(n,t,s){let e,i,u,m;tt(n,lt,I=>s(26,m=I));let{$$slots:o={},$$scope:y}=t;const p=ot();let{slug:W=""}=t,{preloadedEssay:a=null}=t,{serverError:P=null}=t,l=a,H=(a==null?void 0:a.content)||null,T=!a,g=P,v={likes:{},shares:{},views:{}},b=!1,C="",r=null,f=0,B=0,j=0,F=!1,L=!1;function M(){return F?f:(l==null?void 0:l.like_count)||0}function N(){return F?B:(l==null?void 0:l.share_count)||0}function x(){return F?j:(l==null?void 0:l.view_count)||0}async function ne(I){if(a){console.log("Using preloaded essay data, skipping client-side fetch");return}if(I)try{s(4,T=!0),s(5,g=null),console.log(`Loading essay with slug: ${I}`);const{data:D,error:Q}=await ft.from("essays").select(`
          id, title, description, date, published, excerpt, slug,
          like_count, share_count, view_count, content
        `).eq("slug",I).single();if(Q)throw console.error(`Error fetching essay: ${Q.message}`),new Error(`Failed to load essay: ${Q.message}`);if(!D)throw new Error(`No essay found with slug: ${I}`);if(D.published===!1)throw new Error("This essay is not yet published");console.log(`Essay loaded: ${D.title}`),s(0,l=D),s(3,H=D.content),s(17,L=!1),await le()}catch(D){console.error("Error loading essay:",D),s(5,g=D instanceof Error?D.message:"Failed to load essay"),p("error",D)}finally{s(4,T=!1)}}async function le(){try{console.log("Initializing interactions on Essay component");const I=await pt();if(console.log("Interactions initialized on Essay with device ID:",I),!I){console.error("Failed to initialize interactions on Essay - no device ID returned"),p("error",new Error("Failed to initialize interactions"));return}if(l&&l.id){const D=_t(l.id);console.log(`Essay ${l.id} already liked:`,D),s(6,b=D);try{await ht(l.id),console.log(`View recorded for essay ${l.id}`)}catch(Q){console.error(`Error recording view for essay ${l.id}:`,Q)}}}catch(I){console.error("Error during Essay interaction initialization:",I),p("error",I)}}async function de(){if(l!=null&&l.id)try{console.log(`Like button clicked for essay ${l.id}`);const I=b,D=M();f=Math.max(0,D+(I?-1:1)),s(6,b=!I);const z=await yt(l.id);if(console.log(`New like status after toggle: ${z}`),z!==b){console.log("Correcting optimistic like status due to mismatch"),s(6,b=z);const $=z?1:-1;f=Math.max(0,M()+$)}}catch(I){console.error(`Error toggling like for essay ${l.id}:`,I),s(6,b=!b);const D=b?1:-1;f=Math.max(0,M()-D),p("error",I)}}async function ue(){if(!(l!=null&&l.id))return;console.log(`Share button clicked for essay ${l.id}`);const I=typeof window<"u"?window.location.href:`https://xnham.com/writing/${l.slug}`;try{navigator.share?(await navigator.share({title:l.title,text:l.description||l.excerpt||"Check out this essay",url:I}),console.log("Successfully shared via Web Share API"),s(7,C="Shared!")):(await navigator.clipboard.writeText(I),console.log("URL copied to clipboard"),s(7,C="Link copied!")),B=N()+1,await gt(l.id),r&&clearTimeout(r),r=setTimeout(()=>{s(7,C="")},2e3)}catch(D){console.error("Error sharing essay:",D),s(7,C="Error sharing"),r&&clearTimeout(r),r=setTimeout(()=>{s(7,C="")},2e3),p("error",D)}}return st(()=>{var Q;let I=()=>{},D=null;try{const z=W||((Q=m==null?void 0:m.params)==null?void 0:Q.slug);return console.log(`Essay component mounted with slug: ${z}`),z&&!a&&(!l||l.slug!==z)?ne(z):a&&le(),D=setTimeout(async()=>{try{I=dt($=>{if(v=$,l!=null&&l.id){const me=`${mt.ESSAY}:${l.id}`;s(6,b=(v==null?void 0:v.likes[me])||!1)}})}catch($){console.error("Error in delayed initialization:",$),p("error",$)}},300),()=>{I&&I(),D&&clearTimeout(D),r&&clearTimeout(r)}}catch(z){console.error("Error in Essay onMount:",z),p("error",z)}}),n.$$set=I=>{"slug"in I&&s(14,W=I.slug),"preloadedEssay"in I&&s(15,a=I.preloadedEssay),"serverError"in I&&s(16,P=I.serverError),"$$scope"in I&&s(18,y=I.$$scope)},n.$$.update=()=>{n.$$.dirty&131073&&l&&!L&&(f=l.like_count||0,B=l.share_count||0,j=(l.view_count||0)+1,F=!0,s(17,L=!0)),n.$$.dirty&49153&&W&&!a&&(!(l!=null&&l.slug)||l.slug!==W)&&(console.log(`Slug changed to ${W}, loading essay data`),ne(W)),n.$$.dirty&1&&s(1,e=typeof window<"u"?window.location.href:l!=null&&l.slug?`https://xnham.com/writing/${l.slug}`:""),n.$$.dirty&1&&s(2,i=l!=null&&l.description&&(l!=null&&l.excerpt)?`${l.description} ${l.excerpt}`:(l==null?void 0:l.description)||(l==null?void 0:l.excerpt)||""),n.$$.dirty&7&&s(8,u=l?{"@context":"https://schema.org","@type":"Article",headline:l.title,description:i,datePublished:l.date,author:{"@type":"Person",name:"Wendy Ham",url:"https://xnham.com"},publisher:{"@type":"Person",name:"Wendy Ham",url:"https://xnham.com"},mainEntityOfPage:{"@type":"WebPage","@id":e}}:null)},[l,e,i,H,T,g,b,C,u,M,N,x,de,ue,W,a,P,L,y,o]}class At extends rt{constructor(t){super(),nt(this,t,Lt,Wt,xe,{slug:14,preloadedEssay:15,serverError:16})}}function St(n){return{c(){this.h()},l(t){this.h()},h(){document.title="Essay Not Found | Wendy Ham's Weekend Projects"},m:J,p:J,d:J}}function Dt(n){let t,s,e,i,u,m,o,y,p,W,a,P,l,H,T,g,v,b;document.title=t=n[0].essay.title+" | Wendy Ham's Weekend Projects";let C=n[8]&&$e();return{c(){s=A(),e=E("meta"),i=A(),u=E("link"),o=A(),C&&C.c(),y=A(),p=E("meta"),W=A(),a=E("meta"),P=A(),l=E("meta"),T=A(),g=E("meta"),v=A(),b=E("meta"),this.h()},l(r){s=S(r),e=w(r,"META",{name:!0,content:!0}),i=S(r),u=w(r,"LINK",{rel:!0,href:!0}),o=S(r),C&&C.l(r),y=S(r),p=w(r,"META",{property:!0,content:!0}),W=S(r),a=w(r,"META",{property:!0,content:!0}),P=S(r),l=w(r,"META",{property:!0,content:!0}),T=S(r),g=w(r,"META",{property:!0,content:!0}),v=S(r),b=w(r,"META",{property:!0,content:!0}),this.h()},h(){d(e,"name","description"),d(e,"content",n[1]),d(u,"rel","canonical"),d(u,"href",m=`https://xnham.com/writing/${n[3].params.slug}`),d(p,"property","og:type"),d(p,"content","article"),d(a,"property","og:url"),d(a,"content",n[2]),d(l,"property","og:title"),d(l,"content",H=`${n[0].essay.title} | Wendy Ham's Weekend Projects`),d(g,"property","og:description"),d(g,"content",n[1]),d(b,"property","og:image"),d(b,"content","https://xnham.com/images/og-image.png")},m(r,f){h(r,s,f),h(r,e,f),h(r,i,f),h(r,u,f),h(r,o,f),C&&C.m(r,f),h(r,y,f),h(r,p,f),h(r,W,f),h(r,a,f),h(r,P,f),h(r,l,f),h(r,T,f),h(r,g,f),h(r,v,f),h(r,b,f)},p(r,f){f&1&&t!==(t=r[0].essay.title+" | Wendy Ham's Weekend Projects")&&(document.title=t),f&2&&d(e,"content",r[1]),f&8&&m!==(m=`https://xnham.com/writing/${r[3].params.slug}`)&&d(u,"href",m),r[8]?C||(C=$e(),C.c(),C.m(y.parentNode,y)):C&&(C.d(1),C=null),f&4&&d(a,"content",r[2]),f&1&&H!==(H=`${r[0].essay.title} | Wendy Ham's Weekend Projects`)&&d(l,"content",H),f&2&&d(g,"content",r[1])},d(r){r&&(c(s),c(e),c(i),c(u),c(o),c(y),c(p),c(W),c(a),c(P),c(l),c(T),c(g),c(v),c(b)),C&&C.d(r)}}}function $e(n){let t,s="{JSON.stringify(articleJsonLd)}";return{c(){t=E("script"),t.textContent=s,this.h()},l(e){t=w(e,"SCRIPT",{type:!0,"data-svelte-h":!0}),re(t)!=="svelte-1yce5l5"&&(t.textContent=s),this.h()},h(){d(t,"type","application/ld+json")},m(e,i){h(e,t,i)},d(e){e&&c(t)}}}function Ht(n){let t,s;return t=new At({props:{slug:n[3].params.slug,preloadedEssay:n[0].essay}}),t.$on("error",n[9]),{c(){Se(t.$$.fragment)},l(e){De(t.$$.fragment,e)},m(e,i){He(t,e,i),s=!0},p(e,i){const u={};i&8&&(u.slug=e[3].params.slug),i&1&&(u.preloadedEssay=e[0].essay),t.$set(u)},i(e){s||(U(t.$$.fragment,e),s=!0)},o(e){G(t.$$.fragment,e),s=!1},d(e){Me(t,e)}}}function Mt(n){let t,s,e;function i(o,y){return o[5]>=it?jt:Vt}let u=i(n),m=u(n);return{c(){t=E("div"),s=E("p"),e=O(`There was an error loading the essay. 
        `),m.c(),this.h()},l(o){t=w(o,"DIV",{class:!0});var y=R(t);s=w(y,"P",{});var p=R(s);e=K(p,`There was an error loading the essay. 
        `),m.l(p),p.forEach(c),y.forEach(c),this.h()},h(){d(t,"class","error-message svelte-18qhdlm")},m(o,y){h(o,t,y),k(t,s),k(s,e),m.m(s,null)},p(o,y){u!==(u=i(o))&&(m.d(1),m=u(o),m&&(m.c(),m.m(s,null)))},i:J,o:J,d(o){o&&c(t),m.d()}}}function Vt(n){let t;return{c(){t=O("Retrying...")},l(s){t=K(s,"Retrying...")},m(s,e){h(s,t,e)},d(s){s&&c(t)}}}function jt(n){let t;return{c(){t=O("Please try refreshing the page.")},l(s){t=K(s,"Please try refreshing the page.")},m(s,e){h(s,t,e)},d(s){s&&c(t)}}}function Nt(n){let t,s,e,i,u=`&lt; 
    <a href="/writing"><span class="link-text svelte-18qhdlm">Back to essays</span></a>`,m,o,y,p="<",W,a,P="Back",l,H,T,g,v,b;function C(L,M){return L[0].essay?Dt:St}let r=C(n),f=r(n);const B=[Mt,Ht],j=[];function F(L,M){return L[4]?0:1}return g=F(n),v=j[g]=B[g](n),{c(){f.c(),t=ce(),s=A(),e=E("div"),i=E("div"),i.innerHTML=u,m=A(),o=E("a"),y=E("span"),y.textContent=p,W=A(),a=E("span"),a.textContent=P,T=A(),v.c(),this.h()},l(L){const M=et("svelte-akv0tl",document.head);f.l(M),t=ce(),M.forEach(c),s=S(L),e=w(L,"DIV",{class:!0});var N=R(e);i=w(N,"DIV",{class:!0,"data-svelte-h":!0}),re(i)!=="svelte-r7biw2"&&(i.innerHTML=u),m=S(N),o=w(N,"A",{href:!0,class:!0,"aria-hidden":!0});var x=R(o);y=w(x,"SPAN",{class:!0,"data-svelte-h":!0}),re(y)!=="svelte-19se4d7"&&(y.textContent=p),W=S(x),a=w(x,"SPAN",{class:!0,"data-svelte-h":!0}),re(a)!=="svelte-1v4nvf1"&&(a.textContent=P),x.forEach(c),T=S(N),v.l(N),N.forEach(c),this.h()},h(){d(i,"class","back-button svelte-18qhdlm"),d(y,"class","arrow svelte-18qhdlm"),d(a,"class","floating-link-text"),d(o,"href","/writing"),d(o,"class",l="floating-back-button "+(n[7]?"visible":"hidden")+" "+(n[6]?"":"instant-hide")+" svelte-18qhdlm"),d(o,"aria-hidden",H=!n[7]),d(e,"class","container")},m(L,M){f.m(document.head,null),k(document.head,t),h(L,s,M),h(L,e,M),k(e,i),k(e,m),k(e,o),k(o,y),k(o,W),k(o,a),k(e,T),j[g].m(e,null),b=!0},p(L,[M]){r===(r=C(L))&&f?f.p(L,M):(f.d(1),f=r(L),f&&(f.c(),f.m(t.parentNode,t))),(!b||M&192&&l!==(l="floating-back-button "+(L[7]?"visible":"hidden")+" "+(L[6]?"":"instant-hide")+" svelte-18qhdlm"))&&d(o,"class",l),(!b||M&128&&H!==(H=!L[7]))&&d(o,"aria-hidden",H);let N=g;g=F(L),g===N?j[g].p(L,M):(ge(),G(j[N],1,1,()=>{j[N]=null}),ke(),v=j[g],v?v.p(L,M):(v=j[g]=B[g](L),v.c()),U(v,1),v.m(e,null))},i(L){b||(U(v),b=!0)},o(L){G(v),b=!1},d(L){L&&(c(s),c(e)),f.d(L),c(t),j[g].d()}}}const it=2;function Ft(n,t,s){let e,i,u,m;tt(n,lt,T=>s(3,m=T));let{data:o}=t,y=!1,p=0,W=!1,a=!1,P=!1;function l(T){console.error("Error in Essay component:",T.detail),s(4,y=!0),p<it&&(s(5,p++,p),setTimeout(()=>{console.log(`Retry attempt ${p} for Essay component`),s(4,y=!1)},1e3))}function H(){typeof window>"u"||P||(P=!0,requestAnimationFrame(()=>{const T=window.scrollY;s(6,W=T>300),W&&!a?s(7,a=!0):!W&&a&&s(7,a=!1),P=!1}))}return st(()=>{o.essay?Je.set({title:`${o.essay.title} | Wendy Ham's Weekend Projects`,description:e,canonicalUrl:`https://xnham.com/writing/${m.params.slug}`,type:"article",url:typeof window<"u"?window.location.href:`https://xnham.com/writing/${m.params.slug}`}):Je.set({title:"Essay | Wendy Ham's Weekend Projects",description:"Essays about design, coding, and more.",canonicalUrl:`https://xnham.com/writing/${m.params.slug}`,type:"article",url:typeof window<"u"?window.location.href:`https://xnham.com/writing/${m.params.slug}`}),window.addEventListener("scroll",H);const T=g=>{console.error("Global error caught in essay page:",g.error||g.message);const v=String(g.error||g.message);(v.includes("Essay")||v.includes("essay")||v.includes("interaction"))&&(s(4,y=!0),g.preventDefault())};return window.addEventListener("error",T),()=>{window.removeEventListener("scroll",H),window.removeEventListener("error",T)}}),n.$$set=T=>{"data"in T&&s(0,o=T.data)},n.$$.update=()=>{var T,g,v,b;n.$$.dirty&1&&s(1,e=(T=o==null?void 0:o.essay)!=null&&T.description&&((g=o==null?void 0:o.essay)!=null&&g.excerpt)?`${o.essay.description} ${o.essay.excerpt}`:((v=o==null?void 0:o.essay)==null?void 0:v.description)||((b=o==null?void 0:o.essay)==null?void 0:b.excerpt)||""),n.$$.dirty&8&&s(2,i=typeof window<"u"?window.location.href:`https://xnham.com/writing/${m.params.slug}`),n.$$.dirty&7&&s(8,u=o!=null&&o.essay?{"@context":"https://schema.org","@type":"Article",headline:o.essay.title,description:e,datePublished:o.essay.date,image:"https://xnham.com/images/og-image.png",author:{"@type":"Person",name:"Wendy Ham",url:"https://xnham.com"},publisher:{"@type":"Person",name:"Wendy Ham",url:"https://xnham.com"},mainEntityOfPage:{"@type":"WebPage","@id":i}}:null)},[o,e,i,m,y,p,W,a,u,l]}class Gt extends rt{constructor(t){super(),nt(this,t,Ft,Nt,xe,{data:0})}}export{Gt as component};
