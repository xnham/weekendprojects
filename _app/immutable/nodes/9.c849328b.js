import{s as Qe,e as fe,a as W,f as T,G as Ze,d as u,c as D,g as I,h as R,j as p,w as g,i as b,A as $e,S as rt,o as xe,r as ae,F as Ie,l as B,m as q,H as Le,I as Se,J as We,n as ee,y as Y,C as ot,K as it,L as lt}from"../chunks/scheduler.6e697b3e.js";import{S as et,i as tt,g as ke,t as Q,c as ve,a as G,b as De,d as Ae,m as He,e as je,f as Re}from"../chunks/index.4c318b21.js";import{g as at}from"../chunks/globals.7f7f1b26.js";import{p as st}from"../chunks/stores.2510dc6f.js";import{m as Ue}from"../chunks/metadataStore.a46319de.js";import{f as Je}from"../chunks/index.cc33f051.js";import{s as ct}from"../chunks/supabase.8f09c013.js";import{I as Be}from"../chunks/InteractionButton.7313e59b.js";import{s as ft,C as ut,i as dt,a as mt,b as pt,t as _t,r as ht}from"../chunks/essayInteractionService.859a6e22.js";const yt=n=>({}),qe=n=>({}),gt=n=>({}),Oe=n=>({}),wt=n=>({}),Ke=n=>({});function Ge(n){let s,e,t,r,a,m,o,_="{JSON.stringify(articleJsonLd)}";return document.title=s=n[0].title+" | Wendy Ham's Weekend Projects",{c(){e=W(),t=T("meta"),r=W(),a=T("link"),m=W(),o=T("script"),o.textContent=_,this.h()},l(c){e=D(c),t=I(c,"META",{name:!0,content:!0}),r=D(c),a=I(c,"LINK",{rel:!0,href:!0}),m=D(c),o=I(c,"SCRIPT",{type:!0,"data-svelte-h":!0}),ae(o)!=="svelte-1yj4vgp"&&(o.textContent=_),this.h()},h(){p(t,"name","description"),p(t,"content",n[5]),p(a,"rel","canonical"),p(a,"href",n[4]),p(o,"type","application/ld+json")},m(c,h){b(c,e,h),b(c,t,h),b(c,r,h),b(c,a,h),b(c,m,h),b(c,o,h)},p(c,h){h&1&&s!==(s=c[0].title+" | Wendy Ham's Weekend Projects")&&(document.title=s),h&32&&p(t,"content",c[5]),h&16&&p(a,"href",c[4])},d(c){c&&(u(e),u(t),u(r),u(a),u(m),u(o))}}}function kt(n){let s,e,t,r,a=Xe(n[0].date)+"",m,o,_,c,h,f,P,i,V,A=n[0].title+"",y,w,l,k=n[0].description+"",z,H,O,j,N,C,S,M,x,v,L=n[1]===1?"like":"likes",K,J,X,re,be,ue=n[2]===1?"share":"shares",me,Ee,te,pe,Pe,de=n[3]===1?"view":"views",_e,he,U;const Ce=n[19]["before-essay"],Z=Ie(Ce,n,n[18],Ke);c=new Be({props:{type:"like",active:n[9],count:void 0}}),c.$on("click",n[12]),f=new Be({props:{type:"share",active:!1,count:void 0}}),f.$on("click",n[13]);let F=n[10]&&Ye(n);const Ve=[Ct,Pt],se=[];function Me(d,E){return d[6]?0:1}j=Me(n),N=se[j]=Ve[j](n);const Te=n[19]["after-essay"],$=Ie(Te,n,n[18],qe);return{c(){Z&&Z.c(),s=W(),e=T("div"),t=T("div"),r=T("p"),m=B(a),o=W(),_=T("div"),De(c.$$.fragment),h=W(),De(f.$$.fragment),P=W(),F&&F.c(),i=W(),V=T("h2"),y=B(A),w=W(),l=T("p"),z=B(k),H=W(),O=T("div"),N.c(),C=W(),S=T("div"),M=T("span"),x=B(n[1]),v=W(),K=B(L),J=B(`
      路
      `),X=T("span"),re=B(n[2]),be=W(),me=B(ue),Ee=B(`
      路
      `),te=T("span"),pe=B(n[3]),Pe=W(),_e=B(de),he=W(),$&&$.c(),this.h()},l(d){Z&&Z.l(d),s=D(d),e=I(d,"DIV",{class:!0});var E=R(e);t=I(E,"DIV",{class:!0});var ne=R(t);r=I(ne,"P",{class:!0});var oe=R(r);m=q(oe,a),oe.forEach(u),o=D(ne),_=I(ne,"DIV",{class:!0});var ie=R(_);Ae(c.$$.fragment,ie),h=D(ie),Ae(f.$$.fragment,ie),P=D(ie),F&&F.l(ie),ie.forEach(u),ne.forEach(u),i=D(E),V=I(E,"H2",{class:!0});var Ne=R(V);y=q(Ne,A),Ne.forEach(u),w=D(E),l=I(E,"P",{class:!0});var Fe=R(l);z=q(Fe,k),Fe.forEach(u),H=D(E),O=I(E,"DIV",{class:!0});var ze=R(O);N.l(ze),ze.forEach(u),E.forEach(u),C=D(d),S=I(d,"DIV",{class:!0});var le=R(S);M=I(le,"SPAN",{class:!0});var ye=R(M);x=q(ye,n[1]),v=D(ye),K=q(ye,L),ye.forEach(u),J=q(le,`
      路
      `),X=I(le,"SPAN",{class:!0});var ge=R(X);re=q(ge,n[2]),be=D(ge),me=q(ge,ue),ge.forEach(u),Ee=q(le,`
      路
      `),te=I(le,"SPAN",{class:!0});var we=R(te);pe=q(we,n[3]),Pe=D(we),_e=q(we,de),we.forEach(u),le.forEach(u),he=D(d),$&&$.l(d),this.h()},h(){p(r,"class","essay-date svelte-wsfnci"),p(_,"class","essay-buttons svelte-wsfnci"),p(t,"class","essay-header-row svelte-wsfnci"),p(V,"class","essay-title svelte-wsfnci"),p(l,"class","essay-description svelte-wsfnci"),p(O,"class","content svelte-wsfnci"),p(e,"class","essay-container svelte-wsfnci"),p(M,"class","essay-stat"),p(X,"class","essay-stat"),p(te,"class","essay-stat"),p(S,"class","essay-stats svelte-wsfnci")},m(d,E){Z&&Z.m(d,E),b(d,s,E),b(d,e,E),g(e,t),g(t,r),g(r,m),g(t,o),g(t,_),He(c,_,null),g(_,h),He(f,_,null),g(_,P),F&&F.m(_,null),g(e,i),g(e,V),g(V,y),g(e,w),g(e,l),g(l,z),g(e,H),g(e,O),se[j].m(O,null),b(d,C,E),b(d,S,E),g(S,M),g(M,x),g(M,v),g(M,K),g(S,J),g(S,X),g(X,re),g(X,be),g(X,me),g(S,Ee),g(S,te),g(te,pe),g(te,Pe),g(te,_e),b(d,he,E),$&&$.m(d,E),U=!0},p(d,E){Z&&Z.p&&(!U||E&262144)&&Le(Z,Ce,d,d[18],U?We(Ce,d[18],E,wt):Se(d[18]),Ke),(!U||E&1)&&a!==(a=Xe(d[0].date)+"")&&ee(m,a);const ne={};E&512&&(ne.active=d[9]),c.$set(ne),d[10]?F?(F.p(d,E),E&1024&&G(F,1)):(F=Ye(d),F.c(),G(F,1),F.m(_,null)):F&&(ke(),Q(F,1,1,()=>{F=null}),ve()),(!U||E&1)&&A!==(A=d[0].title+"")&&ee(y,A),(!U||E&1)&&k!==(k=d[0].description+"")&&ee(z,k);let oe=j;j=Me(d),j===oe?se[j].p(d,E):(ke(),Q(se[oe],1,1,()=>{se[oe]=null}),ve(),N=se[j],N?N.p(d,E):(N=se[j]=Ve[j](d),N.c()),G(N,1),N.m(O,null)),(!U||E&2)&&ee(x,d[1]),(!U||E&2)&&L!==(L=d[1]===1?"like":"likes")&&ee(K,L),(!U||E&4)&&ee(re,d[2]),(!U||E&4)&&ue!==(ue=d[2]===1?"share":"shares")&&ee(me,ue),(!U||E&8)&&ee(pe,d[3]),(!U||E&8)&&de!==(de=d[3]===1?"view":"views")&&ee(_e,de),$&&$.p&&(!U||E&262144)&&Le($,Te,d,d[18],U?We(Te,d[18],E,yt):Se(d[18]),qe)},i(d){U||(G(Z,d),G(c.$$.fragment,d),G(f.$$.fragment,d),G(F),G(N),G($,d),U=!0)},o(d){Q(Z,d),Q(c.$$.fragment,d),Q(f.$$.fragment,d),Q(F),Q(N),Q($,d),U=!1},d(d){d&&(u(s),u(e),u(C),u(S),u(he)),Z&&Z.d(d),je(c),je(f),F&&F.d(),se[j].d(),$&&$.d(d)}}}function vt(n){let s,e="Essay not found";return{c(){s=T("div"),s.textContent=e,this.h()},l(t){s=I(t,"DIV",{class:!0,"data-svelte-h":!0}),ae(s)!=="svelte-976hnr"&&(s.textContent=e),this.h()},h(){p(s,"class","error svelte-wsfnci")},m(t,r){b(t,s,r)},p:Y,i:Y,o:Y,d(t){t&&u(s)}}}function bt(n){let s,e;return{c(){s=T("div"),e=B(n[8]),this.h()},l(t){s=I(t,"DIV",{class:!0});var r=R(s);e=q(r,n[8]),r.forEach(u),this.h()},h(){p(s,"class","error svelte-wsfnci")},m(t,r){b(t,s,r),g(s,e)},p(t,r){r&256&&ee(e,t[8])},i:Y,o:Y,d(t){t&&u(s)}}}function Et(n){let s,e="Loading essay...";return{c(){s=T("div"),s.textContent=e,this.h()},l(t){s=I(t,"DIV",{class:!0,"data-svelte-h":!0}),ae(s)!=="svelte-1hhis7s"&&(s.textContent=e),this.h()},h(){p(s,"class","loading svelte-wsfnci")},m(t,r){b(t,s,r)},p:Y,i:Y,o:Y,d(t){t&&u(s)}}}function Ye(n){let s,e,t,r;return{c(){s=T("div"),e=B(n[10]),this.h()},l(a){s=I(a,"DIV",{class:!0});var m=R(s);e=q(m,n[10]),m.forEach(u),this.h()},h(){p(s,"class","copy-feedback svelte-wsfnci")},m(a,m){b(a,s,m),g(s,e),r=!0},p(a,m){(!r||m&1024)&&ee(e,a[10])},i(a){r||(a&&ot(()=>{r&&(t||(t=Re(s,Je,{duration:150},!0)),t.run(1))}),r=!0)},o(a){a&&(t||(t=Re(s,Je,{duration:150},!1)),t.run(0)),r=!1},d(a){a&&u(s),a&&t&&t.end()}}}function Pt(n){let s;const e=n[19]["content-actions"],t=Ie(e,n,n[18],Oe);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,a){t&&t.m(r,a),s=!0},p(r,a){t&&t.p&&(!s||a&262144)&&Le(t,e,r,r[18],s?We(e,r[18],a,gt):Se(r[18]),Oe)},i(r){s||(G(t,r),s=!0)},o(r){Q(t,r),s=!1},d(r){t&&t.d(r)}}}function Ct(n){let s,e;return{c(){s=new it(!1),e=fe(),this.h()},l(t){s=lt(t,!1),e=fe(),this.h()},h(){s.a=e},m(t,r){s.m(n[6],t,r),b(t,e,r)},p(t,r){r&64&&s.p(t[6])},i:Y,o:Y,d(t){t&&(u(e),s.d())}}}function Tt(n){let s,e,t,r,a,m,o=n[0]&&n[11]&&Ge(n);const _=[Et,bt,vt,kt],c=[];function h(f,P){return f[7]?0:f[8]?1:f[0]?3:2}return r=h(n),a=c[r]=_[r](n),{c(){o&&o.c(),s=fe(),e=W(),t=T("article"),a.c(),this.h()},l(f){const P=Ze("svelte-1oku9az",document.head);o&&o.l(P),s=fe(),P.forEach(u),e=D(f),t=I(f,"ARTICLE",{class:!0});var i=R(t);a.l(i),i.forEach(u),this.h()},h(){p(t,"class","svelte-wsfnci")},m(f,P){o&&o.m(document.head,null),g(document.head,s),b(f,e,P),b(f,t,P),c[r].m(t,null),m=!0},p(f,[P]){f[0]&&f[11]?o?o.p(f,P):(o=Ge(f),o.c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null);let i=r;r=h(f),r===i?c[r].p(f,P):(ke(),Q(c[i],1,1,()=>{c[i]=null}),ve(),a=c[r],a?a.p(f,P):(a=c[r]=_[r](f),a.c()),G(a,1),a.m(t,null))},i(f){m||(G(a),m=!0)},o(f){Q(a),m=!1},d(f){f&&(u(e),u(t)),o&&o.d(f),u(s),c[r].d()}}}function Xe(n){if(!n)return"";try{return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(s){return console.error("Error formatting date:",s),n}}function It(n,s,e){let t,r,a,m;$e(n,st,v=>e(24,m=v));let{$$slots:o={},$$scope:_}=s;const c=rt();let{slug:h=""}=s,{preloadedEssay:f=null}=s,{serverError:P=null}=s,i=f,V=(f==null?void 0:f.content)||null,A=!f,y=P,w={likes:{},shares:{},views:{}},l=!1,k="",z=null,H=0,O=0,j=0,N=!1;async function C(v){if(f){console.log("Using preloaded essay data, skipping client-side fetch");return}if(v)try{e(7,A=!0),e(8,y=null),console.log(`Loading essay with slug: ${v}`);const{data:L,error:K}=await ct.from("essays").select(`
          id, title, description, date, published, excerpt, slug,
          like_count, share_count, view_count, content
        `).eq("slug",v).single();if(K)throw console.error(`Error fetching essay: ${K.message}`),new Error(`Failed to load essay: ${K.message}`);if(!L)throw new Error(`No essay found with slug: ${v}`);if(L.published===!1)throw new Error("This essay is not yet published");console.log(`Essay loaded: ${L.title}`),e(0,i=L),e(6,V=L.content),e(17,N=!1),await S()}catch(L){console.error("Error loading essay:",L),e(8,y=L instanceof Error?L.message:"Failed to load essay"),c("error",L)}finally{e(7,A=!1)}}async function S(){try{console.log("Initializing interactions on Essay component");const v=await dt();if(console.log("Interactions initialized on Essay with device ID:",v),!v){console.error("Failed to initialize interactions on Essay - no device ID returned"),c("error",new Error("Failed to initialize interactions"));return}if(i&&i.id){const L=mt(i.id);console.log(`Essay ${i.id} already liked:`,L),e(9,l=L);try{await pt(i.id),console.log(`View recorded for essay ${i.id}`)}catch(K){console.error(`Error recording view for essay ${i.id}:`,K)}}}catch(v){console.error("Error during Essay interaction initialization:",v),c("error",v)}}async function M(){if(i!=null&&i.id)try{console.log(`Like button clicked for essay ${i.id}`);const v=l,L=H,K=v?-1:1;e(9,l=!v),e(1,H=Math.max(0,L+K));const J=await _t(i.id);console.log(`New like status after toggle: ${J}`),J!==l&&(console.log("Correcting optimistic like status due to mismatch"),e(9,l=J),e(1,H=Math.max(0,H+(J?1:-1))))}catch(v){console.error(`Error toggling like for essay ${i.id}:`,v),e(9,l=!l),e(1,H=Math.max(0,H-(l?1:-1))),c("error",v)}}async function x(){if(!(i!=null&&i.id))return;console.log(`Share button clicked for essay ${i.id}`);const v=typeof window<"u"?window.location.href:`https://xnham.com/writing/${i.slug}`;try{await navigator.clipboard.writeText(v),console.log("URL copied to clipboard"),e(10,k="Link copied!"),e(2,O=O+1),await ht(i.id),z&&clearTimeout(z),z=setTimeout(()=>{e(10,k="")},2e3)}catch(L){console.error("Error copying link:",L),e(10,k="Error copying link"),z&&clearTimeout(z),z=setTimeout(()=>{e(10,k="")},2e3),c("error",L)}}return xe(()=>{var K;let v=()=>{},L=null;try{const J=h||((K=m==null?void 0:m.params)==null?void 0:K.slug);return console.log(`Essay component mounted with slug: ${J}`),J&&!f&&(!i||i.slug!==J)?C(J):f&&S(),L=setTimeout(async()=>{try{v=ft(X=>{if(w=X,i!=null&&i.id){const re=`${ut.ESSAY}:${i.id}`;e(9,l=(w==null?void 0:w.likes[re])||!1)}})}catch(X){console.error("Error in delayed initialization:",X),c("error",X)}},300),()=>{v&&v(),L&&clearTimeout(L),z&&clearTimeout(z)}}catch(J){console.error("Error in Essay onMount:",J),c("error",J)}}),n.$$set=v=>{"slug"in v&&e(14,h=v.slug),"preloadedEssay"in v&&e(15,f=v.preloadedEssay),"serverError"in v&&e(16,P=v.serverError),"$$scope"in v&&e(18,_=v.$$scope)},n.$$.update=()=>{n.$$.dirty&131073&&i&&!N&&(e(1,H=i.like_count||0),e(2,O=i.share_count||0),e(3,j=(i.view_count||0)+1),e(17,N=!0)),n.$$.dirty&49153&&h&&!f&&(!(i!=null&&i.slug)||i.slug!==h)&&(console.log(`Slug changed to ${h}, loading essay data`),C(h)),n.$$.dirty&14,n.$$.dirty&1&&e(4,t=typeof window<"u"?window.location.href:i!=null&&i.slug?`https://xnham.com/writing/${i.slug}`:""),n.$$.dirty&1&&e(5,r=i!=null&&i.description&&(i!=null&&i.excerpt)?`${i.description} ${i.excerpt}`:(i==null?void 0:i.description)||(i==null?void 0:i.excerpt)||""),n.$$.dirty&49&&e(11,a=i?{"@context":"https://schema.org","@type":"Article",headline:i.title,description:r,datePublished:i.date,author:{"@type":"Person",name:"Wendy Ham",url:"https://xnham.com"},publisher:{"@type":"Person",name:"Wendy Ham",url:"https://xnham.com"},mainEntityOfPage:{"@type":"WebPage","@id":t}}:null)},[i,H,O,j,t,r,V,A,y,l,k,a,M,x,h,f,P,N,_,o]}class Lt extends et{constructor(s){super(),tt(this,s,It,Tt,Qe,{slug:14,preloadedEssay:15,serverError:16})}}const{document:ce}=at;function St(n){return{c(){this.h()},l(s){this.h()},h(){ce.title="Essay Not Found | Wendy Ham's Weekend Projects"},m:Y,p:Y,d:Y}}function Wt(n){let s,e,t,r,a,m,o,_,c,h,f,P,i,V,A,y,w;return ce.title=s=n[0].essay.title+" | Wendy Ham's Weekend Projects",{c(){e=W(),t=T("meta"),r=W(),a=T("link"),o=W(),_=T("meta"),c=W(),h=T("meta"),f=W(),P=T("meta"),V=W(),A=T("meta"),y=W(),w=T("meta"),this.h()},l(l){e=D(l),t=I(l,"META",{name:!0,content:!0}),r=D(l),a=I(l,"LINK",{rel:!0,href:!0}),o=D(l),_=I(l,"META",{property:!0,content:!0}),c=D(l),h=I(l,"META",{property:!0,content:!0}),f=D(l),P=I(l,"META",{property:!0,content:!0}),V=D(l),A=I(l,"META",{property:!0,content:!0}),y=D(l),w=I(l,"META",{property:!0,content:!0}),this.h()},h(){p(t,"name","description"),p(t,"content",n[1]),p(a,"rel","canonical"),p(a,"href",m=`https://xnham.com/writing/${n[3].params.slug}`),p(_,"property","og:type"),p(_,"content","article"),p(h,"property","og:url"),p(h,"content",n[2]),p(P,"property","og:title"),p(P,"content",i=`${n[0].essay.title} | Wendy Ham's Weekend Projects`),p(A,"property","og:description"),p(A,"content",n[1]),p(w,"property","og:image"),p(w,"content","https://xnham.com/images/og-image.png")},m(l,k){b(l,e,k),b(l,t,k),b(l,r,k),b(l,a,k),b(l,o,k),b(l,_,k),b(l,c,k),b(l,h,k),b(l,f,k),b(l,P,k),b(l,V,k),b(l,A,k),b(l,y,k),b(l,w,k)},p(l,k){k&1&&s!==(s=l[0].essay.title+" | Wendy Ham's Weekend Projects")&&(ce.title=s),k&2&&p(t,"content",l[1]),k&8&&m!==(m=`https://xnham.com/writing/${l[3].params.slug}`)&&p(a,"href",m),k&4&&p(h,"content",l[2]),k&1&&i!==(i=`${l[0].essay.title} | Wendy Ham's Weekend Projects`)&&p(P,"content",i),k&2&&p(A,"content",l[1])},d(l){l&&(u(e),u(t),u(r),u(a),u(o),u(_),u(c),u(h),u(f),u(P),u(V),u(A),u(y),u(w))}}}function Dt(n){let s,e;return s=new Lt({props:{slug:n[3].params.slug,preloadedEssay:n[0].essay}}),s.$on("error",n[8]),{c(){De(s.$$.fragment)},l(t){Ae(s.$$.fragment,t)},m(t,r){He(s,t,r),e=!0},p(t,r){const a={};r&8&&(a.slug=t[3].params.slug),r&1&&(a.preloadedEssay=t[0].essay),s.$set(a)},i(t){e||(G(s.$$.fragment,t),e=!0)},o(t){Q(s.$$.fragment,t),e=!1},d(t){je(s,t)}}}function At(n){let s,e,t;function r(o,_){return o[5]>=nt?jt:Ht}let a=r(n),m=a(n);return{c(){s=T("div"),e=T("p"),t=B(`There was an error loading the essay. 
        `),m.c(),this.h()},l(o){s=I(o,"DIV",{class:!0});var _=R(s);e=I(_,"P",{});var c=R(e);t=q(c,`There was an error loading the essay. 
        `),m.l(c),c.forEach(u),_.forEach(u),this.h()},h(){p(s,"class","error-message svelte-19dmfw3")},m(o,_){b(o,s,_),g(s,e),g(e,t),m.m(e,null)},p(o,_){a!==(a=r(o))&&(m.d(1),m=a(o),m&&(m.c(),m.m(e,null)))},i:Y,o:Y,d(o){o&&u(s),m.d()}}}function Ht(n){let s;return{c(){s=B("Retrying...")},l(e){s=q(e,"Retrying...")},m(e,t){b(e,s,t)},d(e){e&&u(s)}}}function jt(n){let s;return{c(){s=B("Please try refreshing the page.")},l(e){s=q(e,"Please try refreshing the page.")},m(e,t){b(e,s,t)},d(e){e&&u(s)}}}function Vt(n){let s,e,t,r,a=`&lt; 
    <a href="/writing"><span class="link-text svelte-19dmfw3">Back to essays</span></a>`,m,o,_,c="<",h,f,P="Back",i,V,A,y,w,l;function k(C,S){return C[0].essay?Wt:St}let z=k(n),H=z(n);const O=[At,Dt],j=[];function N(C,S){return C[4]?0:1}return y=N(n),w=j[y]=O[y](n),{c(){H.c(),s=fe(),e=W(),t=T("div"),r=T("div"),r.innerHTML=a,m=W(),o=T("a"),_=T("span"),_.textContent=c,h=W(),f=T("span"),f.textContent=P,A=W(),w.c(),this.h()},l(C){const S=Ze("svelte-1hckw9",ce.head);H.l(S),s=fe(),S.forEach(u),e=D(C),t=I(C,"DIV",{class:!0});var M=R(t);r=I(M,"DIV",{class:!0,"data-svelte-h":!0}),ae(r)!=="svelte-r7biw2"&&(r.innerHTML=a),m=D(M),o=I(M,"A",{href:!0,class:!0,"aria-hidden":!0});var x=R(o);_=I(x,"SPAN",{class:!0,"data-svelte-h":!0}),ae(_)!=="svelte-19se4d7"&&(_.textContent=c),h=D(x),f=I(x,"SPAN",{class:!0,"data-svelte-h":!0}),ae(f)!=="svelte-1v4nvf1"&&(f.textContent=P),x.forEach(u),A=D(M),w.l(M),M.forEach(u),this.h()},h(){p(r,"class","back-button svelte-19dmfw3"),p(_,"class","arrow svelte-19dmfw3"),p(f,"class","floating-link-text svelte-19dmfw3"),p(o,"href","/writing"),p(o,"class",i="floating-back-button "+(n[7]?"visible":"hidden")+" "+(n[6]?"":"instant-hide")+" svelte-19dmfw3"),p(o,"aria-hidden",V=!n[7]),p(t,"class","container")},m(C,S){H.m(ce.head,null),g(ce.head,s),b(C,e,S),b(C,t,S),g(t,r),g(t,m),g(t,o),g(o,_),g(o,h),g(o,f),g(t,A),j[y].m(t,null),l=!0},p(C,[S]){z===(z=k(C))&&H?H.p(C,S):(H.d(1),H=z(C),H&&(H.c(),H.m(s.parentNode,s))),(!l||S&192&&i!==(i="floating-back-button "+(C[7]?"visible":"hidden")+" "+(C[6]?"":"instant-hide")+" svelte-19dmfw3"))&&p(o,"class",i),(!l||S&128&&V!==(V=!C[7]))&&p(o,"aria-hidden",V);let M=y;y=N(C),y===M?j[y].p(C,S):(ke(),Q(j[M],1,1,()=>{j[M]=null}),ve(),w=j[y],w?w.p(C,S):(w=j[y]=O[y](C),w.c()),G(w,1),w.m(t,null))},i(C){l||(G(w),l=!0)},o(C){Q(w),l=!1},d(C){C&&(u(e),u(t)),H.d(C),u(s),j[y].d()}}}const nt=2;function Mt(n,s,e){let t,r,a,m;$e(n,st,y=>e(3,m=y));let{data:o}=s,_=!1,c=0,h=!1,f=!1,P=!1;function i(y){console.error("Error in Essay component:",y.detail),e(4,_=!0),c<nt&&(e(5,c++,c),setTimeout(()=>{console.log(`Retry attempt ${c} for Essay component`),e(4,_=!1)},1e3))}function V(){if(typeof window>"u"||!a)return;document.querySelectorAll('script[type="application/ld+json"]').forEach(l=>l.remove());const w=document.createElement("script");w.type="application/ld+json",w.textContent=JSON.stringify(a),document.head.appendChild(w)}function A(){typeof window>"u"||P||(P=!0,requestAnimationFrame(()=>{const y=window.scrollY;e(6,h=y>300),h&&!f?e(7,f=!0):!h&&f&&e(7,f=!1),P=!1}))}return xe(()=>{o.essay?(Ue.set({title:`${o.essay.title} | Wendy Ham's Weekend Projects`,description:t,canonicalUrl:`https://xnham.com/writing/${m.params.slug}`,type:"article",url:typeof window<"u"?window.location.href:`https://xnham.com/writing/${m.params.slug}`}),V()):Ue.set({title:"Essay | Wendy Ham's Weekend Projects",description:"Essays about design, coding, and more.",canonicalUrl:`https://xnham.com/writing/${m.params.slug}`,type:"article",url:typeof window<"u"?window.location.href:`https://xnham.com/writing/${m.params.slug}`}),window.addEventListener("scroll",A);const y=w=>{console.error("Global error caught in essay page:",w.error||w.message);const l=String(w.error||w.message);(l.includes("Essay")||l.includes("essay")||l.includes("interaction"))&&(e(4,_=!0),w.preventDefault())};return window.addEventListener("error",y),()=>{window.removeEventListener("scroll",A),window.removeEventListener("error",y)}}),n.$$set=y=>{"data"in y&&e(0,o=y.data)},n.$$.update=()=>{var y,w,l,k;n.$$.dirty&1&&e(1,t=(y=o==null?void 0:o.essay)!=null&&y.description&&((w=o==null?void 0:o.essay)!=null&&w.excerpt)?`${o.essay.description} ${o.essay.excerpt}`:((l=o==null?void 0:o.essay)==null?void 0:l.description)||((k=o==null?void 0:o.essay)==null?void 0:k.excerpt)||""),n.$$.dirty&8&&e(2,r=typeof window<"u"?window.location.href:`https://xnham.com/writing/${m.params.slug}`),n.$$.dirty&7&&(a=o!=null&&o.essay?{"@context":"https://schema.org","@type":"Article",headline:o.essay.title,description:t,datePublished:o.essay.date,image:"https://xnham.com/images/og-image.png",author:{"@type":"Person",name:"Wendy Ham",url:"https://xnham.com"},publisher:{"@type":"Person",name:"Wendy Ham",url:"https://xnham.com"},mainEntityOfPage:{"@type":"WebPage","@id":r}}:null)},[o,t,r,m,_,c,h,f,i]}class Kt extends et{constructor(s){super(),tt(this,s,Mt,Vt,Qe,{data:0})}}export{Kt as component};
