import{s as xe,e as fe,a as A,f as b,G as et,d as u,c as S,g as E,h as R,j as d,w as g,i as y,A as tt,W as it,o as st,r as re,F as Ce,l as U,m as O,J as Le,K as We,L as Ae,n as ue,y as z,C as at,H as ct,I as ut}from"../chunks/scheduler.375bac4c.js";import{S as rt,i as nt,g as ke,t as K,c as be,a as B,b as Se,d as De,m as Me,e as He,f as ze}from"../chunks/index.f3580ca9.js";import{p as lt}from"../chunks/stores.49dd6b32.js";import{m as Ue}from"../chunks/metadataStore.fec89d9e.js";import{f as Oe}from"../chunks/index.0a5c46af.js";import{s as ft}from"../chunks/supabase.8f09c013.js";import{I as Be}from"../chunks/InteractionButton.b3a69314.js";import{s as dt,C as pt,i as mt,a as ht,b as _t,t as yt,r as gt}from"../chunks/essayInteractionService.aa667617.js";const vt=r=>({}),Ke=r=>({}),kt=r=>({}),Ge=r=>({}),bt=r=>({}),Ye=r=>({});function Xe(r){let t,s,e,l,a,p,i,h="{JSON.stringify(articleJsonLd)}",m,T,c,I,o,D,w,k,P,C,L;return document.title=t=r[0].title+" | Wendy Ham's Weekend Projects",{c(){s=A(),e=b("meta"),l=A(),a=b("link"),p=A(),i=b("script"),i.textContent=h,m=A(),T=b("meta"),c=A(),I=b("meta"),o=A(),D=b("meta"),k=A(),P=b("meta"),C=A(),L=b("meta"),this.h()},l(n){s=S(n),e=E(n,"META",{name:!0,content:!0}),l=S(n),a=E(n,"LINK",{rel:!0,href:!0}),p=S(n),i=E(n,"SCRIPT",{type:!0,"data-svelte-h":!0}),re(i)!=="svelte-1yj4vgp"&&(i.textContent=h),m=S(n),T=E(n,"META",{property:!0,content:!0}),c=S(n),I=E(n,"META",{property:!0,content:!0}),o=S(n),D=E(n,"META",{property:!0,content:!0}),k=S(n),P=E(n,"META",{property:!0,content:!0}),C=S(n),L=E(n,"META",{property:!0,content:!0}),this.h()},h(){d(e,"name","description"),d(e,"content",r[2]),d(a,"rel","canonical"),d(a,"href",r[1]),d(i,"type","application/ld+json"),d(T,"property","og:type"),d(T,"content","article"),d(I,"property","og:url"),d(I,"content",r[1]),d(D,"property","og:title"),d(D,"content",w=`${r[0].title} | Wendy Ham's Weekend Projects`),d(P,"property","og:description"),d(P,"content",r[2]),d(L,"property","og:image"),d(L,"content","https://xnham.com/images/og-image.png")},m(n,f){y(n,s,f),y(n,e,f),y(n,l,f),y(n,a,f),y(n,p,f),y(n,i,f),y(n,m,f),y(n,T,f),y(n,c,f),y(n,I,f),y(n,o,f),y(n,D,f),y(n,k,f),y(n,P,f),y(n,C,f),y(n,L,f)},p(n,f){f[0]&1&&t!==(t=n[0].title+" | Wendy Ham's Weekend Projects")&&(document.title=t),f[0]&4&&d(e,"content",n[2]),f[0]&2&&d(a,"href",n[1]),f[0]&2&&d(I,"content",n[1]),f[0]&1&&w!==(w=`${n[0].title} | Wendy Ham's Weekend Projects`)&&d(D,"content",w),f[0]&4&&d(P,"content",n[2])},d(n){n&&(u(s),u(e),u(l),u(a),u(p),u(i),u(m),u(T),u(c),u(I),u(o),u(D),u(k),u(P),u(C),u(L))}}}function Et(r){let t,s,e,l,a=Ze(r[0].date)+"",p,i,h,m,T,c,I,o,D,w=r[0].title+"",k,P,C,L=r[0].description+"",n,f,J,N,j,W,H,q,$=r[11]()+"",oe,ne,me=r[11]()===1?"like":"likes",de,pe,x,he=r[12]()+"",v,V,G=r[12]()===1?"share":"shares",Q,te,ee,Ve=r[13]()+"",Ee,we,Ne=r[13]()===1?"view":"views",Te,_e,Z;const Ie=r[19]["before-essay"],Y=Ce(Ie,r,r[18],Ye);m=new Be({props:{type:"like",active:r[6],count:void 0}}),m.$on("click",r[9]),c=new Be({props:{type:"share",active:!1,count:void 0}}),c.$on("click",r[10]);let F=r[7]&&Qe(r);const je=[Ct,Pt],se=[];function qe(_,M){return _[3]?0:1}N=qe(r),j=se[N]=je[N](r);const Pe=r[19]["after-essay"],X=Ce(Pe,r,r[18],Ke);return{c(){Y&&Y.c(),t=A(),s=b("div"),e=b("div"),l=b("p"),p=U(a),i=A(),h=b("div"),Se(m.$$.fragment),T=A(),Se(c.$$.fragment),I=A(),F&&F.c(),o=A(),D=b("h2"),k=U(w),P=A(),C=b("p"),n=U(L),f=A(),J=b("div"),j.c(),W=A(),H=b("div"),q=b("span"),oe=U($),ne=A(),de=U(me),pe=A(),x=b("span"),v=U(he),V=A(),Q=U(G),te=A(),ee=b("span"),Ee=U(Ve),we=A(),Te=U(Ne),_e=A(),X&&X.c(),this.h()},l(_){Y&&Y.l(_),t=S(_),s=E(_,"DIV",{class:!0});var M=R(s);e=E(M,"DIV",{class:!0});var le=R(e);l=E(le,"P",{class:!0});var ie=R(l);p=O(ie,a),ie.forEach(u),i=S(le),h=E(le,"DIV",{class:!0});var ae=R(h);De(m.$$.fragment,ae),T=S(ae),De(c.$$.fragment,ae),I=S(ae),F&&F.l(ae),ae.forEach(u),le.forEach(u),o=S(M),D=E(M,"H2",{class:!0});var Fe=R(D);k=O(Fe,w),Fe.forEach(u),P=S(M),C=E(M,"P",{class:!0});var Re=R(C);n=O(Re,L),Re.forEach(u),f=S(M),J=E(M,"DIV",{class:!0});var Je=R(J);j.l(Je),Je.forEach(u),M.forEach(u),W=S(_),H=E(_,"DIV",{class:!0});var ce=R(H);q=E(ce,"SPAN",{class:!0});var ye=R(q);oe=O(ye,$),ne=S(ye),de=O(ye,me),ye.forEach(u),pe=S(ce),x=E(ce,"SPAN",{class:!0});var ge=R(x);v=O(ge,he),V=S(ge),Q=O(ge,G),ge.forEach(u),te=S(ce),ee=E(ce,"SPAN",{class:!0});var ve=R(ee);Ee=O(ve,Ve),we=S(ve),Te=O(ve,Ne),ve.forEach(u),ce.forEach(u),_e=S(_),X&&X.l(_),this.h()},h(){d(l,"class","essay-date svelte-15h8k01"),d(h,"class","essay-buttons svelte-15h8k01"),d(e,"class","essay-header-row svelte-15h8k01"),d(D,"class","essay-title svelte-15h8k01"),d(C,"class","essay-description svelte-15h8k01"),d(J,"class","content svelte-15h8k01"),d(s,"class","essay-container svelte-15h8k01"),d(q,"class","essay-stat"),d(x,"class","essay-stat"),d(ee,"class","essay-stat"),d(H,"class","essay-stats svelte-15h8k01")},m(_,M){Y&&Y.m(_,M),y(_,t,M),y(_,s,M),g(s,e),g(e,l),g(l,p),g(e,i),g(e,h),Me(m,h,null),g(h,T),Me(c,h,null),g(h,I),F&&F.m(h,null),g(s,o),g(s,D),g(D,k),g(s,P),g(s,C),g(C,n),g(s,f),g(s,J),se[N].m(J,null),y(_,W,M),y(_,H,M),g(H,q),g(q,oe),g(q,ne),g(q,de),g(H,pe),g(H,x),g(x,v),g(x,V),g(x,Q),g(H,te),g(H,ee),g(ee,Ee),g(ee,we),g(ee,Te),y(_,_e,M),X&&X.m(_,M),Z=!0},p(_,M){Y&&Y.p&&(!Z||M[0]&262144)&&Le(Y,Ie,_,_[18],Z?Ae(Ie,_[18],M,bt):We(_[18]),Ye),(!Z||M[0]&1)&&a!==(a=Ze(_[0].date)+"")&&ue(p,a);const le={};M[0]&64&&(le.active=_[6]),m.$set(le),_[7]?F?(F.p(_,M),M[0]&128&&B(F,1)):(F=Qe(_),F.c(),B(F,1),F.m(h,null)):F&&(ke(),K(F,1,1,()=>{F=null}),be()),(!Z||M[0]&1)&&w!==(w=_[0].title+"")&&ue(k,w),(!Z||M[0]&1)&&L!==(L=_[0].description+"")&&ue(n,L);let ie=N;N=qe(_),N===ie?se[N].p(_,M):(ke(),K(se[ie],1,1,()=>{se[ie]=null}),be(),j=se[N],j?j.p(_,M):(j=se[N]=je[N](_),j.c()),B(j,1),j.m(J,null)),X&&X.p&&(!Z||M[0]&262144)&&Le(X,Pe,_,_[18],Z?Ae(Pe,_[18],M,vt):We(_[18]),Ke)},i(_){Z||(B(Y,_),B(m.$$.fragment,_),B(c.$$.fragment,_),B(F),B(j),B(X,_),Z=!0)},o(_){K(Y,_),K(m.$$.fragment,_),K(c.$$.fragment,_),K(F),K(j),K(X,_),Z=!1},d(_){_&&(u(t),u(s),u(W),u(H),u(_e)),Y&&Y.d(_),He(m),He(c),F&&F.d(),se[N].d(),X&&X.d(_)}}}function wt(r){let t,s="Essay not found";return{c(){t=b("div"),t.textContent=s,this.h()},l(e){t=E(e,"DIV",{class:!0,"data-svelte-h":!0}),re(t)!=="svelte-976hnr"&&(t.textContent=s),this.h()},h(){d(t,"class","error svelte-15h8k01")},m(e,l){y(e,t,l)},p:z,i:z,o:z,d(e){e&&u(t)}}}function Tt(r){let t,s;return{c(){t=b("div"),s=U(r[5]),this.h()},l(e){t=E(e,"DIV",{class:!0});var l=R(t);s=O(l,r[5]),l.forEach(u),this.h()},h(){d(t,"class","error svelte-15h8k01")},m(e,l){y(e,t,l),g(t,s)},p(e,l){l[0]&32&&ue(s,e[5])},i:z,o:z,d(e){e&&u(t)}}}function It(r){let t,s="Loading essay...";return{c(){t=b("div"),t.textContent=s,this.h()},l(e){t=E(e,"DIV",{class:!0,"data-svelte-h":!0}),re(t)!=="svelte-1hhis7s"&&(t.textContent=s),this.h()},h(){d(t,"class","loading svelte-15h8k01")},m(e,l){y(e,t,l)},p:z,i:z,o:z,d(e){e&&u(t)}}}function Qe(r){let t,s,e,l;return{c(){t=b("div"),s=U(r[7]),this.h()},l(a){t=E(a,"DIV",{class:!0});var p=R(t);s=O(p,r[7]),p.forEach(u),this.h()},h(){d(t,"class","copy-feedback svelte-15h8k01")},m(a,p){y(a,t,p),g(t,s),l=!0},p(a,p){(!l||p[0]&128)&&ue(s,a[7])},i(a){l||(a&&at(()=>{l&&(e||(e=ze(t,Oe,{duration:150},!0)),e.run(1))}),l=!0)},o(a){a&&(e||(e=ze(t,Oe,{duration:150},!1)),e.run(0)),l=!1},d(a){a&&u(t),a&&e&&e.end()}}}function Pt(r){let t;const s=r[19]["content-actions"],e=Ce(s,r,r[18],Ge);return{c(){e&&e.c()},l(l){e&&e.l(l)},m(l,a){e&&e.m(l,a),t=!0},p(l,a){e&&e.p&&(!t||a[0]&262144)&&Le(e,s,l,l[18],t?Ae(s,l[18],a,kt):We(l[18]),Ge)},i(l){t||(B(e,l),t=!0)},o(l){K(e,l),t=!1},d(l){e&&e.d(l)}}}function Ct(r){let t,s;return{c(){t=new ct(!1),s=fe(),this.h()},l(e){t=ut(e,!1),s=fe(),this.h()},h(){t.a=s},m(e,l){t.m(r[3],e,l),y(e,s,l)},p(e,l){l[0]&8&&t.p(e[3])},i:z,o:z,d(e){e&&(u(s),t.d())}}}function Lt(r){let t,s,e,l,a,p,i=r[0]&&r[8]&&Xe(r);const h=[It,Tt,wt,Et],m=[];function T(c,I){return c[4]?0:c[5]?1:c[0]?3:2}return l=T(r),a=m[l]=h[l](r),{c(){i&&i.c(),t=fe(),s=A(),e=b("article"),a.c(),this.h()},l(c){const I=et("svelte-gxo76b",document.head);i&&i.l(I),t=fe(),I.forEach(u),s=S(c),e=E(c,"ARTICLE",{class:!0});var o=R(e);a.l(o),o.forEach(u),this.h()},h(){d(e,"class","svelte-15h8k01")},m(c,I){i&&i.m(document.head,null),g(document.head,t),y(c,s,I),y(c,e,I),m[l].m(e,null),p=!0},p(c,I){c[0]&&c[8]?i?i.p(c,I):(i=Xe(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null);let o=l;l=T(c),l===o?m[l].p(c,I):(ke(),K(m[o],1,1,()=>{m[o]=null}),be(),a=m[l],a?a.p(c,I):(a=m[l]=h[l](c),a.c()),B(a,1),a.m(e,null))},i(c){p||(B(a),p=!0)},o(c){K(a),p=!1},d(c){c&&(u(s),u(e)),i&&i.d(c),u(t),m[l].d()}}}function Ze(r){const[t,s,e]=r.split("-"),l=["January","February","March","April","May","June","July","August","September","October","November","December"],a=parseInt(s,10)-1,p=l[a],i=e.startsWith("0")?e.substring(1):e;return`${p} ${i}, ${t}`}function Wt(r,t,s){let e,l,a,p;tt(r,lt,v=>s(30,p=v));let{$$slots:i={},$$scope:h}=t;const m=it();let{slug:T=""}=t,{preloadedEssay:c=null}=t,{serverError:I=null}=t,o=c,D=(c==null?void 0:c.content)||null,w=!c,k=I,P={likes:{},shares:{},views:{}},C=!1,L="",n=null,f=0,J=0,N=0,j=!1,W=!1,H=null,q=!1;async function $(v){if(c){console.log("Using preloaded essay data, skipping client-side fetch");return}if(v)try{s(4,w=!0),s(5,k=null),console.log(`Loading essay with slug: ${v}`);const{data:V,error:G}=await ft.from("essays").select(`
          id, title, description, date, published, excerpt, slug,
          like_count, share_count, view_count, content
        `).eq("slug",v).single();if(G)throw console.error(`Error fetching essay: ${G.message}`),new Error(`Failed to load essay: ${G.message}`);if(!V)throw new Error(`No essay found with slug: ${v}`);if(V.published===!1)throw new Error("This essay is not yet published");console.log(`Essay loaded: ${V.title}`),s(0,o=V),s(3,D=V.content),s(17,W=!1),await oe()}catch(V){console.error("Error loading essay:",V),s(5,k=V instanceof Error?V.message:"Failed to load essay"),m("error",V)}finally{s(4,w=!1)}}async function oe(){try{console.log("Initializing interactions on Essay component");const v=await mt();if(console.log("Interactions initialized on Essay with device ID:",v),!v){console.error("Failed to initialize interactions on Essay - no device ID returned"),m("error",new Error("Failed to initialize interactions"));return}if(o&&o.id){const V=ht(o.id);console.log(`Essay ${o.id} already liked:`,V),s(6,C=V);try{await _t(o.id),console.log(`View recorded for essay ${o.id}`)}catch(G){console.error(`Error recording view for essay ${o.id}:`,G)}}}catch(v){console.error("Error during Essay interaction initialization:",v),m("error",v)}}st(()=>{var G;let v=()=>{},V=null;try{const Q=T||((G=p==null?void 0:p.params)==null?void 0:G.slug);return console.log(`Essay component mounted with slug: ${Q}`),Q&&!c&&(!o||o.slug!==Q)?$(Q):c&&oe(),V=setTimeout(async()=>{try{v=dt(te=>{if(P=te,o&&o.id){const ee=`${pt.ESSAY}:${o.id}`;s(6,C=!!te.likes[ee])}})}catch(te){console.error("Error during delayed Essay initialization:",te),m("error",te)}},300),window.addEventListener("scroll",ne),()=>{v&&v(),V&&clearTimeout(V),window.removeEventListener("scroll",ne),n&&clearTimeout(n)}}catch(Q){return console.error("Error setting up Essay component:",Q),m("error",Q),()=>{v&&v(),V&&clearTimeout(V),window.removeEventListener("scroll",ne),n&&clearTimeout(n)}}});function ne(){typeof window>"u"||q||(q=!0,requestAnimationFrame(()=>{q=!1}))}async function me(){if(console.log("Essay handleLike called"),!o||!o.id){console.error("Cannot like: Missing essay ID");return}try{console.log(`Toggling like for essay ID: ${o.id}`);const v=!C;f=Math.max(0,f+(v?1:-1)),j=!0,s(6,C=v),f=f;const G=await yt(o.id);console.log(`Toggle like result: ${G}`)}catch(v){console.error("Error toggling like:",v),m("error",v),f=Math.max(0,f+(C?-1:1)),s(6,C=!C),j=!1}}async function de(){try{if(!o||!o.id){console.error("Cannot share: Missing essay ID");return}console.log(`Sharing essay ID: ${o.id}`);const v=`${window.location.origin}/writing/${o.slug}`;J+=1,j=!0,J=J,await navigator.clipboard.writeText(v),s(7,L="URL copied to clipboard!"),n&&clearTimeout(n),n=setTimeout(()=>{s(7,L="")},3e3);const V=await gt(o.id);console.log(`Share recorded: ${V}`)}catch(v){console.error("Error sharing essay:",v),m("error",v),s(7,L="Failed to copy URL"),n=setTimeout(()=>{s(7,L="")},3e3),J=Math.max(0,J-1),j=!1}}function pe(){return j?f:(o==null?void 0:o.like_count)||0}function x(){return j?J:(o==null?void 0:o.share_count)||0}function he(){const v=(o==null?void 0:o.view_count)||0;return j?N:v+1}return r.$$set=v=>{"slug"in v&&s(14,T=v.slug),"preloadedEssay"in v&&s(15,c=v.preloadedEssay),"serverError"in v&&s(16,I=v.serverError),"$$scope"in v&&s(18,h=v.$$scope)},r.$$.update=()=>{r.$$.dirty[0]&32769&&c&&!o&&(s(0,o=c),s(3,D=c.content),s(4,w=!1)),r.$$.dirty[0]&131073&&o&&!W&&(f=o.like_count||0,J=o.share_count||0,N=(o.view_count||0)+1,j=!0,s(17,W=!0)),r.$$.dirty[0]&49153&&T&&!c&&(!(o!=null&&o.slug)||o.slug!==T)&&(console.log(`Slug changed to ${T}, loading essay data`),$(T)),r.$$.dirty[0]&1&&s(1,e=typeof window<"u"?window.location.href:o!=null&&o.slug?`https://xnham.com/writing/${o.slug}`:""),r.$$.dirty[0]&1&&s(2,l=o!=null&&o.description&&(o!=null&&o.excerpt)?`${o.description} ${o.excerpt}`:(o==null?void 0:o.description)||(o==null?void 0:o.excerpt)||""),r.$$.dirty[0]&7&&s(8,a=o?{"@context":"https://schema.org","@type":"Article",headline:o.title,description:l,datePublished:o.date,author:{"@type":"Person",name:"Wendy Ham",url:"https://xnham.com"},publisher:{"@type":"Person",name:"Wendy Ham",url:"https://xnham.com"},mainEntityOfPage:{"@type":"WebPage","@id":e}}:null)},[o,e,l,D,w,k,C,L,a,me,de,pe,x,he,T,c,I,W,h,i]}class At extends rt{constructor(t){super(),nt(this,t,Wt,Lt,xe,{slug:14,preloadedEssay:15,serverError:16},null,[-1,-1])}}function St(r){return{c(){this.h()},l(t){this.h()},h(){document.title="Essay Not Found | Wendy Ham's Weekend Projects"},m:z,p:z,d:z}}function Dt(r){let t,s,e,l,a,p,i,h,m,T,c,I,o,D,w,k,P,C;document.title=t=r[0].essay.title+" | Wendy Ham's Weekend Projects";let L=r[8]&&$e();return{c(){s=A(),e=b("meta"),l=A(),a=b("link"),i=A(),L&&L.c(),h=A(),m=b("meta"),T=A(),c=b("meta"),I=A(),o=b("meta"),w=A(),k=b("meta"),P=A(),C=b("meta"),this.h()},l(n){s=S(n),e=E(n,"META",{name:!0,content:!0}),l=S(n),a=E(n,"LINK",{rel:!0,href:!0}),i=S(n),L&&L.l(n),h=S(n),m=E(n,"META",{property:!0,content:!0}),T=S(n),c=E(n,"META",{property:!0,content:!0}),I=S(n),o=E(n,"META",{property:!0,content:!0}),w=S(n),k=E(n,"META",{property:!0,content:!0}),P=S(n),C=E(n,"META",{property:!0,content:!0}),this.h()},h(){d(e,"name","description"),d(e,"content",r[1]),d(a,"rel","canonical"),d(a,"href",p=`https://xnham.com/writing/${r[3].params.slug}`),d(m,"property","og:type"),d(m,"content","article"),d(c,"property","og:url"),d(c,"content",r[2]),d(o,"property","og:title"),d(o,"content",D=`${r[0].essay.title} | Wendy Ham's Weekend Projects`),d(k,"property","og:description"),d(k,"content",r[1]),d(C,"property","og:image"),d(C,"content","https://xnham.com/images/og-image.png")},m(n,f){y(n,s,f),y(n,e,f),y(n,l,f),y(n,a,f),y(n,i,f),L&&L.m(n,f),y(n,h,f),y(n,m,f),y(n,T,f),y(n,c,f),y(n,I,f),y(n,o,f),y(n,w,f),y(n,k,f),y(n,P,f),y(n,C,f)},p(n,f){f&1&&t!==(t=n[0].essay.title+" | Wendy Ham's Weekend Projects")&&(document.title=t),f&2&&d(e,"content",n[1]),f&8&&p!==(p=`https://xnham.com/writing/${n[3].params.slug}`)&&d(a,"href",p),n[8]?L||(L=$e(),L.c(),L.m(h.parentNode,h)):L&&(L.d(1),L=null),f&4&&d(c,"content",n[2]),f&1&&D!==(D=`${n[0].essay.title} | Wendy Ham's Weekend Projects`)&&d(o,"content",D),f&2&&d(k,"content",n[1])},d(n){n&&(u(s),u(e),u(l),u(a),u(i),u(h),u(m),u(T),u(c),u(I),u(o),u(w),u(k),u(P),u(C)),L&&L.d(n)}}}function $e(r){let t,s="{JSON.stringify(articleJsonLd)}";return{c(){t=b("script"),t.textContent=s,this.h()},l(e){t=E(e,"SCRIPT",{type:!0,"data-svelte-h":!0}),re(t)!=="svelte-1yce5l5"&&(t.textContent=s),this.h()},h(){d(t,"type","application/ld+json")},m(e,l){y(e,t,l)},d(e){e&&u(t)}}}function Mt(r){let t,s;return t=new At({props:{slug:r[3].params.slug,preloadedEssay:r[0].essay,serverError:r[0].error}}),t.$on("error",r[9]),{c(){Se(t.$$.fragment)},l(e){De(t.$$.fragment,e)},m(e,l){Me(t,e,l),s=!0},p(e,l){const a={};l&8&&(a.slug=e[3].params.slug),l&1&&(a.preloadedEssay=e[0].essay),l&1&&(a.serverError=e[0].error),t.$set(a)},i(e){s||(B(t.$$.fragment,e),s=!0)},o(e){K(t.$$.fragment,e),s=!1},d(e){He(t,e)}}}function Ht(r){let t,s,e=(r[0].error||"There was a problem loading this essay.")+"",l,a,p,i='<a href="/writing">Return to essays</a>';return{c(){t=b("div"),s=b("p"),l=U(e),a=A(),p=b("p"),p.innerHTML=i,this.h()},l(h){t=E(h,"DIV",{class:!0});var m=R(t);s=E(m,"P",{});var T=R(s);l=O(T,e),T.forEach(u),a=S(m),p=E(m,"P",{"data-svelte-h":!0}),re(p)!=="svelte-8gzo4f"&&(p.innerHTML=i),m.forEach(u),this.h()},h(){d(t,"class","error-message svelte-1h61keq")},m(h,m){y(h,t,m),g(t,s),g(s,l),g(t,a),g(t,p)},p(h,m){m&1&&e!==(e=(h[0].error||"There was a problem loading this essay.")+"")&&ue(l,e)},i:z,o:z,d(h){h&&u(t)}}}function Vt(r){let t,s,e;function l(i,h){return i[5]>=ot?jt:Nt}let a=l(r),p=a(r);return{c(){t=b("div"),s=b("p"),e=U(`There was an error loading the essay. 
        `),p.c(),this.h()},l(i){t=E(i,"DIV",{class:!0});var h=R(t);s=E(h,"P",{});var m=R(s);e=O(m,`There was an error loading the essay. 
        `),p.l(m),m.forEach(u),h.forEach(u),this.h()},h(){d(t,"class","error-message svelte-1h61keq")},m(i,h){y(i,t,h),g(t,s),g(s,e),p.m(s,null)},p(i,h){a!==(a=l(i))&&(p.d(1),p=a(i),p&&(p.c(),p.m(s,null)))},i:z,o:z,d(i){i&&u(t),p.d()}}}function Nt(r){let t;return{c(){t=U("Retrying...")},l(s){t=O(s,"Retrying...")},m(s,e){y(s,t,e)},d(s){s&&u(t)}}}function jt(r){let t;return{c(){t=U("Please try refreshing the page.")},l(s){t=O(s,"Please try refreshing the page.")},m(s,e){y(s,t,e)},d(s){s&&u(t)}}}function qt(r){let t,s,e,l,a=`&lt; 
    <a href="/writing" class="svelte-1h61keq"><span class="link-text svelte-1h61keq">Back to essays</span></a>`,p,i,h,m="<",T,c,I="Back",o,D,w,k,P,C;function L(W,H){return W[0].essay?Dt:St}let n=L(r),f=n(r);const J=[Vt,Ht,Mt],N=[];function j(W,H){return W[4]?0:W[0].error?1:2}return k=j(r),P=N[k]=J[k](r),{c(){f.c(),t=fe(),s=A(),e=b("div"),l=b("div"),l.innerHTML=a,p=A(),i=b("a"),h=b("span"),h.textContent=m,T=A(),c=b("span"),c.textContent=I,w=A(),P.c(),this.h()},l(W){const H=et("svelte-akv0tl",document.head);f.l(H),t=fe(),H.forEach(u),s=S(W),e=E(W,"DIV",{class:!0});var q=R(e);l=E(q,"DIV",{class:!0,"data-svelte-h":!0}),re(l)!=="svelte-r7biw2"&&(l.innerHTML=a),p=S(q),i=E(q,"A",{href:!0,class:!0,"aria-hidden":!0});var $=R(i);h=E($,"SPAN",{class:!0,"data-svelte-h":!0}),re(h)!=="svelte-19se4d7"&&(h.textContent=m),T=S($),c=E($,"SPAN",{class:!0,"data-svelte-h":!0}),re(c)!=="svelte-1v4nvf1"&&(c.textContent=I),$.forEach(u),w=S(q),P.l(q),q.forEach(u),this.h()},h(){d(l,"class","back-button svelte-1h61keq"),d(h,"class","arrow svelte-1h61keq"),d(c,"class","floating-link-text svelte-1h61keq"),d(i,"href","/writing"),d(i,"class",o="floating-back-button "+(r[7]?"visible":"hidden")+" "+(r[6]?"":"instant-hide")+" svelte-1h61keq"),d(i,"aria-hidden",D=!r[7]),d(e,"class","container svelte-1h61keq")},m(W,H){f.m(document.head,null),g(document.head,t),y(W,s,H),y(W,e,H),g(e,l),g(e,p),g(e,i),g(i,h),g(i,T),g(i,c),g(e,w),N[k].m(e,null),C=!0},p(W,[H]){n===(n=L(W))&&f?f.p(W,H):(f.d(1),f=n(W),f&&(f.c(),f.m(t.parentNode,t))),(!C||H&192&&o!==(o="floating-back-button "+(W[7]?"visible":"hidden")+" "+(W[6]?"":"instant-hide")+" svelte-1h61keq"))&&d(i,"class",o),(!C||H&128&&D!==(D=!W[7]))&&d(i,"aria-hidden",D);let q=k;k=j(W),k===q?N[k].p(W,H):(ke(),K(N[q],1,1,()=>{N[q]=null}),be(),P=N[k],P?P.p(W,H):(P=N[k]=J[k](W),P.c()),B(P,1),P.m(e,null))},i(W){C||(B(P),C=!0)},o(W){K(P),C=!1},d(W){W&&(u(s),u(e)),f.d(W),u(t),N[k].d()}}}const ot=2;function Ft(r,t,s){let e,l,a,p;tt(r,lt,w=>s(3,p=w));let{data:i}=t,h=!1,m=0,T=!1,c=!1,I=!1;function o(w){console.error("Error in Essay component:",w.detail),s(4,h=!0),m<ot&&(s(5,m++,m),setTimeout(()=>{console.log(`Retry attempt ${m} for Essay component`),s(4,h=!1)},1e3))}function D(){typeof window>"u"||I||(I=!0,requestAnimationFrame(()=>{const w=window.scrollY;s(6,T=w>300),T&&!c?s(7,c=!0):!T&&c&&s(7,c=!1),I=!1}))}return st(()=>{i.essay?Ue.set({title:`${i.essay.title} | Wendy Ham's Weekend Projects`,description:e,canonicalUrl:`https://xnham.com/writing/${p.params.slug}`,type:"article",url:typeof window<"u"?window.location.href:`https://xnham.com/writing/${p.params.slug}`}):Ue.set({title:"Essay | Wendy Ham's Weekend Projects",description:"Essays about design, coding, and more.",canonicalUrl:`https://xnham.com/writing/${p.params.slug}`,type:"article",url:typeof window<"u"?window.location.href:`https://xnham.com/writing/${p.params.slug}`}),window.addEventListener("scroll",D);const w=k=>{console.error("Global error caught in essay page:",k.error||k.message);const P=String(k.error||k.message);(P.includes("Essay")||P.includes("essay")||P.includes("interaction"))&&(s(4,h=!0),k.preventDefault())};return window.addEventListener("error",w),()=>{window.removeEventListener("scroll",D),window.removeEventListener("error",w)}}),r.$$set=w=>{"data"in w&&s(0,i=w.data)},r.$$.update=()=>{var w,k,P,C;r.$$.dirty&1&&s(1,e=(w=i==null?void 0:i.essay)!=null&&w.description&&((k=i==null?void 0:i.essay)!=null&&k.excerpt)?`${i.essay.description} ${i.essay.excerpt}`:((P=i==null?void 0:i.essay)==null?void 0:P.description)||((C=i==null?void 0:i.essay)==null?void 0:C.excerpt)||""),r.$$.dirty&8&&s(2,l=typeof window<"u"?window.location.href:`https://xnham.com/writing/${p.params.slug}`),r.$$.dirty&7&&s(8,a=i!=null&&i.essay?{"@context":"https://schema.org","@type":"Article",headline:i.essay.title,description:e,datePublished:i.essay.date,author:{"@type":"Person",name:"Wendy Ham",url:"https://xnham.com"},publisher:{"@type":"Person",name:"Wendy Ham",url:"https://xnham.com"},mainEntityOfPage:{"@type":"WebPage","@id":l}}:null)},[i,e,l,p,h,m,T,c,a,o]}class Yt extends rt{constructor(t){super(),nt(this,t,Ft,qt,xe,{data:0})}}export{Yt as component};
