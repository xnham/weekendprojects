import{s as xe,e as se,a as L,f as C,G as et,d as u,c as S,g as I,h as z,j as d,w as k,i as h,A as tt,S as ct,o as st,r as ce,F as Ie,l as B,m as K,J as We,K as Ae,L as Le,n as fe,y as J,C as ut,H as rt,I as nt}from"../chunks/scheduler.0abf8665.js";import{S as lt,i as it,g as ge,t as G,c as ke,a as U,b as Se,d as De,m as He,e as Me,f as Ue}from"../chunks/index.6a57b9dd.js";import{p as ot}from"../chunks/stores.64c0c1cf.js";import{m as Je}from"../chunks/metadataStore.3f488aae.js";import{f as Oe}from"../chunks/index.da8dadf4.js";import{s as ft}from"../chunks/supabase.8f09c013.js";import{I as Be}from"../chunks/InteractionButton.03864e64.js";import{s as dt,C as mt,i as pt,a as _t,b as ht,t as yt,r as gt}from"../chunks/essayInteractionService.c4fe877c.js";const kt=n=>({}),Ke=n=>({}),vt=n=>({}),Ge=n=>({}),bt=n=>({}),Ye=n=>({});function Xe(n){let s,t,e,l,a,m,o,y="{JSON.stringify(articleJsonLd)}",p,W,c,w,i,H,P,g,v,b,E;return document.title=s=n[0].title+" | Wendy Ham's Weekend Projects",{c(){t=L(),e=C("meta"),l=L(),a=C("link"),m=L(),o=C("script"),o.textContent=y,p=L(),W=C("meta"),c=L(),w=C("meta"),i=L(),H=C("meta"),g=L(),v=C("meta"),b=L(),E=C("meta"),this.h()},l(r){t=S(r),e=I(r,"META",{name:!0,content:!0}),l=S(r),a=I(r,"LINK",{rel:!0,href:!0}),m=S(r),o=I(r,"SCRIPT",{type:!0,"data-svelte-h":!0}),ce(o)!=="svelte-1yj4vgp"&&(o.textContent=y),p=S(r),W=I(r,"META",{property:!0,content:!0}),c=S(r),w=I(r,"META",{property:!0,content:!0}),i=S(r),H=I(r,"META",{property:!0,content:!0}),g=S(r),v=I(r,"META",{property:!0,content:!0}),b=S(r),E=I(r,"META",{property:!0,content:!0}),this.h()},h(){d(e,"name","description"),d(e,"content",n[2]),d(a,"rel","canonical"),d(a,"href",n[1]),d(o,"type","application/ld+json"),d(W,"property","og:type"),d(W,"content","article"),d(w,"property","og:url"),d(w,"content",n[1]),d(H,"property","og:title"),d(H,"content",P=`${n[0].title} | Wendy Ham's Weekend Projects`),d(v,"property","og:description"),d(v,"content",n[2]),d(E,"property","og:image"),d(E,"content","https://xnham.com/images/og-image.png")},m(r,f){h(r,t,f),h(r,e,f),h(r,l,f),h(r,a,f),h(r,m,f),h(r,o,f),h(r,p,f),h(r,W,f),h(r,c,f),h(r,w,f),h(r,i,f),h(r,H,f),h(r,g,f),h(r,v,f),h(r,b,f),h(r,E,f)},p(r,f){f&1&&s!==(s=r[0].title+" | Wendy Ham's Weekend Projects")&&(document.title=s),f&4&&d(e,"content",r[2]),f&2&&d(a,"href",r[1]),f&2&&d(w,"content",r[1]),f&1&&P!==(P=`${r[0].title} | Wendy Ham's Weekend Projects`)&&d(H,"content",P),f&4&&d(v,"content",r[2])},d(r){r&&(u(t),u(e),u(l),u(a),u(m),u(o),u(p),u(W),u(c),u(w),u(i),u(H),u(g),u(v),u(b),u(E))}}}function Et(n){let s,t,e,l,a=Ze(n[0].date)+"",m,o,y,p,W,c,w,i,H,P=n[0].title+"",g,v,b,E=n[0].description+"",r,f,O,V,F,A,M,N,x=n[9]()+"",ne,le,de=n[9]()===1?"like":"likes",ue,T,D,Q=n[10]()+"",R,$,me=n[10]()===1?"share":"shares",ve,be,ee,je=n[11]()+"",Ee,we,Ve=n[11]()===1?"view":"views",Pe,pe,Z;const Te=n[19]["before-essay"],Y=Ie(Te,n,n[18],Ye);p=new Be({props:{type:"like",active:n[6],count:void 0}}),p.$on("click",n[12]),c=new Be({props:{type:"share",active:!1,count:void 0}}),c.$on("click",n[13]);let q=n[7]&&Qe(n);const Ne=[It,Ct],te=[];function Fe(_,j){return _[3]?0:1}V=Fe(n),F=te[V]=Ne[V](n);const Ce=n[19]["after-essay"],X=Ie(Ce,n,n[18],Ke);return{c(){Y&&Y.c(),s=L(),t=C("div"),e=C("div"),l=C("p"),m=B(a),o=L(),y=C("div"),Se(p.$$.fragment),W=L(),Se(c.$$.fragment),w=L(),q&&q.c(),i=L(),H=C("h2"),g=B(P),v=L(),b=C("p"),r=B(E),f=L(),O=C("div"),F.c(),A=L(),M=C("div"),N=C("span"),ne=B(x),le=L(),ue=B(de),T=L(),D=C("span"),R=B(Q),$=L(),ve=B(me),be=L(),ee=C("span"),Ee=B(je),we=L(),Pe=B(Ve),pe=L(),X&&X.c(),this.h()},l(_){Y&&Y.l(_),s=S(_),t=I(_,"DIV",{class:!0});var j=z(t);e=I(j,"DIV",{class:!0});var re=z(e);l=I(re,"P",{class:!0});var ie=z(l);m=K(ie,a),ie.forEach(u),o=S(re),y=I(re,"DIV",{class:!0});var oe=z(y);De(p.$$.fragment,oe),W=S(oe),De(c.$$.fragment,oe),w=S(oe),q&&q.l(oe),oe.forEach(u),re.forEach(u),i=S(j),H=I(j,"H2",{class:!0});var qe=z(H);g=K(qe,P),qe.forEach(u),v=S(j),b=I(j,"P",{class:!0});var ze=z(b);r=K(ze,E),ze.forEach(u),f=S(j),O=I(j,"DIV",{class:!0});var Re=z(O);F.l(Re),Re.forEach(u),j.forEach(u),A=S(_),M=I(_,"DIV",{class:!0});var ae=z(M);N=I(ae,"SPAN",{class:!0});var _e=z(N);ne=K(_e,x),le=S(_e),ue=K(_e,de),_e.forEach(u),T=S(ae),D=I(ae,"SPAN",{class:!0});var he=z(D);R=K(he,Q),$=S(he),ve=K(he,me),he.forEach(u),be=S(ae),ee=I(ae,"SPAN",{class:!0});var ye=z(ee);Ee=K(ye,je),we=S(ye),Pe=K(ye,Ve),ye.forEach(u),ae.forEach(u),pe=S(_),X&&X.l(_),this.h()},h(){d(l,"class","essay-date svelte-15h8k01"),d(y,"class","essay-buttons svelte-15h8k01"),d(e,"class","essay-header-row svelte-15h8k01"),d(H,"class","essay-title svelte-15h8k01"),d(b,"class","essay-description svelte-15h8k01"),d(O,"class","content svelte-15h8k01"),d(t,"class","essay-container svelte-15h8k01"),d(N,"class","essay-stat"),d(D,"class","essay-stat"),d(ee,"class","essay-stat"),d(M,"class","essay-stats svelte-15h8k01")},m(_,j){Y&&Y.m(_,j),h(_,s,j),h(_,t,j),k(t,e),k(e,l),k(l,m),k(e,o),k(e,y),He(p,y,null),k(y,W),He(c,y,null),k(y,w),q&&q.m(y,null),k(t,i),k(t,H),k(H,g),k(t,v),k(t,b),k(b,r),k(t,f),k(t,O),te[V].m(O,null),h(_,A,j),h(_,M,j),k(M,N),k(N,ne),k(N,le),k(N,ue),k(M,T),k(M,D),k(D,R),k(D,$),k(D,ve),k(M,be),k(M,ee),k(ee,Ee),k(ee,we),k(ee,Pe),h(_,pe,j),X&&X.m(_,j),Z=!0},p(_,j){Y&&Y.p&&(!Z||j&262144)&&We(Y,Te,_,_[18],Z?Le(Te,_[18],j,bt):Ae(_[18]),Ye),(!Z||j&1)&&a!==(a=Ze(_[0].date)+"")&&fe(m,a);const re={};j&64&&(re.active=_[6]),p.$set(re),_[7]?q?(q.p(_,j),j&128&&U(q,1)):(q=Qe(_),q.c(),U(q,1),q.m(y,null)):q&&(ge(),G(q,1,1,()=>{q=null}),ke()),(!Z||j&1)&&P!==(P=_[0].title+"")&&fe(g,P),(!Z||j&1)&&E!==(E=_[0].description+"")&&fe(r,E);let ie=V;V=Fe(_),V===ie?te[V].p(_,j):(ge(),G(te[ie],1,1,()=>{te[ie]=null}),ke(),F=te[V],F?F.p(_,j):(F=te[V]=Ne[V](_),F.c()),U(F,1),F.m(O,null)),X&&X.p&&(!Z||j&262144)&&We(X,Ce,_,_[18],Z?Le(Ce,_[18],j,kt):Ae(_[18]),Ke)},i(_){Z||(U(Y,_),U(p.$$.fragment,_),U(c.$$.fragment,_),U(q),U(F),U(X,_),Z=!0)},o(_){G(Y,_),G(p.$$.fragment,_),G(c.$$.fragment,_),G(q),G(F),G(X,_),Z=!1},d(_){_&&(u(s),u(t),u(A),u(M),u(pe)),Y&&Y.d(_),Me(p),Me(c),q&&q.d(),te[V].d(),X&&X.d(_)}}}function wt(n){let s,t="Essay not found";return{c(){s=C("div"),s.textContent=t,this.h()},l(e){s=I(e,"DIV",{class:!0,"data-svelte-h":!0}),ce(s)!=="svelte-976hnr"&&(s.textContent=t),this.h()},h(){d(s,"class","error svelte-15h8k01")},m(e,l){h(e,s,l)},p:J,i:J,o:J,d(e){e&&u(s)}}}function Pt(n){let s,t;return{c(){s=C("div"),t=B(n[5]),this.h()},l(e){s=I(e,"DIV",{class:!0});var l=z(s);t=K(l,n[5]),l.forEach(u),this.h()},h(){d(s,"class","error svelte-15h8k01")},m(e,l){h(e,s,l),k(s,t)},p(e,l){l&32&&fe(t,e[5])},i:J,o:J,d(e){e&&u(s)}}}function Tt(n){let s,t="Loading essay...";return{c(){s=C("div"),s.textContent=t,this.h()},l(e){s=I(e,"DIV",{class:!0,"data-svelte-h":!0}),ce(s)!=="svelte-1hhis7s"&&(s.textContent=t),this.h()},h(){d(s,"class","loading svelte-15h8k01")},m(e,l){h(e,s,l)},p:J,i:J,o:J,d(e){e&&u(s)}}}function Qe(n){let s,t,e,l;return{c(){s=C("div"),t=B(n[7]),this.h()},l(a){s=I(a,"DIV",{class:!0});var m=z(s);t=K(m,n[7]),m.forEach(u),this.h()},h(){d(s,"class","copy-feedback svelte-15h8k01")},m(a,m){h(a,s,m),k(s,t),l=!0},p(a,m){(!l||m&128)&&fe(t,a[7])},i(a){l||(a&&ut(()=>{l&&(e||(e=Ue(s,Oe,{duration:150},!0)),e.run(1))}),l=!0)},o(a){a&&(e||(e=Ue(s,Oe,{duration:150},!1)),e.run(0)),l=!1},d(a){a&&u(s),a&&e&&e.end()}}}function Ct(n){let s;const t=n[19]["content-actions"],e=Ie(t,n,n[18],Ge);return{c(){e&&e.c()},l(l){e&&e.l(l)},m(l,a){e&&e.m(l,a),s=!0},p(l,a){e&&e.p&&(!s||a&262144)&&We(e,t,l,l[18],s?Le(t,l[18],a,vt):Ae(l[18]),Ge)},i(l){s||(U(e,l),s=!0)},o(l){G(e,l),s=!1},d(l){e&&e.d(l)}}}function It(n){let s,t;return{c(){s=new rt(!1),t=se(),this.h()},l(e){s=nt(e,!1),t=se(),this.h()},h(){s.a=t},m(e,l){s.m(n[3],e,l),h(e,t,l)},p(e,l){l&8&&s.p(e[3])},i:J,o:J,d(e){e&&(u(t),s.d())}}}function Wt(n){let s,t,e,l,a,m,o=n[0]&&n[8]&&Xe(n);const y=[Tt,Pt,wt,Et],p=[];function W(c,w){return c[4]?0:c[5]?1:c[0]?3:2}return l=W(n),a=p[l]=y[l](n),{c(){o&&o.c(),s=se(),t=L(),e=C("article"),a.c(),this.h()},l(c){const w=et("svelte-gxo76b",document.head);o&&o.l(w),s=se(),w.forEach(u),t=S(c),e=I(c,"ARTICLE",{class:!0});var i=z(e);a.l(i),i.forEach(u),this.h()},h(){d(e,"class","svelte-15h8k01")},m(c,w){o&&o.m(document.head,null),k(document.head,s),h(c,t,w),h(c,e,w),p[l].m(e,null),m=!0},p(c,[w]){c[0]&&c[8]?o?o.p(c,w):(o=Xe(c),o.c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null);let i=l;l=W(c),l===i?p[l].p(c,w):(ge(),G(p[i],1,1,()=>{p[i]=null}),ke(),a=p[l],a?a.p(c,w):(a=p[l]=y[l](c),a.c()),U(a,1),a.m(e,null))},i(c){m||(U(a),m=!0)},o(c){G(a),m=!1},d(c){c&&(u(t),u(e)),o&&o.d(c),u(s),p[l].d()}}}function Ze(n){if(!n)return"";try{return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(s){return console.error("Error formatting date:",s),n}}function At(n,s,t){let e,l,a,m;tt(n,ot,T=>t(26,m=T));let{$$slots:o={},$$scope:y}=s;const p=ct();let{slug:W=""}=s,{preloadedEssay:c=null}=s,{serverError:w=null}=s,i=c,H=(c==null?void 0:c.content)||null,P=!c,g=w,v={likes:{},shares:{},views:{}},b=!1,E="",r=null,f=0,O=0,V=0,F=!1,A=!1;function M(){return F?f:(i==null?void 0:i.like_count)||0}function N(){return F?O:(i==null?void 0:i.share_count)||0}function x(){return F?V:(i==null?void 0:i.view_count)||0}async function ne(T){if(c){console.log("Using preloaded essay data, skipping client-side fetch");return}if(T)try{t(4,P=!0),t(5,g=null),console.log(`Loading essay with slug: ${T}`);const{data:D,error:Q}=await ft.from("essays").select(`
          id, title, description, date, published, excerpt, slug,
          like_count, share_count, view_count, content
        `).eq("slug",T).single();if(Q)throw console.error(`Error fetching essay: ${Q.message}`),new Error(`Failed to load essay: ${Q.message}`);if(!D)throw new Error(`No essay found with slug: ${T}`);if(D.published===!1)throw new Error("This essay is not yet published");console.log(`Essay loaded: ${D.title}`),t(0,i=D),t(3,H=D.content),t(17,A=!1),await le()}catch(D){console.error("Error loading essay:",D),t(5,g=D instanceof Error?D.message:"Failed to load essay"),p("error",D)}finally{t(4,P=!1)}}async function le(){try{console.log("Initializing interactions on Essay component");const T=await pt();if(console.log("Interactions initialized on Essay with device ID:",T),!T){console.error("Failed to initialize interactions on Essay - no device ID returned"),p("error",new Error("Failed to initialize interactions"));return}if(i&&i.id){const D=_t(i.id);console.log(`Essay ${i.id} already liked:`,D),t(6,b=D);try{await ht(i.id),console.log(`View recorded for essay ${i.id}`)}catch(Q){console.error(`Error recording view for essay ${i.id}:`,Q)}}}catch(T){console.error("Error during Essay interaction initialization:",T),p("error",T)}}async function de(){if(i!=null&&i.id)try{console.log(`Like button clicked for essay ${i.id}`);const T=b,D=M();f=Math.max(0,D+(T?-1:1)),t(6,b=!T);const R=await yt(i.id);if(console.log(`New like status after toggle: ${R}`),R!==b){console.log("Correcting optimistic like status due to mismatch"),t(6,b=R);const $=R?1:-1;f=Math.max(0,M()+$)}}catch(T){console.error(`Error toggling like for essay ${i.id}:`,T),t(6,b=!b);const D=b?1:-1;f=Math.max(0,M()-D),p("error",T)}}async function ue(){if(!(i!=null&&i.id))return;console.log(`Share button clicked for essay ${i.id}`);const T=typeof window<"u"?window.location.href:`https://xnham.com/writing/${i.slug}`;try{navigator.share?(await navigator.share({title:i.title,text:i.description||i.excerpt||"Check out this essay",url:T}),console.log("Successfully shared via Web Share API"),t(7,E="Shared!")):(await navigator.clipboard.writeText(T),console.log("URL copied to clipboard"),t(7,E="Link copied!")),O=N()+1,await gt(i.id),r&&clearTimeout(r),r=setTimeout(()=>{t(7,E="")},2e3)}catch(D){console.error("Error sharing essay:",D),t(7,E="Error sharing"),r&&clearTimeout(r),r=setTimeout(()=>{t(7,E="")},2e3),p("error",D)}}return st(()=>{var Q;let T=()=>{},D=null;try{const R=W||((Q=m==null?void 0:m.params)==null?void 0:Q.slug);return console.log(`Essay component mounted with slug: ${R}`),R&&!c&&(!i||i.slug!==R)?ne(R):c&&le(),D=setTimeout(async()=>{try{T=dt($=>{if(v=$,i!=null&&i.id){const me=`${mt.ESSAY}:${i.id}`;t(6,b=(v==null?void 0:v.likes[me])||!1)}})}catch($){console.error("Error in delayed initialization:",$),p("error",$)}},300),()=>{T&&T(),D&&clearTimeout(D),r&&clearTimeout(r)}}catch(R){console.error("Error in Essay onMount:",R),p("error",R)}}),n.$$set=T=>{"slug"in T&&t(14,W=T.slug),"preloadedEssay"in T&&t(15,c=T.preloadedEssay),"serverError"in T&&t(16,w=T.serverError),"$$scope"in T&&t(18,y=T.$$scope)},n.$$.update=()=>{n.$$.dirty&131073&&i&&!A&&(f=i.like_count||0,O=i.share_count||0,V=(i.view_count||0)+1,F=!0,t(17,A=!0)),n.$$.dirty&49153&&W&&!c&&(!(i!=null&&i.slug)||i.slug!==W)&&(console.log(`Slug changed to ${W}, loading essay data`),ne(W)),n.$$.dirty&1&&t(1,e=typeof window<"u"?window.location.href:i!=null&&i.slug?`https://xnham.com/writing/${i.slug}`:""),n.$$.dirty&1&&t(2,l=i!=null&&i.description&&(i!=null&&i.excerpt)?`${i.description} ${i.excerpt}`:(i==null?void 0:i.description)||(i==null?void 0:i.excerpt)||""),n.$$.dirty&7&&t(8,a=i?{"@context":"https://schema.org","@type":"Article",headline:i.title,description:l,datePublished:i.date,author:{"@type":"Person",name:"Wendy Ham",url:"https://xnham.com"},publisher:{"@type":"Person",name:"Wendy Ham",url:"https://xnham.com"},mainEntityOfPage:{"@type":"WebPage","@id":e}}:null)},[i,e,l,H,P,g,b,E,a,M,N,x,de,ue,W,c,w,A,y,o]}class Lt extends lt{constructor(s){super(),it(this,s,At,Wt,xe,{slug:14,preloadedEssay:15,serverError:16})}}function St(n){return{c(){this.h()},l(s){this.h()},h(){document.title="Essay Not Found | Wendy Ham's Weekend Projects"},m:J,p:J,d:J}}function Dt(n){let s,t,e,l,a,m,o,y,p,W,c,w,i,H,P,g,v,b;document.title=s=n[0].essay.title+" | Wendy Ham's Weekend Projects";let E=n[8]&&$e(n);return{c(){t=L(),e=C("meta"),l=L(),a=C("link"),o=L(),E&&E.c(),y=L(),p=C("meta"),W=L(),c=C("meta"),w=L(),i=C("meta"),P=L(),g=C("meta"),v=L(),b=C("meta"),this.h()},l(r){t=S(r),e=I(r,"META",{name:!0,content:!0}),l=S(r),a=I(r,"LINK",{rel:!0,href:!0}),o=S(r),E&&E.l(r),y=S(r),p=I(r,"META",{property:!0,content:!0}),W=S(r),c=I(r,"META",{property:!0,content:!0}),w=S(r),i=I(r,"META",{property:!0,content:!0}),P=S(r),g=I(r,"META",{property:!0,content:!0}),v=S(r),b=I(r,"META",{property:!0,content:!0}),this.h()},h(){d(e,"name","description"),d(e,"content",n[1]),d(a,"rel","canonical"),d(a,"href",m=`https://xnham.com/writing/${n[3].params.slug}`),d(p,"property","og:type"),d(p,"content","article"),d(c,"property","og:url"),d(c,"content",n[2]),d(i,"property","og:title"),d(i,"content",H=`${n[0].essay.title} | Wendy Ham's Weekend Projects`),d(g,"property","og:description"),d(g,"content",n[1]),d(b,"property","og:image"),d(b,"content","https://xnham.com/images/og-image.png")},m(r,f){h(r,t,f),h(r,e,f),h(r,l,f),h(r,a,f),h(r,o,f),E&&E.m(r,f),h(r,y,f),h(r,p,f),h(r,W,f),h(r,c,f),h(r,w,f),h(r,i,f),h(r,P,f),h(r,g,f),h(r,v,f),h(r,b,f)},p(r,f){f&1&&s!==(s=r[0].essay.title+" | Wendy Ham's Weekend Projects")&&(document.title=s),f&2&&d(e,"content",r[1]),f&8&&m!==(m=`https://xnham.com/writing/${r[3].params.slug}`)&&d(a,"href",m),r[8]?E?E.p(r,f):(E=$e(r),E.c(),E.m(y.parentNode,y)):E&&(E.d(1),E=null),f&4&&d(c,"content",r[2]),f&1&&H!==(H=`${r[0].essay.title} | Wendy Ham's Weekend Projects`)&&d(i,"content",H),f&2&&d(g,"content",r[1])},d(r){r&&(u(t),u(e),u(l),u(a),u(o),u(y),u(p),u(W),u(c),u(w),u(i),u(P),u(g),u(v),u(b)),E&&E.d(r)}}}function $e(n){let s,t=`<script type="application/ld+json">${JSON.stringify(n[8])}<\/script>`,e;return{c(){s=new rt(!1),e=se(),this.h()},l(l){s=nt(l,!1),e=se(),this.h()},h(){s.a=e},m(l,a){s.m(t,l,a),h(l,e,a)},p(l,a){a&256&&t!==(t=`<script type="application/ld+json">${JSON.stringify(l[8])}<\/script>`)&&s.p(t)},d(l){l&&(u(e),s.d())}}}function Ht(n){let s,t;return s=new Lt({props:{slug:n[3].params.slug,preloadedEssay:n[0].essay}}),s.$on("error",n[9]),{c(){Se(s.$$.fragment)},l(e){De(s.$$.fragment,e)},m(e,l){He(s,e,l),t=!0},p(e,l){const a={};l&8&&(a.slug=e[3].params.slug),l&1&&(a.preloadedEssay=e[0].essay),s.$set(a)},i(e){t||(U(s.$$.fragment,e),t=!0)},o(e){G(s.$$.fragment,e),t=!1},d(e){Me(s,e)}}}function Mt(n){let s,t,e;function l(o,y){return o[5]>=at?Vt:jt}let a=l(n),m=a(n);return{c(){s=C("div"),t=C("p"),e=B(`There was an error loading the essay. 
        `),m.c(),this.h()},l(o){s=I(o,"DIV",{class:!0});var y=z(s);t=I(y,"P",{});var p=z(t);e=K(p,`There was an error loading the essay. 
        `),m.l(p),p.forEach(u),y.forEach(u),this.h()},h(){d(s,"class","error-message svelte-18qhdlm")},m(o,y){h(o,s,y),k(s,t),k(t,e),m.m(t,null)},p(o,y){a!==(a=l(o))&&(m.d(1),m=a(o),m&&(m.c(),m.m(t,null)))},i:J,o:J,d(o){o&&u(s),m.d()}}}function jt(n){let s;return{c(){s=B("Retrying...")},l(t){s=K(t,"Retrying...")},m(t,e){h(t,s,e)},d(t){t&&u(s)}}}function Vt(n){let s;return{c(){s=B("Please try refreshing the page.")},l(t){s=K(t,"Please try refreshing the page.")},m(t,e){h(t,s,e)},d(t){t&&u(s)}}}function Nt(n){let s,t,e,l,a=`&lt; 
    <a href="/writing"><span class="link-text svelte-18qhdlm">Back to essays</span></a>`,m,o,y,p="<",W,c,w="Back",i,H,P,g,v,b;function E(A,M){return A[0].essay?Dt:St}let r=E(n),f=r(n);const O=[Mt,Ht],V=[];function F(A,M){return A[4]?0:1}return g=F(n),v=V[g]=O[g](n),{c(){f.c(),s=se(),t=L(),e=C("div"),l=C("div"),l.innerHTML=a,m=L(),o=C("a"),y=C("span"),y.textContent=p,W=L(),c=C("span"),c.textContent=w,P=L(),v.c(),this.h()},l(A){const M=et("svelte-1cr3khr",document.head);f.l(M),s=se(),M.forEach(u),t=S(A),e=I(A,"DIV",{class:!0});var N=z(e);l=I(N,"DIV",{class:!0,"data-svelte-h":!0}),ce(l)!=="svelte-r7biw2"&&(l.innerHTML=a),m=S(N),o=I(N,"A",{href:!0,class:!0,"aria-hidden":!0});var x=z(o);y=I(x,"SPAN",{class:!0,"data-svelte-h":!0}),ce(y)!=="svelte-19se4d7"&&(y.textContent=p),W=S(x),c=I(x,"SPAN",{class:!0,"data-svelte-h":!0}),ce(c)!=="svelte-1v4nvf1"&&(c.textContent=w),x.forEach(u),P=S(N),v.l(N),N.forEach(u),this.h()},h(){d(l,"class","back-button svelte-18qhdlm"),d(y,"class","arrow svelte-18qhdlm"),d(c,"class","floating-link-text"),d(o,"href","/writing"),d(o,"class",i="floating-back-button "+(n[7]?"visible":"hidden")+" "+(n[6]?"":"instant-hide")+" svelte-18qhdlm"),d(o,"aria-hidden",H=!n[7]),d(e,"class","container")},m(A,M){f.m(document.head,null),k(document.head,s),h(A,t,M),h(A,e,M),k(e,l),k(e,m),k(e,o),k(o,y),k(o,W),k(o,c),k(e,P),V[g].m(e,null),b=!0},p(A,[M]){r===(r=E(A))&&f?f.p(A,M):(f.d(1),f=r(A),f&&(f.c(),f.m(s.parentNode,s))),(!b||M&192&&i!==(i="floating-back-button "+(A[7]?"visible":"hidden")+" "+(A[6]?"":"instant-hide")+" svelte-18qhdlm"))&&d(o,"class",i),(!b||M&128&&H!==(H=!A[7]))&&d(o,"aria-hidden",H);let N=g;g=F(A),g===N?V[g].p(A,M):(ge(),G(V[N],1,1,()=>{V[N]=null}),ke(),v=V[g],v?v.p(A,M):(v=V[g]=O[g](A),v.c()),U(v,1),v.m(e,null))},i(A){b||(U(v),b=!0)},o(A){G(v),b=!1},d(A){A&&(u(t),u(e)),f.d(A),u(s),V[g].d()}}}const at=2;function Ft(n,s,t){let e,l,a,m;tt(n,ot,P=>t(3,m=P));let{data:o}=s,y=!1,p=0,W=!1,c=!1,w=!1;function i(P){console.error("Error in Essay component:",P.detail),t(4,y=!0),p<at&&(t(5,p++,p),setTimeout(()=>{console.log(`Retry attempt ${p} for Essay component`),t(4,y=!1)},1e3))}function H(){typeof window>"u"||w||(w=!0,requestAnimationFrame(()=>{const P=window.scrollY;t(6,W=P>300),W&&!c?t(7,c=!0):!W&&c&&t(7,c=!1),w=!1}))}return st(()=>{o.essay?Je.set({title:`${o.essay.title} | Wendy Ham's Weekend Projects`,description:e,canonicalUrl:`https://xnham.com/writing/${m.params.slug}`,type:"article",url:typeof window<"u"?window.location.href:`https://xnham.com/writing/${m.params.slug}`}):Je.set({title:"Essay | Wendy Ham's Weekend Projects",description:"Essays about design, coding, and more.",canonicalUrl:`https://xnham.com/writing/${m.params.slug}`,type:"article",url:typeof window<"u"?window.location.href:`https://xnham.com/writing/${m.params.slug}`}),window.addEventListener("scroll",H);const P=g=>{console.error("Global error caught in essay page:",g.error||g.message);const v=String(g.error||g.message);(v.includes("Essay")||v.includes("essay")||v.includes("interaction"))&&(t(4,y=!0),g.preventDefault())};return window.addEventListener("error",P),()=>{window.removeEventListener("scroll",H),window.removeEventListener("error",P)}}),n.$$set=P=>{"data"in P&&t(0,o=P.data)},n.$$.update=()=>{var P,g,v,b;n.$$.dirty&1&&t(1,e=(P=o==null?void 0:o.essay)!=null&&P.description&&((g=o==null?void 0:o.essay)!=null&&g.excerpt)?`${o.essay.description} ${o.essay.excerpt}`:((v=o==null?void 0:o.essay)==null?void 0:v.description)||((b=o==null?void 0:o.essay)==null?void 0:b.excerpt)||""),n.$$.dirty&8&&t(2,l=typeof window<"u"?window.location.href:`https://xnham.com/writing/${m.params.slug}`),n.$$.dirty&7&&t(8,a=o!=null&&o.essay?{"@context":"https://schema.org","@type":"Article",headline:o.essay.title,description:e,datePublished:o.essay.date,image:"https://xnham.com/images/og-image.png",author:{"@type":"Person",name:"Wendy Ham",url:"https://xnham.com"},publisher:{"@type":"Person",name:"Wendy Ham",url:"https://xnham.com"},mainEntityOfPage:{"@type":"WebPage","@id":l}}:null)},[o,e,l,m,y,p,W,c,a,i]}class Gt extends lt{constructor(s){super(),it(this,s,Ft,Nt,xe,{data:0})}}export{Gt as component};
