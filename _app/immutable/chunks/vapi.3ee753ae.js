var ga=Object.defineProperty;var va=(n,t,e)=>t in n?ga(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var I=(n,t,e)=>(va(n,typeof t!="symbol"?t+"":t,e),e);import{g as ya,c as Pr}from"./_commonjsHelpers.23102255.js";function _a(n,t){for(var e=0;e<t.length;e++){const r=t[e];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var nr={};function Lr(n,t){if(n==null)return{};var e,r,i=function(a,l){if(a==null)return{};var u,h,m={},g=Object.keys(a);for(h=0;h<g.length;h++)u=g[h],l.indexOf(u)>=0||(m[u]=a[u]);return m}(n,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)e=s[r],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(n,e)&&(i[e]=n[e])}return i}function fe(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function V(n){return V=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(n)}function bo(n){var t=function(e,r){if(V(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,r||"default");if(V(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}(n,"string");return V(t)==="symbol"?t:String(t)}function Ir(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,bo(r.key),r)}}function me(n,t,e){return t&&Ir(n.prototype,t),e&&Ir(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Ee(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _t(n,t){return _t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},_t(n,t)}function en(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&_t(n,t)}function tn(n,t){if(t&&(V(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ee(n)}function pe(n){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pe(n)}function Ce(n,t,e){return(t=bo(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function jr(n,t,e,r,i,s,a){try{var l=n[s](a),u=l.value}catch(h){return void e(h)}l.done?t(u):Promise.resolve(u).then(r,i)}function P(n){return function(){var t=this,e=arguments;return new Promise(function(r,i){var s=n.apply(t,e);function a(u){jr(s,r,i,a,l,"next",u)}function l(u){jr(s,r,i,a,l,"throw",u)}a(void 0)})}}function Dr(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function Se(n,t){return function(e){if(Array.isArray(e))return e}(n)||function(e,r){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var s,a,l,u,h=[],m=!0,g=!1;try{if(l=(i=i.call(e)).next,r===0){if(Object(i)!==i)return;m=!1}else for(;!(m=(s=l.call(i)).done)&&(h.push(s.value),h.length!==r);m=!0);}catch(v){g=!0,a=v}finally{try{if(!m&&i.return!=null&&(u=i.return(),Object(u)!==u))return}finally{if(g)throw a}}return h}}(n,t)||function(e,r){if(e){if(typeof e=="string")return Dr(e,r);var i=Object.prototype.toString.call(e).slice(8,-1);return i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set"?Array.from(e):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Dr(e,r):void 0}}(n,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var wo,Me={},ba={get exports(){return Me},set exports(n){Me=n}},nt=typeof Reflect=="object"?Reflect:null,Nr=nt&&typeof nt.apply=="function"?nt.apply:function(n,t,e){return Function.prototype.apply.call(n,t,e)};wo=nt&&typeof nt.ownKeys=="function"?nt.ownKeys:Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:function(n){return Object.getOwnPropertyNames(n)};var Rr=Number.isNaN||function(n){return n!=n};function U(){U.init.call(this)}ba.exports=U,Me.once=function(n,t){return new Promise(function(e,r){function i(a){n.removeListener(t,s),r(a)}function s(){typeof n.removeListener=="function"&&n.removeListener("error",i),e([].slice.call(arguments))}Br(n,t,s,{once:!0}),t!=="error"&&function(a,l,u){typeof a.on=="function"&&Br(a,"error",l,u)}(n,i,{once:!0})})},U.EventEmitter=U,U.prototype._events=void 0,U.prototype._eventsCount=0,U.prototype._maxListeners=void 0;var xr=10;function Rt(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}function So(n){return n._maxListeners===void 0?U.defaultMaxListeners:n._maxListeners}function Fr(n,t,e,r){var i,s,a,l;if(Rt(e),(s=n._events)===void 0?(s=n._events=Object.create(null),n._eventsCount=0):(s.newListener!==void 0&&(n.emit("newListener",t,e.listener?e.listener:e),s=n._events),a=s[t]),a===void 0)a=s[t]=e,++n._eventsCount;else if(typeof a=="function"?a=s[t]=r?[e,a]:[a,e]:r?a.unshift(e):a.push(e),(i=So(n))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=n,u.type=t,u.count=a.length,l=u,console&&console.warn&&console.warn(l)}return n}function wa(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function qr(n,t,e){var r={fired:!1,wrapFn:void 0,target:n,type:t,listener:e},i=wa.bind(r);return i.listener=e,r.wrapFn=i,i}function Vr(n,t,e){var r=n._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?e?[i.listener||i]:[i]:e?function(s){for(var a=new Array(s.length),l=0;l<a.length;++l)a[l]=s[l].listener||s[l];return a}(i):Eo(i,i.length)}function Ur(n){var t=this._events;if(t!==void 0){var e=t[n];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}function Eo(n,t){for(var e=new Array(t),r=0;r<t;++r)e[r]=n[r];return e}function Br(n,t,e,r){if(typeof n.on=="function")r.once?n.once(t,e):n.on(t,e);else{if(typeof n.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n);n.addEventListener(t,function i(s){r.once&&n.removeEventListener(t,i),e(s)})}}Object.defineProperty(U,"defaultMaxListeners",{enumerable:!0,get:function(){return xr},set:function(n){if(typeof n!="number"||n<0||Rr(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");xr=n}}),U.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},U.prototype.setMaxListeners=function(n){if(typeof n!="number"||n<0||Rr(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this},U.prototype.getMaxListeners=function(){return So(this)},U.prototype.emit=function(n){for(var t=[],e=1;e<arguments.length;e++)t.push(arguments[e]);var r=n==="error",i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=i[n];if(l===void 0)return!1;if(typeof l=="function")Nr(l,this,t);else{var u=l.length,h=Eo(l,u);for(e=0;e<u;++e)Nr(h[e],this,t)}return!0},U.prototype.addListener=function(n,t){return Fr(this,n,t,!1)},U.prototype.on=U.prototype.addListener,U.prototype.prependListener=function(n,t){return Fr(this,n,t,!0)},U.prototype.once=function(n,t){return Rt(t),this.on(n,qr(this,n,t)),this},U.prototype.prependOnceListener=function(n,t){return Rt(t),this.prependListener(n,qr(this,n,t)),this},U.prototype.removeListener=function(n,t){var e,r,i,s,a;if(Rt(t),(r=this._events)===void 0)return this;if((e=r[n])===void 0)return this;if(e===t||e.listener===t)--this._eventsCount==0?this._events=Object.create(null):(delete r[n],r.removeListener&&this.emit("removeListener",n,e.listener||t));else if(typeof e!="function"){for(i=-1,s=e.length-1;s>=0;s--)if(e[s]===t||e[s].listener===t){a=e[s].listener,i=s;break}if(i<0)return this;i===0?e.shift():function(l,u){for(;u+1<l.length;u++)l[u]=l[u+1];l.pop()}(e,i),e.length===1&&(r[n]=e[0]),r.removeListener!==void 0&&this.emit("removeListener",n,a||t)}return this},U.prototype.off=U.prototype.removeListener,U.prototype.removeAllListeners=function(n){var t,e,r;if((e=this._events)===void 0)return this;if(e.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):e[n]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete e[n]),this;if(arguments.length===0){var i,s=Object.keys(e);for(r=0;r<s.length;++r)(i=s[r])!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(t=e[n])=="function")this.removeListener(n,t);else if(t!==void 0)for(r=t.length-1;r>=0;r--)this.removeListener(n,t[r]);return this},U.prototype.listeners=function(n){return Vr(this,n,!0)},U.prototype.rawListeners=function(n){return Vr(this,n,!1)},U.listenerCount=function(n,t){return typeof n.listenerCount=="function"?n.listenerCount(t):Ur.call(n,t)},U.prototype.listenerCount=Ur,U.prototype.eventNames=function(){return this._eventsCount>0?wo(this._events):[]};var $r=Object.prototype.hasOwnProperty;function Jr(n,t,e){for(e of n.keys())if(ee(e,t))return e}function ee(n,t){var e,r,i;if(n===t)return!0;if(n&&t&&(e=n.constructor)===t.constructor){if(e===Date)return n.getTime()===t.getTime();if(e===RegExp)return n.toString()===t.toString();if(e===Array){if((r=n.length)===t.length)for(;r--&&ee(n[r],t[r]););return r===-1}if(e===Set){if(n.size!==t.size)return!1;for(r of n)if((i=r)&&typeof i=="object"&&!(i=Jr(t,i))||!t.has(i))return!1;return!0}if(e===Map){if(n.size!==t.size)return!1;for(r of n)if((i=r[0])&&typeof i=="object"&&!(i=Jr(t,i))||!ee(r[1],t.get(i)))return!1;return!0}if(e===ArrayBuffer)n=new Uint8Array(n),t=new Uint8Array(t);else if(e===DataView){if((r=n.byteLength)===t.byteLength)for(;r--&&n.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(n)){if((r=n.byteLength)===t.byteLength)for(;r--&&n[r]===t[r];);return r===-1}if(!e||typeof n=="object"){for(e in r=0,n)if($r.call(n,e)&&++r&&!$r.call(t,e)||!(e in t)||!ee(n[e],t[e]))return!1;return Object.keys(t).length===r}}return n!=n&&t!=t}const Sa={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},ko={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},W={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},Z={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Ie={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class b{static getFirstMatch(t,e){const r=e.match(t);return r&&r.length>0&&r[1]||""}static getSecondMatch(t,e){const r=e.match(t);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(t,e,r){if(t.test(e))return r}static getWindowsVersionName(t){switch(t){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(t){const e=t.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(e.push(0),e[0]===10)switch(e[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(t){const e=t.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(e.push(0),!(e[0]===1&&e[1]<5))return e[0]===1&&e[1]<6?"Cupcake":e[0]===1&&e[1]>=6?"Donut":e[0]===2&&e[1]<2?"Eclair":e[0]===2&&e[1]===2?"Froyo":e[0]===2&&e[1]>2?"Gingerbread":e[0]===3?"Honeycomb":e[0]===4&&e[1]<1?"Ice Cream Sandwich":e[0]===4&&e[1]<4?"Jelly Bean":e[0]===4&&e[1]>=4?"KitKat":e[0]===5?"Lollipop":e[0]===6?"Marshmallow":e[0]===7?"Nougat":e[0]===8?"Oreo":e[0]===9?"Pie":void 0}static getVersionPrecision(t){return t.split(".").length}static compareVersions(t,e,r=!1){const i=b.getVersionPrecision(t),s=b.getVersionPrecision(e);let a=Math.max(i,s),l=0;const u=b.map([t,e],h=>{const m=a-b.getVersionPrecision(h),g=h+new Array(m+1).join(".0");return b.map(g.split("."),v=>new Array(20-v.length).join("0")+v).reverse()});for(r&&(l=a-Math.min(i,s)),a-=1;a>=l;){if(u[0][a]>u[1][a])return 1;if(u[0][a]===u[1][a]){if(a===l)return 0;a-=1}else if(u[0][a]<u[1][a])return-1}}static map(t,e){const r=[];let i;if(Array.prototype.map)return Array.prototype.map.call(t,e);for(i=0;i<t.length;i+=1)r.push(e(t[i]));return r}static find(t,e){let r,i;if(Array.prototype.find)return Array.prototype.find.call(t,e);for(r=0,i=t.length;r<i;r+=1){const s=t[r];if(e(s,r))return s}}static assign(t,...e){const r=t;let i,s;if(Object.assign)return Object.assign(t,...e);for(i=0,s=e.length;i<s;i+=1){const a=e[i];typeof a=="object"&&a!==null&&Object.keys(a).forEach(l=>{r[l]=a[l]})}return t}static getBrowserAlias(t){return Sa[t]}static getBrowserTypeByAlias(t){return ko[t]||""}}const $=/version\/(\d+(\.?_?\d+)+)/i,Ea=[{test:[/googlebot/i],describe(n){const t={name:"Googlebot"},e=b.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,n)||b.getFirstMatch($,n);return e&&(t.version=e),t}},{test:[/opera/i],describe(n){const t={name:"Opera"},e=b.getFirstMatch($,n)||b.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/opr\/|opios/i],describe(n){const t={name:"Opera"},e=b.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,n)||b.getFirstMatch($,n);return e&&(t.version=e),t}},{test:[/SamsungBrowser/i],describe(n){const t={name:"Samsung Internet for Android"},e=b.getFirstMatch($,n)||b.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/Whale/i],describe(n){const t={name:"NAVER Whale Browser"},e=b.getFirstMatch($,n)||b.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/MZBrowser/i],describe(n){const t={name:"MZ Browser"},e=b.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,n)||b.getFirstMatch($,n);return e&&(t.version=e),t}},{test:[/focus/i],describe(n){const t={name:"Focus"},e=b.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,n)||b.getFirstMatch($,n);return e&&(t.version=e),t}},{test:[/swing/i],describe(n){const t={name:"Swing"},e=b.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,n)||b.getFirstMatch($,n);return e&&(t.version=e),t}},{test:[/coast/i],describe(n){const t={name:"Opera Coast"},e=b.getFirstMatch($,n)||b.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(n){const t={name:"Opera Touch"},e=b.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,n)||b.getFirstMatch($,n);return e&&(t.version=e),t}},{test:[/yabrowser/i],describe(n){const t={name:"Yandex Browser"},e=b.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,n)||b.getFirstMatch($,n);return e&&(t.version=e),t}},{test:[/ucbrowser/i],describe(n){const t={name:"UC Browser"},e=b.getFirstMatch($,n)||b.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/Maxthon|mxios/i],describe(n){const t={name:"Maxthon"},e=b.getFirstMatch($,n)||b.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/epiphany/i],describe(n){const t={name:"Epiphany"},e=b.getFirstMatch($,n)||b.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/puffin/i],describe(n){const t={name:"Puffin"},e=b.getFirstMatch($,n)||b.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/sleipnir/i],describe(n){const t={name:"Sleipnir"},e=b.getFirstMatch($,n)||b.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/k-meleon/i],describe(n){const t={name:"K-Meleon"},e=b.getFirstMatch($,n)||b.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/micromessenger/i],describe(n){const t={name:"WeChat"},e=b.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,n)||b.getFirstMatch($,n);return e&&(t.version=e),t}},{test:[/qqbrowser/i],describe(n){const t={name:/qqbrowserlite/i.test(n)?"QQ Browser Lite":"QQ Browser"},e=b.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,n)||b.getFirstMatch($,n);return e&&(t.version=e),t}},{test:[/msie|trident/i],describe(n){const t={name:"Internet Explorer"},e=b.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/\sedg\//i],describe(n){const t={name:"Microsoft Edge"},e=b.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/edg([ea]|ios)/i],describe(n){const t={name:"Microsoft Edge"},e=b.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/vivaldi/i],describe(n){const t={name:"Vivaldi"},e=b.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/seamonkey/i],describe(n){const t={name:"SeaMonkey"},e=b.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/sailfish/i],describe(n){const t={name:"Sailfish"},e=b.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,n);return e&&(t.version=e),t}},{test:[/silk/i],describe(n){const t={name:"Amazon Silk"},e=b.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/phantom/i],describe(n){const t={name:"PhantomJS"},e=b.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/slimerjs/i],describe(n){const t={name:"SlimerJS"},e=b.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(n){const t={name:"BlackBerry"},e=b.getFirstMatch($,n)||b.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/(web|hpw)[o0]s/i],describe(n){const t={name:"WebOS Browser"},e=b.getFirstMatch($,n)||b.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/bada/i],describe(n){const t={name:"Bada"},e=b.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/tizen/i],describe(n){const t={name:"Tizen"},e=b.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,n)||b.getFirstMatch($,n);return e&&(t.version=e),t}},{test:[/qupzilla/i],describe(n){const t={name:"QupZilla"},e=b.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,n)||b.getFirstMatch($,n);return e&&(t.version=e),t}},{test:[/firefox|iceweasel|fxios/i],describe(n){const t={name:"Firefox"},e=b.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/electron/i],describe(n){const t={name:"Electron"},e=b.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/MiuiBrowser/i],describe(n){const t={name:"Miui"},e=b.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/chromium/i],describe(n){const t={name:"Chromium"},e=b.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,n)||b.getFirstMatch($,n);return e&&(t.version=e),t}},{test:[/chrome|crios|crmo/i],describe(n){const t={name:"Chrome"},e=b.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/GSA/i],describe(n){const t={name:"Google Search"},e=b.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test(n){const t=!n.test(/like android/i),e=n.test(/android/i);return t&&e},describe(n){const t={name:"Android Browser"},e=b.getFirstMatch($,n);return e&&(t.version=e),t}},{test:[/playstation 4/i],describe(n){const t={name:"PlayStation 4"},e=b.getFirstMatch($,n);return e&&(t.version=e),t}},{test:[/safari|applewebkit/i],describe(n){const t={name:"Safari"},e=b.getFirstMatch($,n);return e&&(t.version=e),t}},{test:[/.*/i],describe(n){const t=n.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:b.getFirstMatch(t,n),version:b.getSecondMatch(t,n)}}}];var ka=[{test:[/Roku\/DVP/],describe(n){const t=b.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,n);return{name:Z.Roku,version:t}}},{test:[/windows phone/i],describe(n){const t=b.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,n);return{name:Z.WindowsPhone,version:t}}},{test:[/windows /i],describe(n){const t=b.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,n),e=b.getWindowsVersionName(t);return{name:Z.Windows,version:t,versionName:e}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(n){const t={name:Z.iOS},e=b.getSecondMatch(/(Version\/)(\d[\d.]+)/,n);return e&&(t.version=e),t}},{test:[/macintosh/i],describe(n){const t=b.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,n).replace(/[_\s]/g,"."),e=b.getMacOSVersionName(t),r={name:Z.MacOS,version:t};return e&&(r.versionName=e),r}},{test:[/(ipod|iphone|ipad)/i],describe(n){const t=b.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,n).replace(/[_\s]/g,".");return{name:Z.iOS,version:t}}},{test(n){const t=!n.test(/like android/i),e=n.test(/android/i);return t&&e},describe(n){const t=b.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,n),e=b.getAndroidVersionName(t),r={name:Z.Android,version:t};return e&&(r.versionName=e),r}},{test:[/(web|hpw)[o0]s/i],describe(n){const t=b.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,n),e={name:Z.WebOS};return t&&t.length&&(e.version=t),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(n){const t=b.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,n)||b.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,n)||b.getFirstMatch(/\bbb(\d+)/i,n);return{name:Z.BlackBerry,version:t}}},{test:[/bada/i],describe(n){const t=b.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,n);return{name:Z.Bada,version:t}}},{test:[/tizen/i],describe(n){const t=b.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,n);return{name:Z.Tizen,version:t}}},{test:[/linux/i],describe:()=>({name:Z.Linux})},{test:[/CrOS/],describe:()=>({name:Z.ChromeOS})},{test:[/PlayStation 4/],describe(n){const t=b.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,n);return{name:Z.PlayStation4,version:t}}}],Ta=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(n){const t=b.getFirstMatch(/(can-l01)/i,n)&&"Nova",e={type:W.mobile,vendor:"Huawei"};return t&&(e.model=t),e}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:W.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:W.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:W.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:W.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:W.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:W.tablet})},{test(n){const t=n.test(/ipod|iphone/i),e=n.test(/like (ipod|iphone)/i);return t&&!e},describe(n){const t=b.getFirstMatch(/(ipod|iphone)/i,n);return{type:W.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:W.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:W.mobile})},{test:n=>n.getBrowserName(!0)==="blackberry",describe:()=>({type:W.mobile,vendor:"BlackBerry"})},{test:n=>n.getBrowserName(!0)==="bada",describe:()=>({type:W.mobile})},{test:n=>n.getBrowserName()==="windows phone",describe:()=>({type:W.mobile,vendor:"Microsoft"})},{test(n){const t=Number(String(n.getOSVersion()).split(".")[0]);return n.getOSName(!0)==="android"&&t>=3},describe:()=>({type:W.tablet})},{test:n=>n.getOSName(!0)==="android",describe:()=>({type:W.mobile})},{test:n=>n.getOSName(!0)==="macos",describe:()=>({type:W.desktop,vendor:"Apple"})},{test:n=>n.getOSName(!0)==="windows",describe:()=>({type:W.desktop})},{test:n=>n.getOSName(!0)==="linux",describe:()=>({type:W.desktop})},{test:n=>n.getOSName(!0)==="playstation 4",describe:()=>({type:W.tv})},{test:n=>n.getOSName(!0)==="roku",describe:()=>({type:W.tv})}],Ca=[{test:n=>n.getBrowserName(!0)==="microsoft edge",describe(n){if(/\sedg\//i.test(n))return{name:Ie.Blink};const t=b.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,n);return{name:Ie.EdgeHTML,version:t}}},{test:[/trident/i],describe(n){const t={name:Ie.Trident},e=b.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:n=>n.test(/presto/i),describe(n){const t={name:Ie.Presto},e=b.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test(n){const t=n.test(/gecko/i),e=n.test(/like gecko/i);return t&&!e},describe(n){const t={name:Ie.Gecko},e=b.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:Ie.Blink})},{test:[/(apple)?webkit/i],describe(n){const t={name:Ie.WebKit},e=b.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,n);return e&&(t.version=e),t}}];class Gr{constructor(t,e=!1){if(t==null||t==="")throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},e!==!0&&this.parse()}getUA(){return this._ua}test(t){return t.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const t=b.find(Ea,e=>{if(typeof e.test=="function")return e.test(this);if(e.test instanceof Array)return e.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const t=b.find(ka,e=>{if(typeof e.test=="function")return e.test(this);if(e.test instanceof Array)return e.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}getOSName(t){const{name:e}=this.getOS();return t?String(e).toLowerCase()||"":e||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(t=!1){const{type:e}=this.getPlatform();return t?String(e).toLowerCase()||"":e||""}parsePlatform(){this.parsedResult.platform={};const t=b.find(Ta,e=>{if(typeof e.test=="function")return e.test(this);if(e.test instanceof Array)return e.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const t=b.find(Ca,e=>{if(typeof e.test=="function")return e.test(this);if(e.test instanceof Array)return e.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return b.assign({},this.parsedResult)}satisfies(t){const e={};let r=0;const i={};let s=0;if(Object.keys(t).forEach(a=>{const l=t[a];typeof l=="string"?(i[a]=l,s+=1):typeof l=="object"&&(e[a]=l,r+=1)}),r>0){const a=Object.keys(e),l=b.find(a,h=>this.isOS(h));if(l){const h=this.satisfies(e[l]);if(h!==void 0)return h}const u=b.find(a,h=>this.isPlatform(h));if(u){const h=this.satisfies(e[u]);if(h!==void 0)return h}}if(s>0){const a=Object.keys(i),l=b.find(a,u=>this.isBrowser(u,!0));if(l!==void 0)return this.compareVersion(i[l])}}isBrowser(t,e=!1){const r=this.getBrowserName().toLowerCase();let i=t.toLowerCase();const s=b.getBrowserTypeByAlias(i);return e&&s&&(i=s.toLowerCase()),i===r}compareVersion(t){let e=[0],r=t,i=!1;const s=this.getBrowserVersion();if(typeof s=="string")return t[0]===">"||t[0]==="<"?(r=t.substr(1),t[1]==="="?(i=!0,r=t.substr(2)):e=[],t[0]===">"?e.push(1):e.push(-1)):t[0]==="="?r=t.substr(1):t[0]==="~"&&(i=!0,r=t.substr(1)),e.indexOf(b.compareVersions(s,r,i))>-1}isOS(t){return this.getOSName(!0)===String(t).toLowerCase()}isPlatform(t){return this.getPlatformType(!0)===String(t).toLowerCase()}isEngine(t){return this.getEngineName(!0)===String(t).toLowerCase()}is(t,e=!1){return this.isBrowser(t,e)||this.isOS(t)||this.isPlatform(t)}some(t=[]){return t.some(e=>this.is(e))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Ma{static getParser(t,e=!1){if(typeof t!="string")throw new Error("UserAgent should be a string");return new Gr(t,e)}static parse(t){return new Gr(t).getResult()}static get BROWSER_MAP(){return ko}static get ENGINE_MAP(){return Ie}static get OS_MAP(){return Z}static get PLATFORMS_MAP(){return W}}function nn(){return Date.now()+Math.random().toString()}function ht(){throw new Error("Method must be implemented in subclass")}function To(n,t){return t!=null&&t.proxyUrl?t.proxyUrl+(t.proxyUrl.slice(-1)==="/"?"":"/")+n.substring(8):n}function $t(n){return n!=null&&n.callObjectBundleUrlOverride?n.callObjectBundleUrlOverride:To("https://c.daily.co/call-machine/versioned/".concat("0.75.2","/static/call-machine-object-bundle.js"),n)}function Jt(n){try{new URL(n)}catch{return!1}return!0}const Co=Object.prototype.toString;function rr(n){switch(Co.call(n)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Ke(n,Error)}}function lt(n,t){return Co.call(n)===`[object ${t}]`}function Mo(n){return lt(n,"ErrorEvent")}function Yr(n){return lt(n,"DOMError")}function Ae(n){return lt(n,"String")}function ir(n){return typeof n=="object"&&n!==null&&"__sentry_template_string__"in n&&"__sentry_template_values__"in n}function Cn(n){return n===null||ir(n)||typeof n!="object"&&typeof n!="function"}function st(n){return lt(n,"Object")}function rn(n){return typeof Event<"u"&&Ke(n,Event)}function on(n){return!!(n&&n.then&&typeof n.then=="function")}function Ke(n,t){try{return n instanceof t}catch{return!1}}function Ao(n){return!(typeof n!="object"||n===null||!n.__isVue&&!n._isVue)}function rt(n,t=0){return typeof n!="string"||t===0||n.length<=t?n:`${n.slice(0,t)}...`}function Wr(n,t){if(!Array.isArray(n))return"";const e=[];for(let r=0;r<n.length;r++){const i=n[r];try{Ao(i)?e.push("[VueViewModel]"):e.push(String(i))}catch{e.push("[value cannot be serialized]")}}return e.join(t)}function Aa(n,t,e=!1){return!!Ae(n)&&(lt(t,"RegExp")?t.test(n):!!Ae(t)&&(e?n===t:n.includes(t)))}function Tt(n,t=[],e=!1){return t.some(r=>Aa(n,r,e))}function Oa(n,t,e=250,r,i,s,a){if(!(s.exception&&s.exception.values&&a&&Ke(a.originalException,Error)))return;const l=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;var u,h;l&&(s.exception.values=(u=Mn(n,t,i,a.originalException,r,s.exception.values,l,0),h=e,u.map(m=>(m.value&&(m.value=rt(m.value,h)),m))))}function Mn(n,t,e,r,i,s,a,l){if(s.length>=e+1)return s;let u=[...s];if(Ke(r[i],Error)){zr(a,l);const h=n(t,r[i]),m=u.length;Hr(h,i,m,l),u=Mn(n,t,e,r[i],i,[h,...u],h,m)}return Array.isArray(r.errors)&&r.errors.forEach((h,m)=>{if(Ke(h,Error)){zr(a,l);const g=n(t,h),v=u.length;Hr(g,`errors[${m}]`,v,l),u=Mn(n,t,e,h,i,[g,...u],g,v)}}),u}function zr(n,t){n.mechanism=n.mechanism||{type:"generic",handled:!0},n.mechanism={...n.mechanism,...n.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function Hr(n,t,e,r){n.mechanism=n.mechanism||{type:"generic",handled:!0},n.mechanism={...n.mechanism,type:"chained",source:t,exception_id:e,parent_id:r}}function Qr(n){return n===void 0?void 0:n>=400&&n<500?"warning":n>=500?"error":void 0}const Qe="8.33.1",F=globalThis;function Gt(n,t,e){const r=e||F,i=r.__SENTRY__=r.__SENTRY__||{},s=i[Qe]=i[Qe]||{};return s[n]||(s[n]=t())}const or=F;function Oo(n,t={}){if(!n)return"<unknown>";try{let e=n;const r=5,i=[];let s=0,a=0;const l=" > ",u=l.length;let h;const m=Array.isArray(t)?t:t.keyAttrs,g=!Array.isArray(t)&&t.maxStringLength||80;for(;e&&s++<r&&(h=Pa(e,m),!(h==="html"||s>1&&a+i.length*u+h.length>=g));)i.push(h),a+=h.length,e=e.parentNode;return i.reverse().join(l)}catch{return"<unknown>"}}function Pa(n,t){const e=n,r=[];if(!e||!e.tagName)return"";if(or.HTMLElement&&e instanceof HTMLElement&&e.dataset){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}r.push(e.tagName.toLowerCase());const i=t&&t.length?t.filter(a=>e.getAttribute(a)).map(a=>[a,e.getAttribute(a)]):null;if(i&&i.length)i.forEach(a=>{r.push(`[${a[0]}="${a[1]}"]`)});else{e.id&&r.push(`#${e.id}`);const a=e.className;if(a&&Ae(a)){const l=a.split(/\s+/);for(const u of l)r.push(`.${u}`)}}const s=["aria-label","type","name","title","alt"];for(const a of s){const l=e.getAttribute(a);l&&r.push(`[${a}="${l}"]`)}return r.join("")}const St=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,An=["debug","info","warn","error","log","assert","trace"],Yt={};function sr(n){if(!("console"in F))return n();const t=F.console,e={},r=Object.keys(Yt);r.forEach(i=>{const s=Yt[i];e[i]=t[i],t[i]=s});try{return n()}finally{r.forEach(i=>{t[i]=e[i]})}}const L=Gt("logger",function(){let n=!1;const t={enable:()=>{n=!0},disable:()=>{n=!1},isEnabled:()=>n};return St?An.forEach(e=>{t[e]=(...r)=>{n&&sr(()=>{F.console[e](`Sentry Logger [${e}]:`,...r)})}}):An.forEach(e=>{t[e]=()=>{}}),t}),La=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Wt(n,t=!1){const{host:e,path:r,pass:i,port:s,projectId:a,protocol:l,publicKey:u}=n;return`${l}://${u}${t&&i?`:${i}`:""}@${e}${s?`:${s}`:""}/${r&&`${r}/`}${a}`}function Kr(n){return{protocol:n.protocol,publicKey:n.publicKey||"",pass:n.pass||"",host:n.host,port:n.port||"",path:n.path||"",projectId:n.projectId}}function Ia(n){const t=typeof n=="string"?function(e){const r=La.exec(e);if(!r)return void sr(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});const[i,s,a="",l="",u="",h=""]=r.slice(1);let m="",g=h;const v=g.split("/");if(v.length>1&&(m=v.slice(0,-1).join("/"),g=v.pop()),g){const w=g.match(/^\d+/);w&&(g=w[0])}return Kr({host:l,pass:a,path:m,projectId:g,port:u,protocol:i,publicKey:s})}(n):Kr(n);if(t&&function(e){if(!St)return!0;const{port:r,projectId:i,protocol:s}=e;return!(["protocol","publicKey","host","projectId"].find(a=>!e[a]&&(L.error(`Invalid Sentry Dsn: ${a} missing`),!0))||(i.match(/^\d+$/)?function(a){return a==="http"||a==="https"}(s)?r&&isNaN(parseInt(r,10))&&(L.error(`Invalid Sentry Dsn: Invalid port ${r}`),1):(L.error(`Invalid Sentry Dsn: Invalid protocol ${s}`),1):(L.error(`Invalid Sentry Dsn: Invalid projectId ${i}`),1)))}(t))return t}class _e extends Error{constructor(t,e="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=e}}function re(n,t,e){if(!(t in n))return;const r=n[t],i=e(r);typeof i=="function"&&Po(i,r),n[t]=i}function Xe(n,t,e){try{Object.defineProperty(n,t,{value:e,writable:!0,configurable:!0})}catch{St&&L.log(`Failed to add non-enumerable property "${t}" to object`,n)}}function Po(n,t){try{const e=t.prototype||{};n.prototype=t.prototype=e,Xe(n,"__sentry_original__",t)}catch{}}function ar(n){return n.__sentry_original__}function Lo(n){if(rr(n))return{message:n.message,name:n.name,stack:n.stack,...Zr(n)};if(rn(n)){const t={type:n.type,target:Xr(n.target),currentTarget:Xr(n.currentTarget),...Zr(n)};return typeof CustomEvent<"u"&&Ke(n,CustomEvent)&&(t.detail=n.detail),t}return n}function Xr(n){try{return t=n,typeof Element<"u"&&Ke(t,Element)?Oo(n):Object.prototype.toString.call(n)}catch{return"<unknown>"}var t}function Zr(n){if(typeof n=="object"&&n!==null){const t={};for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t}return{}}function ue(n){return On(n,new Map)}function On(n,t){if(function(e){if(!st(e))return!1;try{const r=Object.getPrototypeOf(e).constructor.name;return!r||r==="Object"}catch{return!0}}(n)){const e=t.get(n);if(e!==void 0)return e;const r={};t.set(n,r);for(const i of Object.getOwnPropertyNames(n))n[i]!==void 0&&(r[i]=On(n[i],t));return r}if(Array.isArray(n)){const e=t.get(n);if(e!==void 0)return e;const r=[];return t.set(n,r),n.forEach(i=>{r.push(On(i,t))}),r}return n}const We="?",ei=/\(error: (.*)\)/,ti=/captureMessage|captureException/;function Ct(n){return n[n.length-1]||{}}const ni="<anonymous>";function qe(n){try{return n&&typeof n=="function"&&n.name||ni}catch{return ni}}function ri(n){const t=n.exception;if(t){const e=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&e.push(...r.stacktrace.frames)}),e}catch{return}}}const xt={},ii={};function ze(n,t){xt[n]=xt[n]||[],xt[n].push(t)}function He(n,t){ii[n]||(t(),ii[n]=!0)}function de(n,t){const e=n&&xt[n];if(e)for(const r of e)try{r(t)}catch(i){St&&L.error(`Error while triggering instrumentation handler.
Type: ${n}
Name: ${qe(r)}
Error:`,i)}}function ja(){"console"in F&&An.forEach(function(n){n in F.console&&re(F.console,n,function(t){return Yt[n]=t,function(...e){de("console",{args:e,level:n});const r=Yt[n];r&&r.apply(F.console,e)}})})}const un=F;function Pn(n){return n&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(n.toString())}function Da(){if(typeof EdgeRuntime=="string")return!0;if(!function(){if(!("fetch"in un))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}())return!1;if(Pn(un.fetch))return!0;let n=!1;const t=un.document;if(t&&typeof t.createElement=="function")try{const e=t.createElement("iframe");e.hidden=!0,t.head.appendChild(e),e.contentWindow&&e.contentWindow.fetch&&(n=Pn(e.contentWindow.fetch)),t.head.removeChild(e)}catch(e){St&&L.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return n}function Et(){return Date.now()/1e3}const xe=function(){const{performance:n}=F;if(!n||!n.now)return Et;const t=Date.now()-n.now(),e=n.timeOrigin==null?t:n.timeOrigin;return()=>(e+n.now())/1e3}();function Na(n,t){const e="fetch";ze(e,n),He(e,()=>function(r,i=!1){i&&!Da()||re(F,"fetch",function(s){return function(...a){const{method:l,url:u}=function(g){if(g.length===0)return{method:"GET",url:""};if(g.length===2){const[w,_]=g;return{url:oi(w),method:Ln(_,"method")?String(_.method).toUpperCase():"GET"}}const v=g[0];return{url:oi(v),method:Ln(v,"method")?String(v.method).toUpperCase():"GET"}}(a),h={args:a,fetchData:{method:l,url:u},startTimestamp:1e3*xe()};r||de("fetch",{...h});const m=new Error().stack;return s.apply(F,a).then(async g=>(r?r(g):de("fetch",{...h,endTimestamp:1e3*xe(),response:g}),g),g=>{throw de("fetch",{...h,endTimestamp:1e3*xe(),error:g}),rr(g)&&g.stack===void 0&&(g.stack=m,Xe(g,"framesToPop",1)),g})}})}(void 0,t))}function Ln(n,t){return!!n&&typeof n=="object"&&!!n[t]}function oi(n){return typeof n=="string"?n:n?Ln(n,"url")?n.url:n.toString?n.toString():"":""}(()=>{const{performance:n}=F;if(!n||!n.now)return;const t=36e5,e=n.now(),r=Date.now(),i=n.timeOrigin?Math.abs(n.timeOrigin+e-r):t,s=i<t,a=n.timing&&n.timing.navigationStart,l=typeof a=="number"?Math.abs(a+e-r):t;(s||l<t)&&i<=l&&n.timeOrigin})();let Mt=null;function Ra(){Mt=F.onerror,F.onerror=function(n,t,e,r,i){return de("error",{column:r,error:i,line:e,msg:n,url:t}),!(!Mt||Mt.__SENTRY_LOADER__)&&Mt.apply(this,arguments)},F.onerror.__SENTRY_INSTRUMENTED__=!0}let At=null;function xa(){At=F.onunhandledrejection,F.onunhandledrejection=function(n){return de("unhandledrejection",n),!(At&&!At.__SENTRY_LOADER__)||At.apply(this,arguments)},F.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function he(){const n=F,t=n.crypto||n.msCrypto;let e=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(e=()=>{const r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,r=>(r^(15&e())>>r/4).toString(16))}function Io(n){return n.exception&&n.exception.values?n.exception.values[0]:void 0}function De(n){const{message:t,event_id:e}=n;if(t)return t;const r=Io(n);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||e||"<unknown>":e||"<unknown>"}function In(n,t,e){const r=n.exception=n.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=t||""),s.type||(s.type=e||"Error")}function bt(n,t){const e=Io(n);if(!e)return;const r=e.mechanism;if(e.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const i={...r&&r.data,...t.data};e.mechanism.data=i}}function si(n){if(n&&n.__sentry_captured__)return!0;try{Xe(n,"__sentry_captured__",!0)}catch{}return!1}function Ne(n,t=100,e=1/0){try{return jn("",n,t,e)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function jo(n,t=3,e=102400){const r=Ne(n,t);return i=r,function(s){return~-encodeURI(s).split(/%..|./).length}(JSON.stringify(i))>e?jo(n,t-1,e):r;var i}function jn(n,t,e=1/0,r=1/0,i=function(){const s=typeof WeakSet=="function",a=s?new WeakSet:[];return[function(l){if(s)return!!a.has(l)||(a.add(l),!1);for(let u=0;u<a.length;u++)if(a[u]===l)return!0;return a.push(l),!1},function(l){if(s)a.delete(l);else for(let u=0;u<a.length;u++)if(a[u]===l){a.splice(u,1);break}}]}()){const[s,a]=i;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const l=function(w,_){try{if(w==="domain"&&_&&typeof _=="object"&&_._events)return"[Domain]";if(w==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&_===global)return"[Global]";if(typeof window<"u"&&_===window)return"[Window]";if(typeof document<"u"&&_===document)return"[Document]";if(Ao(_))return"[VueViewModel]";if(st(E=_)&&"nativeEvent"in E&&"preventDefault"in E&&"stopPropagation"in E)return"[SyntheticEvent]";if(typeof _=="number"&&!Number.isFinite(_))return`[${_}]`;if(typeof _=="function")return`[Function: ${qe(_)}]`;if(typeof _=="symbol")return`[${String(_)}]`;if(typeof _=="bigint")return`[BigInt: ${String(_)}]`;const T=function(O){const j=Object.getPrototypeOf(O);return j?j.constructor.name:"null prototype"}(_);return/^HTML(\w*)Element$/.test(T)?`[HTMLElement: ${T}]`:`[object ${T}]`}catch(T){return`**non-serializable** (${T})`}var E}(n,t);if(!l.startsWith("[object "))return l;if(t.__sentry_skip_normalization__)return t;const u=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:e;if(u===0)return l.replace("object ","");if(s(t))return"[Circular ~]";const h=t;if(h&&typeof h.toJSON=="function")try{return jn("",h.toJSON(),u-1,r,i)}catch{}const m=Array.isArray(t)?[]:{};let g=0;const v=Lo(t);for(const w in v){if(!Object.prototype.hasOwnProperty.call(v,w))continue;if(g>=r){m[w]="[MaxProperties ~]";break}const _=v[w];m[w]=jn(w,_,u-1,r,i),g++}return a(t),m}var Te;function Ze(n){return new oe(t=>{t(n)})}function zt(n){return new oe((t,e)=>{e(n)})}(function(n){n[n.PENDING=0]="PENDING",n[n.RESOLVED=1]="RESOLVED",n[n.REJECTED=2]="REJECTED"})(Te||(Te={}));class oe{constructor(t){oe.prototype.__init.call(this),oe.prototype.__init2.call(this),oe.prototype.__init3.call(this),oe.prototype.__init4.call(this),this._state=Te.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(e){this._reject(e)}}then(t,e){return new oe((r,i)=>{this._handlers.push([!1,s=>{if(t)try{r(t(s))}catch(a){i(a)}else r(s)},s=>{if(e)try{r(e(s))}catch(a){i(a)}else i(s)}]),this._executeHandlers()})}catch(t){return this.then(e=>e,t)}finally(t){return new oe((e,r)=>{let i,s;return this.then(a=>{s=!1,i=a,t&&t()},a=>{s=!0,i=a,t&&t()}).then(()=>{s?r(i):e(i)})})}__init(){this._resolve=t=>{this._setResult(Te.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(Te.REJECTED,t)}}__init3(){this._setResult=(t,e)=>{this._state===Te.PENDING&&(on(e)?e.then(this._resolve,this._reject):(this._state=t,this._value=e,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Te.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(e=>{e[0]||(this._state===Te.RESOLVED&&e[1](this._value),this._state===Te.REJECTED&&e[2](this._value),e[0]=!0)})}}}function Fa(n){const t=[];function e(r){return t.splice(t.indexOf(r),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(r){if(!(n===void 0||t.length<n))return zt(new _e("Not adding Promise because buffer limit was reached."));const i=r();return t.indexOf(i)===-1&&t.push(i),i.then(()=>e(i)).then(null,()=>e(i).then(null,()=>{})),i},drain:function(r){return new oe((i,s)=>{let a=t.length;if(!a)return i(!0);const l=setTimeout(()=>{r&&r>0&&i(!1)},r);t.forEach(u=>{Ze(u).then(()=>{--a||(clearTimeout(l),i(!0))},s)})})}}}function dn(n){if(!n)return{};const t=n.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const e=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:e,hash:r,relative:t[5]+e+r}}const qa=["fatal","error","warning","log","info","debug"];function Va(n){return n==="warn"?"warning":qa.includes(n)?n:"log"}const Ua=/^sentry-/;function Ba(n){const t=function(r){if(!(!r||!Ae(r)&&!Array.isArray(r)))return Array.isArray(r)?r.reduce((i,s)=>{const a=ai(s);return Object.entries(a).forEach(([l,u])=>{i[l]=u}),i},{}):ai(r)}(n);if(!t)return;const e=Object.entries(t).reduce((r,[i,s])=>(i.match(Ua)&&(r[i.slice(7)]=s),r),{});return Object.keys(e).length>0?e:void 0}function ai(n){return n.split(",").map(t=>t.split("=").map(e=>decodeURIComponent(e.trim()))).reduce((t,[e,r])=>(e&&r&&(t[e]=r),t),{})}function wt(n,t=[]){return[n,t]}function $a(n,t){const[e,r]=n;return[e,[...r,t]]}function ci(n,t){const e=n[1];for(const r of e)if(t(r,r[0].type))return!0;return!1}function Dn(n){return F.__SENTRY__&&F.__SENTRY__.encodePolyfill?F.__SENTRY__.encodePolyfill(n):new TextEncoder().encode(n)}function Ja(n){const[t,e]=n;let r=JSON.stringify(t);function i(s){typeof r=="string"?r=typeof s=="string"?r+s:[Dn(r),s]:r.push(typeof s=="string"?Dn(s):s)}for(const s of e){const[a,l]=s;if(i(`
${JSON.stringify(a)}
`),typeof l=="string"||l instanceof Uint8Array)i(l);else{let u;try{u=JSON.stringify(l)}catch{u=JSON.stringify(Ne(l))}i(u)}}return typeof r=="string"?r:function(s){const a=s.reduce((h,m)=>h+m.length,0),l=new Uint8Array(a);let u=0;for(const h of s)l.set(h,u),u+=h.length;return l}(r)}function Ga(n){const t=typeof n.data=="string"?Dn(n.data):n.data;return[ue({type:"attachment",length:t.length,filename:n.filename,content_type:n.contentType,attachment_type:n.attachmentType}),t]}const Ya={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function li(n){return Ya[n]}function Do(n){if(!n||!n.sdk)return;const{name:t,version:e}=n.sdk;return{name:t,version:e}}function Wa(n,{statusCode:t,headers:e},r=Date.now()){const i={...n},s=e&&e["x-sentry-rate-limits"],a=e&&e["retry-after"];if(s)for(const l of s.trim().split(",")){const[u,h,,,m]=l.split(":",5),g=parseInt(u,10),v=1e3*(isNaN(g)?60:g);if(h)for(const w of h.split(";"))w==="metric_bucket"&&m&&!m.split(";").includes("custom")||(i[w]=r+v);else i.all=r+v}else a?i.all=r+function(l,u=Date.now()){const h=parseInt(`${l}`,10);if(!isNaN(h))return 1e3*h;const m=Date.parse(`${l}`);return isNaN(m)?6e4:m-u}(a,r):t===429&&(i.all=r+6e4);return i}function ui(){return{traceId:he(),spanId:he().substring(16)}}const Ot=F,G=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function sn(){return cr(F),F}function cr(n){const t=n.__SENTRY__=n.__SENTRY__||{};return t.version=t.version||Qe,t[Qe]=t[Qe]||{}}function Nn(n,t={}){if(t.user&&(!n.ipAddress&&t.user.ip_address&&(n.ipAddress=t.user.ip_address),n.did||t.did||(n.did=t.user.id||t.user.email||t.user.username)),n.timestamp=t.timestamp||xe(),t.abnormal_mechanism&&(n.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(n.ignoreDuration=t.ignoreDuration),t.sid&&(n.sid=t.sid.length===32?t.sid:he()),t.init!==void 0&&(n.init=t.init),!n.did&&t.did&&(n.did=`${t.did}`),typeof t.started=="number"&&(n.started=t.started),n.ignoreDuration)n.duration=void 0;else if(typeof t.duration=="number")n.duration=t.duration;else{const e=n.timestamp-n.started;n.duration=e>=0?e:0}t.release&&(n.release=t.release),t.environment&&(n.environment=t.environment),!n.ipAddress&&t.ipAddress&&(n.ipAddress=t.ipAddress),!n.userAgent&&t.userAgent&&(n.userAgent=t.userAgent),typeof t.errors=="number"&&(n.errors=t.errors),t.status&&(n.status=t.status)}const Rn="_sentrySpan";function di(n,t){t?Xe(n,Rn,t):delete n[Rn]}function hi(n){return n[Rn]}class lr{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=ui()}clone(){const t=new lr;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,di(t,hi(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Nn(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,e){return this._tags={...this._tags,[t]:e},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,e){return this._extra={...this._extra,[t]:e},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,e){return e===null?delete this._contexts[t]:this._contexts[t]=e,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const e=typeof t=="function"?t(this):t,[r,i]=e instanceof Pe?[e.getScopeData(),e.getRequestSession()]:st(e)?[t,t.requestSession]:[],{tags:s,extra:a,user:l,contexts:u,level:h,fingerprint:m=[],propagationContext:g}=r||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...a},this._contexts={...this._contexts,...u},l&&Object.keys(l).length&&(this._user=l),h&&(this._level=h),m.length&&(this._fingerprint=m),g&&(this._propagationContext=g),i&&(this._requestSession=i),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,di(this,void 0),this._attachments=[],this._propagationContext=ui(),this._notifyScopeListeners(),this}addBreadcrumb(t,e){const r=typeof e=="number"?e:100;if(r<=0)return this;const i={timestamp:Et(),...t},s=this._breadcrumbs;return s.push(i),this._breadcrumbs=s.length>r?s.slice(-r):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:hi(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,e){const r=e&&e.event_id?e.event_id:he();if(!this._client)return L.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:i,...e,event_id:r},this),r}captureMessage(t,e,r){const i=r&&r.event_id?r.event_id:he();if(!this._client)return L.warn("No client configured on scope - will not capture message!"),i;const s=new Error(t);return this._client.captureMessage(t,e,{originalException:t,syntheticException:s,...r,event_id:i},this),i}captureEvent(t,e){const r=e&&e.event_id?e.event_id:he();return this._client?(this._client.captureEvent(t,{...e,event_id:r},this),r):(L.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}const Pe=lr;class za{constructor(t,e){let r,i;r=t||new Pe,i=e||new Pe,this._stack=[{scope:r}],this._isolationScope=i}withScope(t){const e=this._pushScope();let r;try{r=t(e)}catch(i){throw this._popScope(),i}return on(r)?r.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function at(){const n=cr(sn());return n.stack=n.stack||new za(Gt("defaultCurrentScope",()=>new Pe),Gt("defaultIsolationScope",()=>new Pe))}function Ha(n){return at().withScope(n)}function Qa(n,t){const e=at();return e.withScope(()=>(e.getStackTop().scope=n,t(n)))}function pi(n){return at().withScope(()=>n(at().getIsolationScope()))}function ur(n){const t=cr(n);return t.acs?t.acs:{withIsolationScope:pi,withScope:Ha,withSetScope:Qa,withSetIsolationScope:(e,r)=>pi(r),getCurrentScope:()=>at().getScope(),getIsolationScope:()=>at().getIsolationScope()}}function dr(){return ur(sn()).getCurrentScope()}function No(){return ur(sn()).getIsolationScope()}function te(){return dr().getClient()}function Ka(n){const t=n._sentryMetrics;if(!t)return;const e={};for(const[,[r,i]]of t)(e[r]||(e[r]=[])).push(ue(i));return e}function Xa(n){const{spanId:t,traceId:e}=n.spanContext(),{parent_span_id:r}=Ht(n);return ue({parent_span_id:r,span_id:t,trace_id:e})}function fi(n){return typeof n=="number"?mi(n):Array.isArray(n)?n[0]+n[1]/1e9:n instanceof Date?mi(n.getTime()):xe()}function mi(n){return n>9999999999?n/1e3:n}function Ht(n){if(function(t){return typeof t.getSpanJSON=="function"}(n))return n.getSpanJSON();try{const{spanId:t,traceId:e}=n.spanContext();if(function(r){const i=r;return!!(i.attributes&&i.startTime&&i.name&&i.endTime&&i.status)}(n)){const{attributes:r,startTime:i,name:s,endTime:a,parentSpanId:l,status:u}=n;return ue({span_id:t,trace_id:e,data:r,description:s,parent_span_id:l,start_timestamp:fi(i),timestamp:fi(a)||void 0,status:Za(u),op:r["sentry.op"],origin:r["sentry.origin"],_metrics_summary:Ka(n)})}return{span_id:t,trace_id:e}}catch{return{}}}function Za(n){if(n&&n.code!==0)return n.code===1?"ok":n.message||"unknown_error"}function Ro(n){return n._sentryRootSpan||n}const xo="production";function Fo(n,t){const e=t.getOptions(),{publicKey:r}=t.getDsn()||{},i=ue({environment:e.environment||xo,release:e.release,public_key:r,trace_id:n});return t.emit("createDsc",i),i}function ec(n){const t=te();if(!t)return{};const e=Fo(Ht(n).trace_id||"",t),r=Ro(n),i=r._frozenDsc;if(i)return i;const s=r.spanContext().traceState,a=s&&s.get("sentry.dsc"),l=a&&Ba(a);if(l)return l;const u=Ht(r),h=u.data||{},m=h["sentry.sample_rate"];m!=null&&(e.sample_rate=`${m}`);const g=h["sentry.source"],v=u.description;return g!=="url"&&v&&(e.transaction=v),function(w){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const _=te(),E=w||_&&_.getOptions();return!!E&&(E.enableTracing||"tracesSampleRate"in E||"tracesSampler"in E)}()&&(e.sampled=String(function(w){const{traceFlags:_}=w.spanContext();return _===1}(r))),t.emit("createDsc",e,r),e}function tc(n,t,e,r){const i=Do(e),s=n.type&&n.type!=="replay_event"?n.type:"event";(function(l,u){u&&(l.sdk=l.sdk||{},l.sdk.name=l.sdk.name||u.name,l.sdk.version=l.sdk.version||u.version,l.sdk.integrations=[...l.sdk.integrations||[],...u.integrations||[]],l.sdk.packages=[...l.sdk.packages||[],...u.packages||[]])})(n,e&&e.sdk);const a=function(l,u,h,m){const g=l.sdkProcessingMetadata&&l.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:l.event_id,sent_at:new Date().toISOString(),...u&&{sdk:u},...!!h&&m&&{dsn:Wt(m)},...g&&{trace:ue({...g})}}}(n,i,r,t);return delete n.sdkProcessingMetadata,wt(a,[[{type:s},n]])}function xn(n,t,e,r=0){return new oe((i,s)=>{const a=n[r];if(t===null||typeof a!="function")i(t);else{const l=a({...t},e);G&&a.id&&l===null&&L.log(`Event processor "${a.id}" dropped event`),on(l)?l.then(u=>xn(n,u,e,r+1).then(i)).then(null,s):xn(n,l,e,r+1).then(i).then(null,s)}})}function nc(n,t){const{fingerprint:e,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=t;(function(a,l){const{extra:u,tags:h,user:m,contexts:g,level:v,transactionName:w}=l,_=ue(u);_&&Object.keys(_).length&&(a.extra={..._,...a.extra});const E=ue(h);E&&Object.keys(E).length&&(a.tags={...E,...a.tags});const T=ue(m);T&&Object.keys(T).length&&(a.user={...T,...a.user});const O=ue(g);O&&Object.keys(O).length&&(a.contexts={...O,...a.contexts}),v&&(a.level=v),w&&a.type!=="transaction"&&(a.transaction=w)})(n,t),r&&function(a,l){a.contexts={trace:Xa(l),...a.contexts},a.sdkProcessingMetadata={dynamicSamplingContext:ec(l),...a.sdkProcessingMetadata};const u=Ro(l),h=Ht(u).description;h&&!a.transaction&&a.type==="transaction"&&(a.transaction=h)}(n,r),function(a,l){a.fingerprint=a.fingerprint?function(u){return Array.isArray(u)?u:[u]}(a.fingerprint):[],l&&(a.fingerprint=a.fingerprint.concat(l)),a.fingerprint&&!a.fingerprint.length&&delete a.fingerprint}(n,e),function(a,l){const u=[...a.breadcrumbs||[],...l];a.breadcrumbs=u.length?u:void 0}(n,i),function(a,l){a.sdkProcessingMetadata={...a.sdkProcessingMetadata,...l}}(n,s)}function gi(n,t){const{extra:e,tags:r,user:i,contexts:s,level:a,sdkProcessingMetadata:l,breadcrumbs:u,fingerprint:h,eventProcessors:m,attachments:g,propagationContext:v,transactionName:w,span:_}=t;pt(n,"extra",e),pt(n,"tags",r),pt(n,"user",i),pt(n,"contexts",s),pt(n,"sdkProcessingMetadata",l),a&&(n.level=a),w&&(n.transactionName=w),_&&(n.span=_),u.length&&(n.breadcrumbs=[...n.breadcrumbs,...u]),h.length&&(n.fingerprint=[...n.fingerprint,...h]),m.length&&(n.eventProcessors=[...n.eventProcessors,...m]),g.length&&(n.attachments=[...n.attachments,...g]),n.propagationContext={...n.propagationContext,...v}}function pt(n,t,e){if(e&&Object.keys(e).length){n[t]={...n[t]};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[t][r]=e[r])}}function rc(n,t,e,r,i,s){const{normalizeDepth:a=3,normalizeMaxBreadth:l=1e3}=n,u={...t,event_id:t.event_id||e.event_id||he(),timestamp:t.timestamp||Et()},h=e.integrations||n.integrations.map(_=>_.name);(function(_,E){const{environment:T,release:O,dist:j,maxValueLength:x=250}=E;"environment"in _||(_.environment="environment"in E?T:xo),_.release===void 0&&O!==void 0&&(_.release=O),_.dist===void 0&&j!==void 0&&(_.dist=j),_.message&&(_.message=rt(_.message,x));const z=_.exception&&_.exception.values&&_.exception.values[0];z&&z.value&&(z.value=rt(z.value,x));const Y=_.request;Y&&Y.url&&(Y.url=rt(Y.url,x))})(u,n),function(_,E){E.length>0&&(_.sdk=_.sdk||{},_.sdk.integrations=[..._.sdk.integrations||[],...E])}(u,h),i&&i.emit("applyFrameMetadata",t),t.type===void 0&&function(_,E){const T=F._sentryDebugIds;if(!T)return;let O;const j=vi.get(E);j?O=j:(O=new Map,vi.set(E,O));const x=Object.entries(T).reduce((z,[Y,ae])=>{let ie;const ge=O.get(Y);ge?ie=ge:(ie=E(Y),O.set(Y,ie));for(let Ue=ie.length-1;Ue>=0;Ue--){const ut=ie[Ue];if(ut.filename){z[ut.filename]=ae;break}}return z},{});try{_.exception.values.forEach(z=>{z.stacktrace.frames.forEach(Y=>{Y.filename&&(Y.debug_id=x[Y.filename])})})}catch{}}(u,n.stackParser);const m=function(_,E){if(!E)return _;const T=_?_.clone():new Pe;return T.update(E),T}(r,e.captureContext);e.mechanism&&bt(u,e.mechanism);const g=i?i.getEventProcessors():[],v=Gt("globalScope",()=>new Pe).getScopeData();s&&gi(v,s.getScopeData()),m&&gi(v,m.getScopeData());const w=[...e.attachments||[],...v.attachments];return w.length&&(e.attachments=w),nc(u,v),xn([...g,...v.eventProcessors],u,e).then(_=>(_&&function(E){const T={};try{E.exception.values.forEach(j=>{j.stacktrace.frames.forEach(x=>{x.debug_id&&(x.abs_path?T[x.abs_path]=x.debug_id:x.filename&&(T[x.filename]=x.debug_id),delete x.debug_id)})})}catch{}if(Object.keys(T).length===0)return;E.debug_meta=E.debug_meta||{},E.debug_meta.images=E.debug_meta.images||[];const O=E.debug_meta.images;Object.entries(T).forEach(([j,x])=>{O.push({type:"sourcemap",code_file:j,debug_id:x})})}(_),typeof a=="number"&&a>0?function(E,T,O){if(!E)return null;const j={...E,...E.breadcrumbs&&{breadcrumbs:E.breadcrumbs.map(x=>({...x,...x.data&&{data:Ne(x.data,T,O)}}))},...E.user&&{user:Ne(E.user,T,O)},...E.contexts&&{contexts:Ne(E.contexts,T,O)},...E.extra&&{extra:Ne(E.extra,T,O)}};return E.contexts&&E.contexts.trace&&j.contexts&&(j.contexts.trace=E.contexts.trace,E.contexts.trace.data&&(j.contexts.trace.data=Ne(E.contexts.trace.data,T,O))),E.spans&&(j.spans=E.spans.map(x=>({...x,...x.data&&{data:Ne(x.data,T,O)}}))),j}(_,a,l):_))}const vi=new WeakMap;function ic(n){if(n)return function(t){return t instanceof Pe||typeof t=="function"}(n)||function(t){return Object.keys(t).some(e=>oc.includes(e))}(n)?{captureContext:n}:n}const oc=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function yi(n,t){return dr().captureEvent(n,t)}function sc(n,t){return e={sentry_key:n.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(e).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(e[r])}`).join("&");var e}const _i=[];function bi(n,t){for(const e of t)e&&e.afterAllSetup&&e.afterAllSetup(n)}function wi(n,t,e){if(e[t.name])G&&L.log(`Integration skipped because it was already installed: ${t.name}`);else{if(e[t.name]=t,_i.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),_i.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(n),typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);n.on("preprocessEvent",(i,s)=>r(i,s,n))}if(typeof t.processEvent=="function"){const r=t.processEvent.bind(t),i=Object.assign((s,a)=>r(s,a,n),{id:t.name});n.addEventProcessor(i)}G&&L.log(`Integration installed: ${t.name}`)}}const Si="Not capturing exception because it's already been captured.";class ac{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Ia(t.dsn):G&&L.warn("No DSN provided, client will not send events."),this._dsn){const s=(e=this._dsn,r=t.tunnel,i=t._metadata?t._metadata.sdk:void 0,r||`${function(a){return`${function(l){const u=l.protocol?`${l.protocol}:`:"",h=l.port?`:${l.port}`:"";return`${u}//${l.host}${h}${l.path?`/${l.path}`:""}/api/`}(a)}${a.projectId}/envelope/`}(e)}?${sc(e,i)}`);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:s})}var e,r,i}captureException(t,e,r){const i=he();if(si(t))return G&&L.log(Si),i;const s={event_id:i,...e};return this._process(this.eventFromException(t,s).then(a=>this._captureEvent(a,s,r))),s.event_id}captureMessage(t,e,r,i){const s={event_id:he(),...r},a=ir(t)?t:String(t),l=Cn(t)?this.eventFromMessage(a,e,s):this.eventFromException(t,s);return this._process(l.then(u=>this._captureEvent(u,s,i))),s.event_id}captureEvent(t,e,r){const i=he();if(e&&e.originalException&&si(e.originalException))return G&&L.log(Si),i;const s={event_id:i,...e},a=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,s,a||r)),s.event_id}captureSession(t){typeof t.release!="string"?G&&L.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),Nn(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const e=this._transport;return e?(this.emit("flush"),this._isClientDoneProcessing(t).then(r=>e.flush(t).then(i=>r&&i))):Ze(!0)}close(t){return this.flush(t).then(e=>(this.getOptions().enabled=!1,this.emit("close"),e))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const e=this._integrations[t.name];wi(this,t,this._integrations),e||bi(this,[t])}sendEvent(t,e={}){this.emit("beforeSendEvent",t,e);let r=tc(t,this._dsn,this._options._metadata,this._options.tunnel);for(const s of e.attachments||[])r=$a(r,Ga(s));const i=this.sendEnvelope(r);i&&i.then(s=>this.emit("afterSendEvent",t,s),null)}sendSession(t){const e=function(r,i,s,a){const l=Do(s);return wt({sent_at:new Date().toISOString(),...l&&{sdk:l},...!!a&&i&&{dsn:Wt(i)}},["aggregates"in r?[{type:"sessions"},r]:[{type:"session"},r.toJSON()]])}(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(e)}recordDroppedEvent(t,e,r){if(this._options.sendClientReports){const i=typeof r=="number"?r:1,s=`${t}:${e}`;G&&L.log(`Recording outcome: "${s}"${i>1?` (${i} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+i}}on(t,e){const r=this._hooks[t]=this._hooks[t]||[];return r.push(e),()=>{const i=r.indexOf(e);i>-1&&r.splice(i,1)}}emit(t,...e){const r=this._hooks[t];r&&r.forEach(i=>i(...e))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,e=>(G&&L.error("Error while sending event:",e),e)):(G&&L.error("Transport disabled"),Ze({}))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=function(e,r){const i={};return r.forEach(s=>{s&&wi(e,s,i)}),i}(this,t),bi(this,t)}_updateSessionFromEvent(t,e){let r=!1,i=!1;const s=e.exception&&e.exception.values;if(s){i=!0;for(const l of s){const u=l.mechanism;if(u&&u.handled===!1){r=!0;break}}}const a=t.status==="ok";(a&&t.errors===0||a&&r)&&(Nn(t,{...r&&{status:"crashed"},errors:t.errors||Number(i||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new oe(e=>{let r=0;const i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),e(!0)):(r+=1,t&&r>=t&&(clearInterval(i),e(!1)))},1)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,e,r,i=No()){const s=this.getOptions(),a=Object.keys(this._integrations);return!e.integrations&&a.length>0&&(e.integrations=a),this.emit("preprocessEvent",t,e),t.type||i.setLastEventId(t.event_id||e.event_id),rc(s,t,e,r,this,i).then(l=>{if(l===null)return l;const u={...i.getPropagationContext(),...r?r.getPropagationContext():void 0};if(!(l.contexts&&l.contexts.trace)&&u){const{traceId:h,spanId:m,parentSpanId:g,dsc:v}=u;l.contexts={trace:ue({trace_id:h,span_id:m,parent_span_id:g}),...l.contexts};const w=v||Fo(h,this);l.sdkProcessingMetadata={dynamicSamplingContext:w,...l.sdkProcessingMetadata}}return l})}_captureEvent(t,e={},r){return this._processEvent(t,e,r).then(i=>i.event_id,i=>{if(G){const s=i;s.logLevel==="log"?L.log(s.message):L.warn(s)}})}_processEvent(t,e,r){const i=this.getOptions(),{sampleRate:s}=i,a=ki(t),l=Ei(t),u=t.type||"error",h=`before send for type \`${u}\``,m=s===void 0?void 0:function(w){if(typeof w=="boolean")return Number(w);const _=typeof w=="string"?parseFloat(w):w;if(!(typeof _!="number"||isNaN(_)||_<0||_>1))return _;G&&L.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(w)} of type ${JSON.stringify(typeof w)}.`)}(s);if(l&&typeof m=="number"&&Math.random()>m)return this.recordDroppedEvent("sample_rate","error",t),zt(new _e(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const g=u==="replay_event"?"replay":u,v=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,e,r,v).then(w=>{if(w===null)throw this.recordDroppedEvent("event_processor",g,t),new _e("An event processor returned `null`, will not send event.","log");if(e.data&&e.data.__sentry__===!0)return w;const _=function(E,T,O,j){const{beforeSend:x,beforeSendTransaction:z,beforeSendSpan:Y}=T;if(Ei(O)&&x)return x(O,j);if(ki(O)){if(O.spans&&Y){const ae=[];for(const ie of O.spans){const ge=Y(ie);ge?ae.push(ge):E.recordDroppedEvent("before_send","span")}O.spans=ae}if(z){if(O.spans){const ae=O.spans.length;O.sdkProcessingMetadata={...O.sdkProcessingMetadata,spanCountBeforeProcessing:ae}}return z(O,j)}}return O}(this,i,w,e);return function(E,T){const O=`${T} must return \`null\` or a valid event.`;if(on(E))return E.then(j=>{if(!st(j)&&j!==null)throw new _e(O);return j},j=>{throw new _e(`${T} rejected with ${j}`)});if(!st(E)&&E!==null)throw new _e(O);return E}(_,h)}).then(w=>{if(w===null){if(this.recordDroppedEvent("before_send",g,t),a){const T=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",T)}throw new _e(`${h} returned \`null\`, will not send event.`,"log")}const _=r&&r.getSession();if(!a&&_&&this._updateSessionFromEvent(_,w),a){const T=(w.sdkProcessingMetadata&&w.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(w.spans?w.spans.length:0);T>0&&this.recordDroppedEvent("before_send","span",T)}const E=w.transaction_info;if(a&&E&&w.transaction!==t.transaction){const T="custom";w.transaction_info={...E,source:T}}return this.sendEvent(w,e),w}).then(null,w=>{throw w instanceof _e?w:(this.captureException(w,{data:{__sentry__:!0},originalException:w}),new _e(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${w}`))})}_process(t){this._numProcessing++,t.then(e=>(this._numProcessing--,e),e=>(this._numProcessing--,e))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([e,r])=>{const[i,s]=e.split(":");return{reason:i,category:s,quantity:r}})}_flushOutcomes(){G&&L.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0)return void(G&&L.log("No outcomes to send"));if(!this._dsn)return void(G&&L.log("No dsn provided, will not send outcomes"));G&&L.log("Sending outcomes:",t);const e=(r=t,wt((i=this._options.tunnel&&Wt(this._dsn))?{dsn:i}:{},[[{type:"client_report"},{timestamp:s||Et(),discarded_events:r}]]));var r,i,s;this.sendEnvelope(e)}}function Ei(n){return n.type===void 0}function ki(n){return n.type==="transaction"}function cc(n,t,e=Fa(n.bufferSize||64)){let r={};return{send:function(i){const s=[];if(ci(i,(u,h)=>{const m=li(h);if(function(g,v,w=Date.now()){return function(_,E){return _[E]||_.all||0}(g,v)>w}(r,m)){const g=Ti(u,h);n.recordDroppedEvent("ratelimit_backoff",m,g)}else s.push(u)}),s.length===0)return Ze({});const a=wt(i[0],s),l=u=>{ci(a,(h,m)=>{const g=Ti(h,m);n.recordDroppedEvent(u,li(m),g)})};return e.add(()=>t({body:Ja(a)}).then(u=>(u.statusCode!==void 0&&(u.statusCode<200||u.statusCode>=300)&&G&&L.warn(`Sentry responded with status code ${u.statusCode} to sent event.`),r=Wa(r,u),u),u=>{throw l("network_error"),u})).then(u=>u,u=>{if(u instanceof _e)return G&&L.error("Skipped sending event because buffer is full."),l("queue_overflow"),Ze({});throw u})},flush:i=>e.drain(i)}}function Ti(n,t){if(t==="event"||t==="transaction")return Array.isArray(n)?n[1]:void 0}const lc=100;function Je(n,t){const e=te(),r=No();if(!e)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:s=lc}=e.getOptions();if(s<=0)return;const a={timestamp:Et(),...n},l=i?sr(()=>i(a,t)):a;l!==null&&(e.emit&&e.emit("beforeAddBreadcrumb",l,t),r.addBreadcrumb(l,s))}let Ci;const Mi=new WeakMap,uc=()=>({name:"FunctionToString",setupOnce(){Ci=Function.prototype.toString;try{Function.prototype.toString=function(...n){const t=ar(this),e=Mi.has(te())&&t!==void 0?t:this;return Ci.apply(e,n)}}catch{}},setup(n){Mi.set(n,!0)}}),dc=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],hc=(n={})=>({name:"InboundFilters",processEvent(t,e,r){const i=r.getOptions(),s=function(a={},l={}){return{allowUrls:[...a.allowUrls||[],...l.allowUrls||[]],denyUrls:[...a.denyUrls||[],...l.denyUrls||[]],ignoreErrors:[...a.ignoreErrors||[],...l.ignoreErrors||[],...a.disableErrorDefaults?[]:dc],ignoreTransactions:[...a.ignoreTransactions||[],...l.ignoreTransactions||[]],ignoreInternal:a.ignoreInternal===void 0||a.ignoreInternal}}(n,i);return function(a,l){return l.ignoreInternal&&function(u){try{return u.exception.values[0].type==="SentryError"}catch{}return!1}(a)?(G&&L.warn(`Event dropped due to being internal Sentry Error.
Event: ${De(a)}`),!0):function(u,h){return u.type||!h||!h.length?!1:function(m){const g=[];m.message&&g.push(m.message);let v;try{v=m.exception.values[m.exception.values.length-1]}catch{}return v&&v.value&&(g.push(v.value),v.type&&g.push(`${v.type}: ${v.value}`)),g}(u).some(m=>Tt(m,h))}(a,l.ignoreErrors)?(G&&L.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${De(a)}`),!0):function(u){return u.type||!u.exception||!u.exception.values||u.exception.values.length===0?!1:!u.message&&!u.exception.values.some(h=>h.stacktrace||h.type&&h.type!=="Error"||h.value)}(a)?(G&&L.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${De(a)}`),!0):function(u,h){if(u.type!=="transaction"||!h||!h.length)return!1;const m=u.transaction;return!!m&&Tt(m,h)}(a,l.ignoreTransactions)?(G&&L.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${De(a)}`),!0):function(u,h){if(!h||!h.length)return!1;const m=Pt(u);return!!m&&Tt(m,h)}(a,l.denyUrls)?(G&&L.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${De(a)}.
Url: ${Pt(a)}`),!0):function(u,h){if(!h||!h.length)return!0;const m=Pt(u);return!m||Tt(m,h)}(a,l.allowUrls)?!1:(G&&L.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${De(a)}.
Url: ${Pt(a)}`),!0)}(t,s)?null:t}});function Pt(n){try{let t;try{t=n.exception.values[0].stacktrace.frames}catch{}return t?function(e=[]){for(let r=e.length-1;r>=0;r--){const i=e[r];if(i&&i.filename!=="<anonymous>"&&i.filename!=="[native code]")return i.filename||null}return null}(t):null}catch{return G&&L.error(`Cannot extract url for event ${De(n)}`),null}}const pc=()=>{let n;return{name:"Dedupe",processEvent(t){if(t.type)return t;try{if(function(e,r){return r?!!(function(i,s){const a=i.message,l=s.message;return!(!a&&!l||a&&!l||!a&&l||a!==l||!Oi(i,s)||!Ai(i,s))}(e,r)||function(i,s){const a=Pi(s),l=Pi(i);return!(!a||!l||a.type!==l.type||a.value!==l.value||!Oi(i,s)||!Ai(i,s))}(e,r)):!1}(t,n))return G&&L.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return n=t}}};function Ai(n,t){let e=ri(n),r=ri(t);if(!e&&!r)return!0;if(e&&!r||!e&&r||r.length!==e.length)return!1;for(let i=0;i<r.length;i++){const s=r[i],a=e[i];if(s.filename!==a.filename||s.lineno!==a.lineno||s.colno!==a.colno||s.function!==a.function)return!1}return!0}function Oi(n,t){let e=n.fingerprint,r=t.fingerprint;if(!e&&!r)return!0;if(e&&!r||!e&&r)return!1;try{return e.join("")===r.join("")}catch{return!1}}function Pi(n){return n.exception&&n.exception.values&&n.exception.values[0]}const Q=F;let Fn=0;function Li(){return Fn>0}function ct(n,t={},e){if(typeof n!="function")return n;try{const i=n.__sentry_wrapped__;if(i)return typeof i=="function"?i:n;if(ar(n))return n}catch{return n}const r=function(){const i=Array.prototype.slice.call(arguments);try{e&&typeof e=="function"&&e.apply(this,arguments);const s=i.map(a=>ct(a,t));return n.apply(this,s)}catch(s){throw Fn++,setTimeout(()=>{Fn--}),function(...a){const l=ur(sn());if(a.length===2){const[u,h]=a;return u?l.withSetScope(u,h):l.withScope(h)}l.withScope(a[0])}(a=>{var l,u;a.addEventProcessor(h=>(t.mechanism&&(In(h,void 0,void 0),bt(h,t.mechanism)),h.extra={...h.extra,arguments:i},h)),l=s,dr().captureException(l,ic(u))}),s}};try{for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}catch{}Po(r,n),Xe(n,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>n.name})}catch{}return r}const hr=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function pr(n,t){const e=fr(n,t),r={type:t&&t.name,value:gc(t)};return e.length&&(r.stacktrace={frames:e}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function fc(n,t,e,r){const i=te(),s=i&&i.getOptions().normalizeDepth,a=function(h){for(const m in h)if(Object.prototype.hasOwnProperty.call(h,m)){const g=h[m];if(g instanceof Error)return g}}(t),l={__serialized__:jo(t,s)};if(a)return{exception:{values:[pr(n,a)]},extra:l};const u={exception:{values:[{type:rn(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:vc(t,{isUnhandledRejection:r})}]},extra:l};if(e){const h=fr(n,e);h.length&&(u.exception.values[0].stacktrace={frames:h})}return u}function hn(n,t){return{exception:{values:[pr(n,t)]}}}function fr(n,t){const e=t.stacktrace||t.stack||"",r=function(s){return s&&mc.test(s.message)?1:0}(t),i=function(s){return typeof s.framesToPop=="number"?s.framesToPop:0}(t);try{return n(e,r,i)}catch{}return[]}const mc=/Minified React error #\d+;/i;function gc(n){const t=n&&n.message;return t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function qn(n,t,e,r,i){let s;if(Mo(t)&&t.error)return hn(n,t.error);if(Yr(t)||lt(t,"DOMException")){const a=t;if("stack"in t)s=hn(n,t);else{const l=a.name||(Yr(a)?"DOMError":"DOMException"),u=a.message?`${l}: ${a.message}`:l;s=Vn(n,u,e,r),In(s,u)}return"code"in a&&(s.tags={...s.tags,"DOMException.code":`${a.code}`}),s}return rr(t)?hn(n,t):st(t)||rn(t)?(s=fc(n,t,e,i),bt(s,{synthetic:!0}),s):(s=Vn(n,t,e,r),In(s,`${t}`,void 0),bt(s,{synthetic:!0}),s)}function Vn(n,t,e,r){const i={};if(r&&e){const s=fr(n,e);s.length&&(i.exception={values:[{value:t,stacktrace:{frames:s}}]})}if(ir(t)){const{__sentry_template_string__:s,__sentry_template_values__:a}=t;return i.logentry={message:s,params:a},i}return i.message=t,i}function vc(n,{isUnhandledRejection:t}){const e=function(i,s=40){const a=Object.keys(Lo(i));a.sort();const l=a[0];if(!l)return"[object has no keys]";if(l.length>=s)return rt(l,s);for(let u=a.length;u>0;u--){const h=a.slice(0,u).join(", ");if(!(h.length>s))return u===a.length?h:rt(h,s)}return""}(n),r=t?"promise rejection":"exception";return Mo(n)?`Event \`ErrorEvent\` captured as ${r} with message \`${n.message}\``:rn(n)?`Event \`${function(i){try{const s=Object.getPrototypeOf(i);return s?s.constructor.name:void 0}catch{}}(n)}\` (type=${n.type}) captured as ${r}`:`Object captured as ${r} with keys: ${e}`}class yc extends ac{constructor(t){const e={parentSpanIsAlwaysRootSpan:!0,...t};(function(r,i,s=[i],a="npm"){const l=r._metadata||{};l.sdk||(l.sdk={name:`sentry.javascript.${i}`,packages:s.map(u=>({name:`${a}:@sentry/${u}`,version:Qe})),version:Qe}),r._metadata=l})(e,"browser",["browser"],Q.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&Q.document&&Q.document.addEventListener("visibilitychange",()=>{Q.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,e){return function(r,i,s,a){const l=qn(r,i,s&&s.syntheticException||void 0,a);return bt(l),l.level="error",s&&s.event_id&&(l.event_id=s.event_id),Ze(l)}(this._options.stackParser,t,e,this._options.attachStacktrace)}eventFromMessage(t,e="info",r){return function(i,s,a="info",l,u){const h=Vn(i,s,l&&l.syntheticException||void 0,u);return h.level=a,l&&l.event_id&&(h.event_id=l.event_id),Ze(h)}(this._options.stackParser,t,e,r,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled())return void(hr&&L.warn("SDK not enabled, will not capture user feedback."));const e=function(r,{metadata:i,tunnel:s,dsn:a}){const l={event_id:r.event_id,sent_at:new Date().toISOString(),...i&&i.sdk&&{sdk:{name:i.sdk.name,version:i.sdk.version}},...!!s&&!!a&&{dsn:Wt(a)}},u=function(h){return[{type:"user_report"},h]}(r);return wt(l,[u])}(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(e)}_prepareEvent(t,e,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,e,r)}}const _c=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,X=F;let Ii,pn,fn,Lt;function bc(){if(!X.document)return;const n=de.bind(null,"dom"),t=ji(n,!0);X.document.addEventListener("click",t,!1),X.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(e=>{const r=X[e]&&X[e].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(re(r,"addEventListener",function(i){return function(s,a,l){if(s==="click"||s=="keypress")try{const u=this,h=u.__sentry_instrumentation_handlers__=u.__sentry_instrumentation_handlers__||{},m=h[s]=h[s]||{refCount:0};if(!m.handler){const g=ji(n);m.handler=g,i.call(this,s,g,l)}m.refCount++}catch{}return i.call(this,s,a,l)}}),re(r,"removeEventListener",function(i){return function(s,a,l){if(s==="click"||s=="keypress")try{const u=this,h=u.__sentry_instrumentation_handlers__||{},m=h[s];m&&(m.refCount--,m.refCount<=0&&(i.call(this,s,m.handler,l),m.handler=void 0,delete h[s]),Object.keys(h).length===0&&delete u.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,a,l)}}))})}function ji(n,t=!1){return e=>{if(!e||e._sentryCaptured)return;const r=function(s){try{return s.target}catch{return null}}(e);if(function(s,a){return s==="keypress"&&(!a||!a.tagName||a.tagName!=="INPUT"&&a.tagName!=="TEXTAREA"&&!a.isContentEditable)}(e.type,r))return;Xe(e,"_sentryCaptured",!0),r&&!r._sentryId&&Xe(r,"_sentryId",he());const i=e.type==="keypress"?"input":e.type;(function(s){if(s.type!==pn)return!1;try{if(!s.target||s.target._sentryId!==fn)return!1}catch{}return!0})(e)||(n({event:e,name:i,global:t}),pn=e.type,fn=r?r._sentryId:void 0),clearTimeout(Ii),Ii=X.setTimeout(()=>{fn=void 0,pn=void 0},1e3)}}function wc(){if(!function(){const e=Ot.chrome,r=e&&e.app&&e.app.runtime,i="history"in Ot&&!!Ot.history.pushState&&!!Ot.history.replaceState;return!r&&i}())return;const n=X.onpopstate;function t(e){return function(...r){const i=r.length>2?r[2]:void 0;if(i){const s=Lt,a=String(i);Lt=a,de("history",{from:s,to:a})}return e.apply(this,r)}}X.onpopstate=function(...e){const r=X.location.href,i=Lt;if(Lt=r,de("history",{from:i,to:r}),n)try{return n.apply(this,e)}catch{}},re(X.history,"pushState",t),re(X.history,"replaceState",t)}const Ft={};function Di(n){Ft[n]=void 0}const mt="__sentry_xhr_v3__";function Sc(){if(!X.XMLHttpRequest)return;const n=XMLHttpRequest.prototype;n.open=new Proxy(n.open,{apply(t,e,r){const i=1e3*xe(),s=Ae(r[0])?r[0].toUpperCase():void 0,a=function(u){if(Ae(u))return u;try{return u.toString()}catch{}}(r[1]);if(!s||!a)return t.apply(e,r);e[mt]={method:s,url:a,request_headers:{}},s==="POST"&&a.match(/sentry_key/)&&(e.__sentry_own_request__=!0);const l=()=>{const u=e[mt];if(u&&e.readyState===4){try{u.status_code=e.status}catch{}de("xhr",{endTimestamp:1e3*xe(),startTimestamp:i,xhr:e})}};return"onreadystatechange"in e&&typeof e.onreadystatechange=="function"?e.onreadystatechange=new Proxy(e.onreadystatechange,{apply:(u,h,m)=>(l(),u.apply(h,m))}):e.addEventListener("readystatechange",l),e.setRequestHeader=new Proxy(e.setRequestHeader,{apply(u,h,m){const[g,v]=m,w=h[mt];return w&&Ae(g)&&Ae(v)&&(w.request_headers[g.toLowerCase()]=v),u.apply(h,m)}}),t.apply(e,r)}}),n.send=new Proxy(n.send,{apply(t,e,r){const i=e[mt];return i?(r[0]!==void 0&&(i.body=r[0]),de("xhr",{startTimestamp:1e3*xe(),xhr:e}),t.apply(e,r)):t.apply(e,r)}})}function Ec(n,t=function(e){const r=Ft[e];if(r)return r;let i=X[e];if(Pn(i))return Ft[e]=i.bind(X);const s=X.document;if(s&&typeof s.createElement=="function")try{const a=s.createElement("iframe");a.hidden=!0,s.head.appendChild(a);const l=a.contentWindow;l&&l[e]&&(i=l[e]),s.head.removeChild(a)}catch(a){_c&&L.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,a)}return i&&(Ft[e]=i.bind(X))}("fetch")){let e=0,r=0;return cc(n,function(i){const s=i.body.length;e+=s,r++;const a={body:i.body,method:"POST",referrerPolicy:"origin",headers:n.headers,keepalive:e<=6e4&&r<15,...n.fetchOptions};if(!t)return Di("fetch"),zt("No fetch implementation available");try{return t(n.url,a).then(l=>(e-=s,r--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}catch(l){return Di("fetch"),e-=s,r--,zt(l)}})}function mn(n,t,e,r){const i={filename:n,function:t==="<anonymous>"?We:t,in_app:!0};return e!==void 0&&(i.lineno=e),r!==void 0&&(i.colno=r),i}const kc=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Tc=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Cc=/\((\S*)(?::(\d+))(?::(\d+))\)/,Mc=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Ac=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Oc=function(...n){const t=n.sort((e,r)=>e[0]-r[0]).map(e=>e[1]);return(e,r=0,i=0)=>{const s=[],a=e.split(`
`);for(let l=r;l<a.length;l++){const u=a[l];if(u.length>1024)continue;const h=ei.test(u)?u.replace(ei,"$1"):u;if(!h.match(/\S*Error: /)){for(const m of t){const g=m(h);if(g){s.push(g);break}}if(s.length>=50+i)break}}return function(l){if(!l.length)return[];const u=Array.from(l);return/sentryWrapped/.test(Ct(u).function||"")&&u.pop(),u.reverse(),ti.test(Ct(u).function||"")&&(u.pop(),ti.test(Ct(u).function||"")&&u.pop()),u.slice(0,50).map(h=>({...h,filename:h.filename||Ct(u).filename,function:h.function||We}))}(s.slice(i))}}([30,n=>{const t=kc.exec(n);if(t){const[,r,i,s]=t;return mn(r,We,+i,+s)}const e=Tc.exec(n);if(e){if(e[2]&&e[2].indexOf("eval")===0){const s=Cc.exec(e[2]);s&&(e[2]=s[1],e[3]=s[2],e[4]=s[3])}const[r,i]=Ni(e[1]||We,e[2]);return mn(i,r,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}}],[50,n=>{const t=Mc.exec(n);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const i=Ac.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let e=t[3],r=t[1]||We;return[r,e]=Ni(r,e),mn(e,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]),Ni=(n,t)=>{const e=n.indexOf("safari-extension")!==-1,r=n.indexOf("safari-web-extension")!==-1;return e||r?[n.indexOf("@")!==-1?n.split("@")[0]:We,e?`safari-extension:${t}`:`safari-web-extension:${t}`]:[n,t]},Ri=1024,Pc=(n={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...n};return{name:"Breadcrumbs",setup(e){var r;t.console&&function(i){const s="console";ze(s,i),He(s,ja)}(function(i){return function(s){if(te()!==i)return;const a={category:"console",data:{arguments:s.args,logger:"console"},level:Va(s.level),message:Wr(s.args," ")};if(s.level==="assert"){if(s.args[0]!==!1)return;a.message=`Assertion failed: ${Wr(s.args.slice(1)," ")||"console.assert"}`,a.data.arguments=s.args.slice(1)}Je(a,{input:s.args,level:s.level})}}(e)),t.dom&&(r=function(i,s){return function(a){if(te()!==i)return;let l,u,h=typeof s=="object"?s.serializeAttribute:void 0,m=typeof s=="object"&&typeof s.maxStringLength=="number"?s.maxStringLength:void 0;m&&m>Ri&&(hr&&L.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${m} was configured. Sentry will use 1024 instead.`),m=Ri),typeof h=="string"&&(h=[h]);try{const v=a.event,w=function(_){return!!_&&!!_.target}(v)?v.target:v;l=Oo(w,{keyAttrs:h,maxStringLength:m}),u=function(_){if(!or.HTMLElement)return null;let E=_;for(let T=0;T<5;T++){if(!E)return null;if(E instanceof HTMLElement){if(E.dataset.sentryComponent)return E.dataset.sentryComponent;if(E.dataset.sentryElement)return E.dataset.sentryElement}E=E.parentNode}return null}(w)}catch{l="<unknown>"}if(l.length===0)return;const g={category:`ui.${a.name}`,message:l};u&&(g.data={"ui.component_name":u}),Je(g,{event:a.event,name:a.name,global:a.global})}}(e,t.dom),ze("dom",r),He("dom",bc)),t.xhr&&function(i){ze("xhr",i),He("xhr",Sc)}(function(i){return function(s){if(te()!==i)return;const{startTimestamp:a,endTimestamp:l}=s,u=s.xhr[mt];if(!a||!l||!u)return;const{method:h,url:m,status_code:g,body:v}=u,w={method:h,url:m,status_code:g},_={xhr:s.xhr,input:v,startTimestamp:a,endTimestamp:l};Je({category:"xhr",data:w,type:"http",level:Qr(g)},_)}}(e)),t.fetch&&Na(function(i){return function(s){if(te()!==i)return;const{startTimestamp:a,endTimestamp:l}=s;if(l&&(!s.fetchData.url.match(/sentry_key/)||s.fetchData.method!=="POST"))if(s.error)Je({category:"fetch",data:s.fetchData,level:"error",type:"http"},{data:s.error,input:s.args,startTimestamp:a,endTimestamp:l});else{const u=s.response,h={...s.fetchData,status_code:u&&u.status},m={input:s.args,response:u,startTimestamp:a,endTimestamp:l};Je({category:"fetch",data:h,type:"http",level:Qr(h.status_code)},m)}}}(e)),t.history&&function(i){const s="history";ze(s,i),He(s,wc)}(function(i){return function(s){if(te()!==i)return;let a=s.from,l=s.to;const u=dn(Q.location.href);let h=a?dn(a):void 0;const m=dn(l);h&&h.path||(h=u),u.protocol===m.protocol&&u.host===m.host&&(l=m.relative),u.protocol===h.protocol&&u.host===h.host&&(a=h.relative),Je({category:"navigation",data:{from:a,to:l}})}}(e)),t.sentry&&e.on("beforeSendEvent",function(i){return function(s){te()===i&&Je({category:"sentry."+(s.type==="transaction"?"transaction":"event"),event_id:s.event_id,level:s.level,message:De(s)},{event:s})}}(e))}}},Lc=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Ic=(n={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...n};return{name:"BrowserApiErrors",setupOnce(){t.setTimeout&&re(Q,"setTimeout",xi),t.setInterval&&re(Q,"setInterval",xi),t.requestAnimationFrame&&re(Q,"requestAnimationFrame",jc),t.XMLHttpRequest&&"XMLHttpRequest"in Q&&re(XMLHttpRequest.prototype,"send",Dc);const e=t.eventTarget;e&&(Array.isArray(e)?e:Lc).forEach(Nc)}}};function xi(n){return function(...t){const e=t[0];return t[0]=ct(e,{mechanism:{data:{function:qe(n)},handled:!1,type:"instrument"}}),n.apply(this,t)}}function jc(n){return function(t){return n.apply(this,[ct(t,{mechanism:{data:{function:"requestAnimationFrame",handler:qe(n)},handled:!1,type:"instrument"}})])}}function Dc(n){return function(...t){const e=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(r=>{r in e&&typeof e[r]=="function"&&re(e,r,function(i){const s={mechanism:{data:{function:r,handler:qe(i)},handled:!1,type:"instrument"}},a=ar(i);return a&&(s.mechanism.data.handler=qe(a)),ct(i,s)})}),n.apply(this,t)}}function Nc(n){const t=Q,e=t[n]&&t[n].prototype;e&&e.hasOwnProperty&&e.hasOwnProperty("addEventListener")&&(re(e,"addEventListener",function(r){return function(i,s,a){try{typeof s.handleEvent=="function"&&(s.handleEvent=ct(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:qe(s),target:n},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[i,ct(s,{mechanism:{data:{function:"addEventListener",handler:qe(s),target:n},handled:!1,type:"instrument"}}),a])}}),re(e,"removeEventListener",function(r){return function(i,s,a){const l=s;try{const u=l&&l.__sentry_wrapped__;u&&r.call(this,i,u,a)}catch{}return r.call(this,i,l,a)}}))}const Rc=(n={})=>{const t={onerror:!0,onunhandledrejection:!0,...n};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(function(r){(function(i){const s="error";ze(s,i),He(s,Ra)})(i=>{const{stackParser:s,attachStacktrace:a}=qi();if(te()!==r||Li())return;const{msg:l,url:u,line:h,column:m,error:g}=i,v=function(w,_,E,T){const O=w.exception=w.exception||{},j=O.values=O.values||[],x=j[0]=j[0]||{},z=x.stacktrace=x.stacktrace||{},Y=z.frames=z.frames||[],ae=isNaN(parseInt(T,10))?void 0:T,ie=isNaN(parseInt(E,10))?void 0:E,ge=Ae(_)&&_.length>0?_:function(){try{return or.document.location.href}catch{return""}}();return Y.length===0&&Y.push({colno:ae,filename:ge,function:We,in_app:!0,lineno:ie}),w}(qn(s,g||l,void 0,a,!1),u,h,m);v.level="error",yi(v,{originalException:g,mechanism:{handled:!1,type:"onerror"}})})}(e),Fi("onerror")),t.onunhandledrejection&&(function(r){(function(i){const s="unhandledrejection";ze(s,i),He(s,xa)})(i=>{const{stackParser:s,attachStacktrace:a}=qi();if(te()!==r||Li())return;const l=function(h){if(Cn(h))return h;try{if("reason"in h)return h.reason;if("detail"in h&&"reason"in h.detail)return h.detail.reason}catch{}return h}(i),u=Cn(l)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(l)}`}]}}:qn(s,l,void 0,a,!0);u.level="error",yi(u,{originalException:l,mechanism:{handled:!1,type:"onunhandledrejection"}})})}(e),Fi("onunhandledrejection"))}}};function Fi(n){hr&&L.log(`Global Handler attached: ${n}`)}function qi(){const n=te();return n&&n.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const xc=()=>({name:"HttpContext",preprocessEvent(n){if(!Q.navigator&&!Q.location&&!Q.document)return;const t=n.request&&n.request.url||Q.location&&Q.location.href,{referrer:e}=Q.document||{},{userAgent:r}=Q.navigator||{},i={...n.request&&n.request.headers,...e&&{Referer:e},...r&&{"User-Agent":r}},s={...n.request,...t&&{url:t},headers:i};n.request=s}}),Fc=(n={})=>{const t=n.limit||5,e=n.key||"cause";return{name:"LinkedErrors",preprocessEvent(r,i,s){const a=s.getOptions();Oa(pr,a.stackParser,a.maxValueLength,e,t,r,i)}}};var Un="new",Vi="loading",Ui="loaded",Qt="joining-meeting",Re="joined-meeting",je="left-meeting",ke="error",qc="blocked",Vc="off",Uc="sendable",Bc="loading",$c="interrupted",qo="playable",qt="unknown",Vo="full",Jc="lobby",Gc="none",Uo="base",Yc="*",Wc="ejected",zc="nbf-room",Hc="nbf-token",Qc="exp-room",Kc="exp-token",Bn="no-room",Xc="meeting-full",Bo="end-of-life",Zc="not-allowed",$o="connection-error",el="cam-in-use",tl="mic-in-use",nl="cam-mic-in-use",rl="permissions",il="undefined-mediadevices",ol="not-found",sl="constraints",al="unknown",Jo="iframe-ready-for-launch-config",Go="iframe-launch-config",Yo="theme-updated",Wo="loading",zo="load-attempt-failed",$n="loaded",Ho="started-camera",Qo="camera-error",Ko="joining-meeting",Xo="joined-meeting",Zo="left-meeting",es="participant-joined",ts="participant-updated",ns="participant-left",rs="participant-counts-updated",is="access-state-updated",os="meeting-session-summary-updated",ss="meeting-session-state-updated",cl="meeting-session-data-error",as="waiting-participant-added",cs="waiting-participant-updated",ls="waiting-participant-removed",us="track-started",ds="track-stopped",hs="transcription-started",ps="transcription-stopped",fs="transcription-error",Jn="recording-started",Gn="recording-stopped",ms="recording-stats",gs="recording-error",vs="recording-upload-completed",ys="recording-data",_s="app-message",bs="transcription-message",ws="remote-media-player-started",Ss="remote-media-player-updated",Es="remote-media-player-stopped",ks="local-screen-share-started",Ts="local-screen-share-stopped",Cs="local-screen-share-canceled",Ms="active-speaker-change",As="active-speaker-mode-change",Os="network-quality-change",Ps="network-connection",Ls="cpu-load-change",Is="face-counts-updated",gt="fullscreen",vt="exited-fullscreen",js="live-streaming-started",Ds="live-streaming-updated",Ns="live-streaming-stopped",Rs="live-streaming-error",xs="lang-updated",Fs="receive-settings-updated",Yn="input-settings-updated",Wn="nonfatal-error",zn="error",gn=4096,Bi=102400,vn="iframe-call-message",$i="local-screen-start",Ji="daily-method-update-live-streaming-endpoints",It="transmit-log",Oe="daily-custom-track",Vt={NONE:"none",BGBLUR:"background-blur",BGIMAGE:"background-image",FACE_DETECTION:"face-detection"},qs={NONE:"none",NOISE_CANCELLATION:"noise-cancellation"},Hn={PLAY:"play",PAUSE:"pause"},yn=["jpg","png","jpeg"],ll="add-endpoints",ul="remove-endpoints",Gi="sip-call-transfer";function se(){return!R()&&typeof window<"u"&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}function R(){return typeof navigator<"u"&&navigator.product&&navigator.product==="ReactNative"}function Vs(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function dl(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)&&(function(n,t){if(!n||!t)return!0;switch(n){case"Chrome":return t.major>=75;case"Safari":return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")&&!(t.major===13&&t.minor===0&&t.point===0);case"Firefox":return t.major>=67}return!0}(Ve(),Kt())||R())}function Yi(){if(R()||!document)return!1;var n=document.createElement("iframe");return!!n.requestFullscreen||!!n.webkitRequestFullscreen}var hl=function(){try{var n=document.createElement("canvas"),t=n.getContext("webgl2")!=null;return n.remove(),t}catch{return!1}}();function Us(){var n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return!R()&&!!hl&&(n?function(){return zi()?!1:["Chrome","Firefox"].includes(Ve())}():function(){if(zi())return!1;var t=Ve();if(t==="Safari"){var e=gr();if(e.major<15||e.major===15&&e.minor<4)return!1}return t==="Chrome"?mr().major>=77:t==="Firefox"?vr().major>=97:["Chrome","Firefox","Safari"].includes(t)}())}function Bs(){if(R()||$s()||typeof AudioWorkletNode>"u")return!1;switch(Ve()){case"Chrome":case"Firefox":return!0;case"Safari":var n=Kt();return n.major>17||n.major===17&&n.minor>=4}return!1}function Wi(){return Vs()&&!function(){var n,t=Ve();if(!se())return!0;switch(t){case"Chrome":return(n=mr()).major&&n.major>0&&n.major<75;case"Firefox":return(n=vr()).major<91;case"Safari":return(n=gr()).major<13||n.major===13&&n.minor<1;default:return!0}}()}function $s(){return se().match(/Linux; Android/)}function zi(){var n,t,e=se(),r=e.match(/Mac/)&&(!R()&&typeof window<"u"&&(n=window)!==null&&n!==void 0&&(t=n.navigator)!==null&&t!==void 0&&t.maxTouchPoints?window.navigator.maxTouchPoints:0)>=5;return!!(e.match(/Mobi/)||e.match(/Android/)||r)||!!se().match(/DailyAnd\//)||void 0}function Ve(){if(typeof window<"u"){var n=se();return Js()?"Safari":n.indexOf("Edge")>-1?"Edge":n.match(/Chrome\//)?"Chrome":n.indexOf("Safari")>-1||Gs()?"Safari":n.indexOf("Firefox")>-1?"Firefox":n.indexOf("MSIE")>-1||n.indexOf(".NET")>-1?"IE":"Unknown Browser"}}function Kt(){switch(Ve()){case"Chrome":return mr();case"Safari":return gr();case"Firefox":return vr();case"Edge":return function(){var n=0,t=0;if(typeof window<"u"){var e=se().match(/Edge\/(\d+).(\d+)/);if(e)try{n=parseInt(e[1]),t=parseInt(e[2])}catch{}}return{major:n,minor:t}}()}}function mr(){var n=0,t=0,e=0,r=0,i=!1;if(typeof window<"u"){var s=se(),a=s.match(/Chrome\/(\d+).(\d+).(\d+).(\d+)/);if(a)try{n=parseInt(a[1]),t=parseInt(a[2]),e=parseInt(a[3]),r=parseInt(a[4]),i=s.indexOf("OPR/")>-1}catch{}}return{major:n,minor:t,build:e,patch:r,opera:i}}function Js(){return!!se().match(/iPad|iPhone|iPod/i)&&Vs()}function Gs(){return se().indexOf("AppleWebKit/605.1.15")>-1}function gr(){var n=0,t=0,e=0;if(typeof window<"u"){var r=se().match(/Version\/(\d+).(\d+)(.(\d+))?/);if(r)try{n=parseInt(r[1]),t=parseInt(r[2]),e=parseInt(r[4])}catch{}else(Js()||Gs())&&(n=14,t=0,e=3)}return{major:n,minor:t,point:e}}function vr(){var n=0,t=0;if(typeof window<"u"){var e=se().match(/Firefox\/(\d+).(\d+)/);if(e)try{n=parseInt(e[1]),t=parseInt(e[2])}catch{}}return{major:n,minor:t}}var Ys=function(){function n(){fe(this,n)}return me(n,[{key:"addListenerForMessagesFromCallMachine",value:function(t,e,r){ht()}},{key:"addListenerForMessagesFromDailyJs",value:function(t,e,r){ht()}},{key:"sendMessageToCallMachine",value:function(t,e,r,i){ht()}},{key:"sendMessageToDailyJs",value:function(t,e){ht()}},{key:"removeListener",value:function(t){ht()}}]),n}();function Hi(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function _n(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Hi(Object(e),!0).forEach(function(r){Ce(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Hi(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}function pl(n){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,r=pe(n);if(t){var i=pe(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return tn(this,e)}}var fl=function(){en(t,Ys);var n=pl(t);function t(){var e;return fe(this,t),(e=n.call(this))._wrappedListeners={},e._messageCallbacks={},e}return me(t,[{key:"addListenerForMessagesFromCallMachine",value:function(e,r,i){var s=this,a=function(l){if(l.data&&l.data.what==="iframe-call-message"&&(!l.data.callClientId||l.data.callClientId===r)&&(!l.data.from||l.data.from!=="module")){var u=_n({},l.data);if(delete u.from,u.callbackStamp&&s._messageCallbacks[u.callbackStamp]){var h=u.callbackStamp;s._messageCallbacks[h].call(i,u),delete s._messageCallbacks[h]}delete u.what,delete u.callbackStamp,e.call(i,u)}};this._wrappedListeners[e]=a,window.addEventListener("message",a)}},{key:"addListenerForMessagesFromDailyJs",value:function(e,r,i){var s=function(a){var l;if(!(!a.data||a.data.what!==vn||!a.data.action||a.data.from&&a.data.from!=="module"||a.data.callClientId&&r&&a.data.callClientId!==r||a!=null&&(l=a.data)!==null&&l!==void 0&&l.callFrameId)){var u=a.data;e.call(i,u)}};this._wrappedListeners[e]=s,window.addEventListener("message",s)}},{key:"sendMessageToCallMachine",value:function(e,r,i,s){if(!i)throw new Error("undefined callClientId. Are you trying to use a DailyCall instance previously destroyed?");var a=_n({},e);if(a.what=vn,a.from="module",a.callClientId=i,r){var l=nn();this._messageCallbacks[l]=r,a.callbackStamp=l}var u=s?s.contentWindow:window,h=this._callMachineTargetOrigin(s);h&&u.postMessage(a,h)}},{key:"sendMessageToDailyJs",value:function(e,r){e.what=vn,e.callClientId=r,e.from="embedded",window.postMessage(e,this._targetOriginFromWindowLocation())}},{key:"removeListener",value:function(e){var r=this._wrappedListeners[e];r&&(window.removeEventListener("message",r),delete this._wrappedListeners[e])}},{key:"forwardPackagedMessageToCallMachine",value:function(e,r,i){var s=_n({},e);s.callClientId=i;var a=r?r.contentWindow:window,l=this._callMachineTargetOrigin(r);l&&a.postMessage(s,l)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(e,r){var i=function(s){if(s.data&&s.data.what==="iframe-call-message"&&(!s.data.callClientId||s.data.callClientId===r)&&(!s.data.from||s.data.from!=="module")){var a=s.data;e(a)}};return this._wrappedListeners[e]=i,window.addEventListener("message",i),e}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(e){var r=this._wrappedListeners[e];r&&(window.removeEventListener("message",r),delete this._wrappedListeners[e])}},{key:"_callMachineTargetOrigin",value:function(e){return e?e.src?new URL(e.src).origin:void 0:this._targetOriginFromWindowLocation()}},{key:"_targetOriginFromWindowLocation",value:function(){return window.location.protocol==="file:"?"*":window.location.origin}}]),t}();function Qi(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function ml(n){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,r=pe(n);if(t){var i=pe(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return tn(this,e)}}var gl=function(){en(t,Ys);var n=ml(t);function t(){var e;return fe(this,t),e=n.call(this),global.callMachineToDailyJsEmitter=global.callMachineToDailyJsEmitter||new Me.EventEmitter,global.dailyJsToCallMachineEmitter=global.dailyJsToCallMachineEmitter||new Me.EventEmitter,e._wrappedListeners={},e._messageCallbacks={},e}return me(t,[{key:"addListenerForMessagesFromCallMachine",value:function(e,r,i){this._addListener(e,global.callMachineToDailyJsEmitter,r,i,"received call machine message")}},{key:"addListenerForMessagesFromDailyJs",value:function(e,r,i){this._addListener(e,global.dailyJsToCallMachineEmitter,r,i,"received daily-js message")}},{key:"sendMessageToCallMachine",value:function(e,r,i){this._sendMessage(e,global.dailyJsToCallMachineEmitter,i,r,"sending message to call machine")}},{key:"sendMessageToDailyJs",value:function(e,r){this._sendMessage(e,global.callMachineToDailyJsEmitter,r,null,"sending message to daily-js")}},{key:"removeListener",value:function(e){var r=this._wrappedListeners[e];r&&(global.callMachineToDailyJsEmitter.removeListener("message",r),global.dailyJsToCallMachineEmitter.removeListener("message",r),delete this._wrappedListeners[e])}},{key:"_addListener",value:function(e,r,i,s,a){var l=this,u=function(h){if(h.callClientId===i){if(h.callbackStamp&&l._messageCallbacks[h.callbackStamp]){var m=h.callbackStamp;l._messageCallbacks[m].call(s,h),delete l._messageCallbacks[m]}e.call(s,h)}};this._wrappedListeners[e]=u,r.addListener("message",u)}},{key:"_sendMessage",value:function(e,r,i,s,a){var l=function(h){for(var m=1;m<arguments.length;m++){var g=arguments[m]!=null?arguments[m]:{};m%2?Qi(Object(g),!0).forEach(function(v){Ce(h,v,g[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(g)):Qi(Object(g)).forEach(function(v){Object.defineProperty(h,v,Object.getOwnPropertyDescriptor(g,v))})}return h}({},e);if(l.callClientId=i,s){var u=nn();this._messageCallbacks[u]=s,l.callbackStamp=u}r.emit("message",l)}}]),t}(),Qn="replace",Kn="shallow-merge",Ki=[Qn,Kn],vl=function(){function n(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.data,r=t.mergeStrategy,i=r===void 0?Qn:r;fe(this,n),n._validateMergeStrategy(i),n._validateData(e,i),this.mergeStrategy=i,this.data=e}return me(n,[{key:"isNoOp",value:function(){return n.isNoOpUpdate(this.data,this.mergeStrategy)}}],[{key:"isNoOpUpdate",value:function(t,e){return Object.keys(t).length===0&&e===Kn}},{key:"_validateMergeStrategy",value:function(t){if(!Ki.includes(t))throw Error("Unrecognized mergeStrategy provided. Options are: [".concat(Ki,"]"))}},{key:"_validateData",value:function(t,e){if(!function(l){if(l==null||V(l)!=="object")return!1;var u=Object.getPrototypeOf(l);return u==null||u===Object.prototype}(t))throw Error("Meeting session data must be a plain (map-like) object");var r;try{if(r=JSON.stringify(t),e===Qn){var i=JSON.parse(r);ee(i,t)||console.warn("The meeting session data provided will be modified when serialized.",i,t)}else if(e===Kn){for(var s in t)if(Object.hasOwnProperty.call(t,s)&&t[s]!==void 0){var a=JSON.parse(JSON.stringify(t[s]));ee(t[s],a)||console.warn("At least one key in the meeting session data provided will be modified when serialized.",a,t[s])}}}catch(l){throw Error("Meeting session data must be serializable to JSON: ".concat(l))}if(r.length>Bi)throw Error("Meeting session data is too large (".concat(r.length," characters). Maximum size suppported is ").concat(Bi,"."))}}]),n}();function Xn(n,t,e){return Xn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(r,i,s){var a=[null];a.push.apply(a,i);var l=new(Function.bind.apply(r,a));return s&&_t(l,s.prototype),l},Xn.apply(null,arguments)}function Zn(n){var t=typeof Map=="function"?new Map:void 0;return Zn=function(e){if(e===null||(r=e,Function.toString.call(r).indexOf("[native code]")===-1))return e;var r;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return Xn(e,arguments,pe(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),_t(i,e)},Zn(n)}function yl(n){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,r=pe(n);if(t){var i=pe(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return tn(this,e)}}function Xi(n){var t,e=(t=window._daily)===null||t===void 0?void 0:t.pendings;if(e){var r=e.indexOf(n);r!==-1&&e.splice(r,1)}}var _l=function(){function n(t){fe(this,n),this._currentLoad=null,this._callClientId=t}return me(n,[{key:"load",value:function(){var t,e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;if(this.loaded)return window._daily.instances[this._callClientId].callMachine.reset(),void i(!0);t=this._callClientId,window._daily.pendings.push(t),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new bl(r,function(){i(!1)},function(a,l){l||Xi(e._callClientId),s(a,l)}),this._currentLoad.start()}},{key:"cancel",value:function(){this._currentLoad&&this._currentLoad.cancel(),Xi(this._callClientId)}},{key:"loaded",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}]),n}(),bl=function(){function n(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;fe(this,n),this._attemptsRemaining=3,this._currentAttempt=null,this._dailyConfig=t,this._successCallback=e,this._failureCallback=r}return me(n,[{key:"start",value:function(){var t=this;this._currentAttempt||(this._currentAttempt=new Zi(this._dailyConfig,this._successCallback,function e(r){t._currentAttempt.cancelled||(t._attemptsRemaining--,t._failureCallback(r,t._attemptsRemaining>0),t._attemptsRemaining<=0||setTimeout(function(){t._currentAttempt.cancelled||(t._currentAttempt=new Zi(t._dailyConfig,t._successCallback,e),t._currentAttempt.start())},3e3))}),this._currentAttempt.start())}},{key:"cancel",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:"cancelled",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:"succeeded",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}]),n}(),bn=function(){en(t,Zn(Error));var n=yl(t);function t(){return fe(this,t),n.apply(this,arguments)}return me(t)}(),Xt=2e4,Zi=function(){function n(e,r,i){fe(this,n),this._loadAttemptImpl=R()||!e.avoidEval?new wl(e,r,i):new Sl(e,r,i)}var t;return me(n,[{key:"start",value:(t=P(function*(){return this._loadAttemptImpl.start()}),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(){this._loadAttemptImpl.cancel()}},{key:"cancelled",get:function(){return this._loadAttemptImpl.cancelled}},{key:"succeeded",get:function(){return this._loadAttemptImpl.succeeded}}]),n}(),wl=function(){function n(s,a,l){fe(this,n),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache=typeof iOSCallObjectBundleCache<"u"&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._dailyConfig=s,this._successCallback=a,this._failureCallback=l}var t,e,r,i;return me(n,[{key:"start",value:(i=P(function*(){var s=$t(this._dailyConfig);!(yield this._tryLoadFromIOSCache(s))&&this._loadFromNetwork(s)}),function(){return i.apply(this,arguments)})},{key:"cancel",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:"_tryLoadFromIOSCache",value:(r=P(function*(s){if(!this._iosCache)return!1;try{var a=yield this._iosCache.get(s);return!!this.cancelled||!!a&&(a.code?(Function('"use strict";'+a.code)(),this.succeeded=!0,this._successCallback(),!0):(this._refetchHeaders=a.refetchHeaders,!1))}catch{return!1}}),function(s){return r.apply(this,arguments)})},{key:"_loadFromNetwork",value:(e=P(function*(s){var a=this;this._networkTimeout=setTimeout(function(){a._networkTimedOut=!0,a._failureCallback({msg:"Timed out (>".concat(Xt," ms) when loading call object bundle ").concat(s),type:"timeout"})},Xt);try{var l=this._refetchHeaders?{headers:this._refetchHeaders}:{},u=yield fetch(s,l);if(clearTimeout(this._networkTimeout),this.cancelled||this._networkTimedOut)throw new bn;var h=yield this._getBundleCodeFromResponse(s,u);if(this.cancelled)throw new bn;Function('"use strict";'+h)(),this._iosCache&&this._iosCache.set(s,h,u.headers),this.succeeded=!0,this._successCallback()}catch(m){if(clearTimeout(this._networkTimeout),m instanceof bn||this.cancelled||this._networkTimedOut)return;this._failureCallback({msg:"Failed to load call object bundle ".concat(s,": ").concat(m),type:m.message})}}),function(s){return e.apply(this,arguments)})},{key:"_getBundleCodeFromResponse",value:(t=P(function*(s,a){if(a.ok)return yield a.text();if(this._iosCache&&a.status===304)return(yield this._iosCache.renew(s,a.headers)).code;throw new Error("Received ".concat(a.status," response"))}),function(s,a){return t.apply(this,arguments)})}]),n}(),Sl=function(){function n(t,e,r){fe(this,n),this.cancelled=!1,this.succeeded=!1,this._dailyConfig=t,this._successCallback=e,this._failureCallback=r,this._attemptId=nn(),this._networkTimeout=null,this._scriptElement=null}return me(n,[{key:"start",value:function(){window._dailyCallMachineLoadWaitlist||(window._dailyCallMachineLoadWaitlist=new Set);var t=$t(this._dailyConfig);(typeof document>"u"?"undefined":V(document))==="object"?this._startLoading(t):this._failureCallback({msg:"Call object bundle must be loaded in a DOM/web context",type:"missing context"})}},{key:"cancel",value:function(){this._stopLoading(),this.cancelled=!0}},{key:"_startLoading",value:function(t){var e=this;this._signUpForCallMachineLoadWaitlist(),this._networkTimeout=setTimeout(function(){e._stopLoading(),e._failureCallback({msg:"Timed out (>".concat(Xt," ms) when loading call object bundle ").concat(t),type:"timeout"})},Xt);var r=document.getElementsByTagName("head")[0],i=document.createElement("script");this._scriptElement=i,i.onload=function(){e._stopLoading(),e.succeeded=!0,e._successCallback()},i.onerror=function(s){e._stopLoading(),e._failureCallback({msg:"Failed to load call object bundle ".concat(s.target.src),type:s.message})},i.src=t,r.appendChild(i)}},{key:"_stopLoading",value:function(){this._withdrawFromCallMachineLoadWaitlist(),clearTimeout(this._networkTimeout),this._scriptElement&&(this._scriptElement.onload=null,this._scriptElement.onerror=null)}},{key:"_signUpForCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.add(this._attemptId)}},{key:"_withdrawFromCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.delete(this._attemptId)}}]),n}(),jt=function(n,t,e){return kl(n.local,t,e)===!0},El=function(n,t,e){return n.local.streams&&n.local.streams[t]&&n.local.streams[t].stream&&n.local.streams[t].stream["get".concat(e==="video"?"Video":"Audio","Tracks")]()[0]},tt=function(n,t,e,r){var i=Tl(n,t,e,r);return i&&i.pendingTrack},kl=function(n,t,e){if(!n)return!1;var r=function(s){switch(s){case"avatar":return!0;case"staged":return s;default:return!!s}},i=n.public.subscribedTracks;return i&&i[t]?["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo"].indexOf(e)===-1&&i[t].custom?[!0,"staged"].includes(i[t].custom)?r(i[t].custom):r(i[t].custom[e]):r(i[t][e]):!i||r(i.ALL)},Tl=function(n,t,e,r){var i=Object.values(n.streams||{}).filter(function(s){return s.participantId===t&&s.type===e&&s.pendingTrack&&s.pendingTrack.kind===r}).sort(function(s,a){return new Date(a.starttime)-new Date(s.starttime)});return i&&i[0]},Cl=function(n,t){var e=n.local.public.customTracks;if(e&&e[t])return e[t].track};function eo(n,t){for(var e=t.getState(),r=0,i=["cam","screen"];r<i.length;r++)for(var s=i[r],a=0,l=["video","audio"];a<l.length;a++){var u=l[a],h=s==="cam"?u:"screen".concat(u.charAt(0).toUpperCase()+u.slice(1)),m=n.tracks[h];if(m){var g=n.local?El(e,s,u):tt(e,n.session_id,s,u);m.state==="playable"&&(m.track=g),m.persistentTrack=g}}}function to(n,t){try{var e=t.getState();for(var r in n.tracks)if(!Ml(r)){var i=n.tracks[r].kind;if(i){var s=n.tracks[r];if(s){var a=n.local?Cl(e,r):tt(e,n.session_id,r,i);s.state==="playable"&&(n.tracks[r].track=a),s.persistentTrack=a}}else console.error("unknown type for custom track")}}catch(l){console.error(l)}}function Ml(n){return["video","audio","screenVideo","screenAudio"].includes(n)}function no(n,t,e){var r=e.getState();if(n.local){if(n.audio)try{n.audioTrack=r.local.streams.cam.stream.getAudioTracks()[0],n.audioTrack||(n.audio=!1)}catch{}if(n.video)try{n.videoTrack=r.local.streams.cam.stream.getVideoTracks()[0],n.videoTrack||(n.video=!1)}catch{}if(n.screen)try{n.screenVideoTrack=r.local.streams.screen.stream.getVideoTracks()[0],n.screenAudioTrack=r.local.streams.screen.stream.getAudioTracks()[0],n.screenVideoTrack||n.screenAudioTrack||(n.screen=!1)}catch{}}else{var i=!0;try{var s=r.participants[n.session_id];s&&s.public&&s.public.rtcType&&s.public.rtcType.impl==="peer-to-peer"&&s.private&&!["connected","completed"].includes(s.private.peeringState)&&(i=!1)}catch(m){console.error(m)}if(!i)return n.audio=!1,n.audioTrack=!1,n.video=!1,n.videoTrack=!1,n.screen=!1,void(n.screenTrack=!1);try{if(r.streams,n.audio&&jt(r,n.session_id,"cam-audio")){var a=tt(r,n.session_id,"cam","audio");a&&(t&&t.audioTrack&&t.audioTrack.id===a.id?n.audioTrack=a:a.muted||(n.audioTrack=a)),n.audioTrack||(n.audio=!1)}if(n.video&&jt(r,n.session_id,"cam-video")){var l=tt(r,n.session_id,"cam","video");l&&(t&&t.videoTrack&&t.videoTrack.id===l.id?n.videoTrack=l:l.muted||(n.videoTrack=l)),n.videoTrack||(n.video=!1)}if(n.screen&&jt(r,n.session_id,"screen-audio")){var u=tt(r,n.session_id,"screen","audio");u&&(t&&t.screenAudioTrack&&t.screenAudioTrack.id===u.id?n.screenAudioTrack=u:u.muted||(n.screenAudioTrack=u))}if(n.screen&&jt(r,n.session_id,"screen-video")){var h=tt(r,n.session_id,"screen","video");h&&(t&&t.screenVideoTrack&&t.screenVideoTrack.id===h.id?n.screenVideoTrack=h:h.muted||(n.screenVideoTrack=h))}n.screenVideoTrack||n.screenAudioTrack||(n.screen=!1)}catch(m){console.error("unexpected error matching up tracks",m)}}}function Al(n,t){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=function(u,h){if(u){if(typeof u=="string")return ro(u,h);var m=Object.prototype.toString.call(u).slice(8,-1);if(m==="Object"&&u.constructor&&(m=u.constructor.name),m==="Map"||m==="Set")return Array.from(u);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return ro(u,h)}}(n))||t&&n&&typeof n.length=="number"){e&&(n=e);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,l=!1;return{s:function(){e=e.call(n)},n:function(){var u=e.next();return a=u.done,u},e:function(u){l=!0,s=u},f:function(){try{a||e.return==null||e.return()}finally{if(l)throw s}}}}function ro(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}var be=new Map,it=null;function Ol(n,t){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=function(u,h){if(u){if(typeof u=="string")return io(u,h);var m=Object.prototype.toString.call(u).slice(8,-1);if(m==="Object"&&u.constructor&&(m=u.constructor.name),m==="Map"||m==="Set")return Array.from(u);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return io(u,h)}}(n))||t&&n&&typeof n.length=="number"){e&&(n=e);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,l=!1;return{s:function(){e=e.call(n)},n:function(){var u=e.next();return a=u.done,u},e:function(u){l=!0,s=u},f:function(){try{a||e.return==null||e.return()}finally{if(l)throw s}}}}function io(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}var we=new Map,yt=null;function Pl(n){Ws()?function(t){be.has(t)||(be.set(t,{}),navigator.mediaDevices.enumerateDevices().then(function(e){be.has(t)&&(be.get(t).lastDevicesString=JSON.stringify(e),it||(it=function(){var r=P(function*(){var i,s=yield navigator.mediaDevices.enumerateDevices(),a=Al(be.keys());try{for(a.s();!(i=a.n()).done;){var l=i.value,u=JSON.stringify(s);u!==be.get(l).lastDevicesString&&(be.get(l).lastDevicesString=u,l(s))}}catch(h){a.e(h)}finally{a.f()}});return function(){return r.apply(this,arguments)}}(),navigator.mediaDevices.addEventListener("devicechange",it)))}).catch(function(){}))}(n):function(t){we.has(t)||(we.set(t,{}),navigator.mediaDevices.enumerateDevices().then(function(e){we.has(t)&&(we.get(t).lastDevicesString=JSON.stringify(e),yt||(yt=setInterval(P(function*(){var r,i=yield navigator.mediaDevices.enumerateDevices(),s=Ol(we.keys());try{for(s.s();!(r=s.n()).done;){var a=r.value,l=JSON.stringify(i);l!==we.get(a).lastDevicesString&&(we.get(a).lastDevicesString=l,a(i))}}catch(u){s.e(u)}finally{s.f()}}),3e3)))}))}(n)}function Ll(n){Ws()?function(t){be.has(t)&&(be.delete(t),be.size===0&&it&&(navigator.mediaDevices.removeEventListener("devicechange",it),it=null))}(n):function(t){we.has(t)&&(we.delete(t),we.size===0&&yt&&(clearInterval(yt),yt=null))}(n)}function Ws(){var n;return R()||((n=navigator.mediaDevices)===null||n===void 0?void 0:n.ondevicechange)!==void 0}var Il=new Set;function jl(n,t){var e=t.isLocalScreenVideo;return n&&n.readyState==="live"&&!function(r,i){return(!i.isLocalScreenVideo||Ve()!=="Chrome")&&r.muted&&!Il.has(r.id)}(n,{isLocalScreenVideo:e})}var Dl=["result"],Nl=["preserveIframe"];function oo(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function M(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?oo(Object(e),!0).forEach(function(r){Ce(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):oo(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}function Rl(n){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,r=pe(n);if(t){var i=pe(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return tn(this,e)}}function so(n,t){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=function(u,h){if(u){if(typeof u=="string")return ao(u,h);var m=Object.prototype.toString.call(u).slice(8,-1);if(m==="Object"&&u.constructor&&(m=u.constructor.name),m==="Map"||m==="Set")return Array.from(u);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return ao(u,h)}}(n))||t&&n&&typeof n.length=="number"){e&&(n=e);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,l=!1;return{s:function(){e=e.call(n)},n:function(){var u=e.next();return a=u.done,u},e:function(u){l=!0,s=u},f:function(){try{a||e.return==null||e.return()}finally{if(l)throw s}}}}function ao(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}var Ge={},co="video",xl="voice",lo=R()?{data:{}}:{data:{},topology:"none"},uo={present:0,hidden:0},zs={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},wn=Object.keys(zs),ho=["state","volume","simulcastEncodings"],po={androidInCallNotification:{title:"string",subtitle:"string",iconName:"string",disableForCustomOverride:"boolean"},disableAutoDeviceManagement:{audio:"boolean",video:"boolean"}},Zt={id:{iconPath:"string",iconPathDarkMode:"string",label:"string",tooltip:"string",visualState:"'default' | 'sidebar-open' | 'active'"}},er={id:{allow:"string",controlledBy:"'*' | 'owners' | string[]",csp:"string",iconURL:"string",label:"string",loading:"'eager' | 'lazy'",location:"'main' | 'sidebar'",name:"string",referrerPolicy:"string",sandbox:"string",src:"string",srcdoc:"string",shared:"string[] | 'owners' | boolean"}},Ye={customIntegrations:{validate:na,help:ea()},customTrayButtons:{validate:ta,help:"customTrayButtons should be a dictionary of the type ".concat(JSON.stringify(Zt))},url:{validate:function(n){return typeof n=="string"},help:"url should be a string"},baseUrl:{validate:function(n){return typeof n=="string"},help:"baseUrl should be a string"},token:{validate:function(n){return typeof n=="string"},help:"token should be a string",queryString:"t"},dailyConfig:{validate:function(n,t){try{return t.validateDailyConfig(n),!0}catch(e){console.error("Failed to validate dailyConfig",e)}return!1},help:"Unsupported dailyConfig. Check error logs for detailed info."},reactNativeConfig:{validate:function(n){return ra(n,po)},help:"reactNativeConfig should look like ".concat(JSON.stringify(po),", all fields optional")},lang:{validate:function(n){return["da","de","en-us","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","pt-BR","ru","sv","tr","user"].includes(n)},help:"language not supported. Options are: da, de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, pt-BR, ru, sv, tr, user"},userName:!0,userData:{validate:function(n){try{return Hs(n),!0}catch(t){return console.error(t),!1}},help:"invalid userData type provided"},startVideoOff:!0,startAudioOff:!0,allowLocalVideo:!0,allowLocalAudio:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,showUserNameChangeUI:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(n,t){if(typeof n=="boolean")return t._preloadCache.allowLocalVideo=n,!0;var e;if(n instanceof MediaStreamTrack)t._sharedTracks.videoTrack=n,e={customTrack:Oe};else{if(delete t._sharedTracks.videoTrack,typeof n!="string")return console.error("videoSource must be a MediaStreamTrack, boolean, or a string"),!1;e={deviceId:n}}return t._updatePreloadCacheInputSettings({video:{settings:e}},!1),!0}},audioSource:{validate:function(n,t){if(typeof n=="boolean")return t._preloadCache.allowLocalAudio=n,!0;var e;if(n instanceof MediaStreamTrack)t._sharedTracks.audioTrack=n,e={customTrack:Oe};else{if(delete t._sharedTracks.audioTrack,typeof n!="string")return console.error("audioSource must be a MediaStreamTrack, boolean, or a string"),!1;e={deviceId:n}}return t._updatePreloadCacheInputSettings({audio:{settings:e}},!1),!0}},subscribeToTracksAutomatically:{validate:function(n,t){return t._preloadCache.subscribeToTracksAutomatically=n,!0}},theme:{validate:function(n){var t=["accent","accentText","background","backgroundAccent","baseText","border","mainAreaBg","mainAreaBgAccent","mainAreaText","supportiveText"],e=function(r){for(var i=0,s=Object.keys(r);i<s.length;i++){var a=s[i];if(!t.includes(a))return console.error('unsupported color "'.concat(a,'". Valid colors: ').concat(t.join(", "))),!1;if(!r[a].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error("".concat(a,' theme color should be provided in valid hex color format. Received: "').concat(r[a],'"')),!1}return!0};return V(n)==="object"&&("light"in n&&"dark"in n||"colors"in n)?"light"in n&&"dark"in n?"colors"in n.light?"colors"in n.dark?e(n.light.colors)&&e(n.dark.colors):(console.error('Dark theme is missing "colors" property.',n),!1):(console.error('Light theme is missing "colors" property.',n),!1):e(n.colors):(console.error('Theme must contain either both "light" and "dark" properties, or "colors".',n),!1)},help:"unsupported theme configuration. Check error logs for detailed info."},layoutConfig:{validate:function(n){if("grid"in n){var t=n.grid;if("maxTilesPerPage"in t){if(!Number.isInteger(t.maxTilesPerPage))return console.error("grid.maxTilesPerPage should be an integer. You passed ".concat(t.maxTilesPerPage,".")),!1;if(t.maxTilesPerPage>49)return console.error("grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case."),!1}if("minTilesPerPage"in t){if(!Number.isInteger(t.minTilesPerPage))return console.error("grid.minTilesPerPage should be an integer. You passed ".concat(t.minTilesPerPage,".")),!1;if(t.minTilesPerPage<1)return console.error("grid.minTilesPerPage can't be lower than 1."),!1;if("maxTilesPerPage"in t&&t.minTilesPerPage>t.maxTilesPerPage)return console.error("grid.minTilesPerPage can't be higher than grid.maxTilesPerPage."),!1}}return!0},help:"unsupported layoutConfig. Check error logs for detailed info."},receiveSettings:{validate:function(n){return Qs(n,{allowAllParticipantsKey:!1})},help:Zs({allowAllParticipantsKey:!1})},sendSettings:{validate:function(n,t){return!!function(e,r){try{return r.validateUpdateSendSettings(e),!0}catch(i){return console.error("Failed to validate send settings",i),!1}}(n,t)&&(t._preloadCache.sendSettings=n,!0)},help:"Invalid sendSettings provided. Check error logs for detailed info."},inputSettings:{validate:function(n,t){var e;return!!Ks(n)&&(t._inputSettings||(t._inputSettings={}),Xs(n,(e=t.properties)===null||e===void 0?void 0:e.dailyConfig,t._sharedTracks),t._updatePreloadCacheInputSettings(n,!0),!0)},help:tr()},layout:{validate:function(n){return n==="custom-v1"||n==="browser"||n==="none"},help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"},embHref:{queryString:"embHref"},dailyJsVersion:{queryString:"dailyJsVersion"},proxy:{queryString:"proxy"},strictMode:!0,allowMultipleCallInstances:!0},Dt={styles:{validate:function(n){for(var t in n)if(t!=="cam"&&t!=="screen")return!1;if(n.cam){for(var e in n.cam)if(e!=="div"&&e!=="video")return!1}if(n.screen){for(var r in n.screen)if(r!=="div"&&r!=="video")return!1}return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setSubscribedTracks:{validate:function(n,t){if(t._preloadCache.subscribeToTracksAutomatically)return!1;var e=[!0,!1,"staged"];if(e.includes(n)||!R()&&n==="avatar")return!0;var r=["audio","video","screenAudio","screenVideo","rmpAudio","rmpVideo"];return function i(s){var a=arguments.length>1&&arguments[1]!==void 0&&arguments[1];for(var l in s)if(l==="custom"){if(!e.includes(s[l])&&!i(s[l],!0))return!1}else{var u=!a&&!r.includes(l),h=!e.includes(s[l]);if(u||h)return!1}return!0}(n)},help:"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: "+"true".concat(R()?"":" | 'avatar'"," | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }")},setAudio:!0,setVideo:!0,setScreenShare:{validate:function(n){return n===!1},help:"setScreenShare must be false, as it's only meant for stopping remote participants' screen shares"},eject:!0,updatePermissions:{validate:function(n){for(var t=0,e=Object.entries(n);t<e.length;t++){var r=Se(e[t],2),i=r[0],s=r[1];switch(i){case"hasPresence":if(typeof s!="boolean")return!1;break;case"canSend":if(s instanceof Set||s instanceof Array||Array.isArray(s)){var a,l=["video","audio","screenVideo","screenAudio","customVideo","customAudio"],u=so(s);try{for(u.s();!(a=u.n()).done;){var h=a.value;if(!l.includes(h))return!1}}catch(_){u.e(_)}finally{u.f()}}else if(typeof s!="boolean")return!1;(s instanceof Array||Array.isArray(s))&&(n.canSend=new Set(s));break;case"canAdmin":if(s instanceof Set||s instanceof Array||Array.isArray(s)){var m,g=["participants","streaming","transcription"],v=so(s);try{for(v.s();!(m=v.n()).done;){var w=m.value;if(!g.includes(w))return!1}}catch(_){v.e(_)}finally{v.f()}}else if(typeof s!="boolean")return!1;(s instanceof Array||Array.isArray(s))&&(n.canAdmin=new Set(s));break;default:return!1}}return!0},help:"updatePermissions can take hasPresence, canSend, and canAdmin permissions. hasPresence must be a boolean. canSend can be a boolean or an Array or Set of media types (video, audio, screenVideo, screenAudio, customVideo, customAudio). canAdmin can be a boolean or an Array or Set of admin types (participants, streaming, transcription)."}};Promise.any||(Promise.any=function(){var n=P(function*(t){return new Promise(function(e,r){var i=[];t.forEach(function(s){return Promise.resolve(s).then(function(a){e(a)}).catch(function(a){i.push(a),i.length===t.length&&r(i)})})})});return function(t){return n.apply(this,arguments)}}());var Fl=function(){en(ce,Me);var n,t,e,r,i,s,a,l,u,h,m,g,v,w,_,E,T,O,j,x,z,Y,ae,ie,ge,Ue,ut,_r,br,wr,Sr,Er,kr,Tr,Cr,Mr,Ar,Or,fa=Rl(ce);function ce(o){var d,c,f,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(fe(this,ce),Ce(Ee(c=fa.call(this)),"startListeningForDeviceChanges",function(){Pl(c.handleDeviceChange)}),Ce(Ee(c),"stopListeningForDeviceChanges",function(){Ll(c.handleDeviceChange)}),Ce(Ee(c),"handleDeviceChange",function(S){S=S.map(function(k){return JSON.parse(JSON.stringify(k))}),c.emitDailyJSEvent({action:"available-devices-updated",availableDevices:S})}),Ce(Ee(c),"handleNativeAppStateChange",function(){var S=P(function*(k){if(k==="destroyed")return console.warn("App has been destroyed before leaving the meeting. Cleaning up all the resources!"),void(yield c.destroy());var A=k==="active";c.disableReactNativeAutoDeviceManagement("video")||(A?c.camUnmutedBeforeLosingNativeActiveState&&c.setLocalVideo(!0):(c.camUnmutedBeforeLosingNativeActiveState=c.localVideo(),c.camUnmutedBeforeLosingNativeActiveState&&c.setLocalVideo(!1)))});return function(k){return S.apply(this,arguments)}}()),Ce(Ee(c),"handleNativeAudioFocusChange",function(S){c.disableReactNativeAutoDeviceManagement("audio")||(c._hasNativeAudioFocus=S,c.toggleParticipantAudioBasedOnNativeAudioFocus(),c._hasNativeAudioFocus?c.micUnmutedBeforeLosingNativeAudioFocus&&c.setLocalAudio(!0):(c.micUnmutedBeforeLosingNativeAudioFocus=c.localAudio(),c.setLocalAudio(!1)))}),Ce(Ee(c),"handleNativeSystemScreenCaptureStop",function(){c.stopScreenShare()}),c.strictMode=p.strictMode===void 0||p.strictMode,c.allowMultipleCallInstances=(d=p.allowMultipleCallInstances)!==null&&d!==void 0&&d,Object.keys(Ge).length&&(c._logDuplicateInstanceAttempt(),!c.allowMultipleCallInstances)){if(c.strictMode)throw new Error("Duplicate DailyIframe instances are not allowed");console.warn("Using strictMode: false to allow multiple call instances is now deprecated. Set `allowMultipleCallInstances: true`")}if(window._daily||(window._daily={pendings:[],instances:{}}),c.callClientId=nn(),f=Ee(c),Ge[f.callClientId]=f,window._daily.instances[c.callClientId]={},c._sharedTracks={},window._daily.instances[c.callClientId].tracks=c._sharedTracks,p.dailyJsVersion=ce.version(),c._iframe=o,c._callObjectMode=p.layout==="none"&&!c._iframe,c._preloadCache={subscribeToTracksAutomatically:!0,outputDeviceId:null,inputSettings:null,sendSettings:null,videoTrackForNetworkConnectivityTest:null,videoTrackForConnectionQualityTest:null},p.showLocalVideo!==void 0?c._callObjectMode?console.error("showLocalVideo is not available in call object mode"):c._showLocalVideo=!!p.showLocalVideo:c._showLocalVideo=!0,p.showParticipantsBar!==void 0?c._callObjectMode?console.error("showParticipantsBar is not available in call object mode"):c._showParticipantsBar=!!p.showParticipantsBar:c._showParticipantsBar=!0,p.customIntegrations!==void 0?c._callObjectMode?console.error("customIntegrations is not available in call object mode"):c._customIntegrations=p.customIntegrations:c._customIntegrations={},p.customTrayButtons!==void 0?c._callObjectMode?console.error("customTrayButtons is not available in call object mode"):c._customTrayButtons=p.customTrayButtons:c._customTrayButtons={},p.activeSpeakerMode!==void 0?c._callObjectMode?console.error("activeSpeakerMode is not available in call object mode"):c._activeSpeakerMode=!!p.activeSpeakerMode:c._activeSpeakerMode=!1,p.receiveSettings?c._callObjectMode?c._receiveSettings=p.receiveSettings:console.error("receiveSettings is only available in call object mode"):c._receiveSettings={},c.validateProperties(p),c.properties=M({},p),c._inputSettings||(c._inputSettings={}),c._callObjectLoader=c._callObjectMode?new _l(c.callClientId):null,c._callState=Un,c._isPreparingToJoin=!1,c._accessState={access:qt},c._meetingSessionSummary={},c._finalSummaryOfPrevSession={},c._meetingSessionState=kn(lo,c._callObjectMode),c._nativeInCallAudioMode=co,c._participants={},c._isScreenSharing=!1,c._participantCounts=uo,c._rmpPlayerState={},c._waitingParticipants={},c._network={threshold:"good",quality:100},c._activeSpeaker={},c._localAudioLevel=0,c._isLocalAudioLevelObserverRunning=!1,c._remoteParticipantsAudioLevel={},c._isRemoteParticipantsAudioLevelObserverRunning=!1,c._maxAppMessageSize=gn,c._messageChannel=R()?new gl:new fl,c._iframe&&(c._iframe.requestFullscreen?c._iframe.addEventListener("fullscreenchange",function(){document.fullscreenElement===c._iframe?(c.emitDailyJSEvent({action:gt}),c.sendMessageToCallMachine({action:gt})):(c.emitDailyJSEvent({action:vt}),c.sendMessageToCallMachine({action:vt}))}):c._iframe.webkitRequestFullscreen&&c._iframe.addEventListener("webkitfullscreenchange",function(){document.webkitFullscreenElement===c._iframe?(c.emitDailyJSEvent({action:gt}),c.sendMessageToCallMachine({action:gt})):(c.emitDailyJSEvent({action:vt}),c.sendMessageToCallMachine({action:vt}))})),R()){var y=c.nativeUtils();y.addAudioFocusChangeListener&&y.removeAudioFocusChangeListener&&y.addAppStateChangeListener&&y.removeAppStateChangeListener&&y.addSystemScreenCaptureStopListener&&y.removeSystemScreenCaptureStopListener||console.warn("expected (add|remove)(AudioFocusChange|AppActiveStateChange|SystemScreenCaptureStop)Listener to be available in React Native"),c._hasNativeAudioFocus=!0,y.addAudioFocusChangeListener(c.handleNativeAudioFocusChange),y.addAppStateChangeListener(c.handleNativeAppStateChange),y.addSystemScreenCaptureStopListener(c.handleNativeSystemScreenCaptureStop)}return c._callObjectMode&&c.startListeningForDeviceChanges(),c._messageChannel.addListenerForMessagesFromCallMachine(c.handleMessageFromCallMachine,c.callClientId,Ee(c)),c}return me(ce,[{key:"destroy",value:(Or=P(function*(){var o,d;try{yield this.leave()}catch{}var c=this._iframe;if(c){var f=c.parentElement;f&&f.removeChild(c)}if(this._messageChannel.removeListener(this.handleMessageFromCallMachine),R()){var p=this.nativeUtils();p.removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),p.removeAppStateChangeListener(this.handleNativeAppStateChange),p.removeSystemScreenCaptureStopListener(this.handleNativeSystemScreenCaptureStop)}this._callObjectMode&&this.stopListeningForDeviceChanges(),this.resetMeetingDependentVars(),this._destroyed=!0,this.emitDailyJSEvent({action:"call-instance-destroyed"}),delete Ge[this.callClientId],!((o=window)===null||o===void 0||(d=o._daily)===null||d===void 0)&&d.instances&&delete window._daily.instances[this.callClientId],this.strictMode&&(this.callClientId=void 0)}),function(){return Or.apply(this,arguments)})},{key:"isDestroyed",value:function(){return!!this._destroyed}},{key:"loadCss",value:function(o){var d=o.bodyClass,c=o.cssFile,f=o.cssText;return D(),this.sendMessageToCallMachine({action:"load-css",cssFile:this.absoluteUrl(c),bodyClass:d,cssText:f}),this}},{key:"iframe",value:function(){return D(),this._iframe}},{key:"meetingState",value:function(){return this._callState}},{key:"accessState",value:function(){return le(this._callObjectMode,"accessState()"),this._accessState}},{key:"participants",value:function(){return this._participants}},{key:"participantCounts",value:function(){return this._participantCounts}},{key:"waitingParticipants",value:function(){return le(this._callObjectMode,"waitingParticipants()"),this._waitingParticipants}},{key:"validateParticipantProperties",value:function(o,d){for(var c in d){if(!Dt[c])throw new Error("unrecognized updateParticipant property ".concat(c));if(Dt[c].validate&&!Dt[c].validate(d[c],this,this._participants[o]))throw new Error(Dt[c].help)}}},{key:"updateParticipant",value:function(o,d){return this._participants.local&&this._participants.local.session_id===o&&(o="local"),o&&d&&(this.validateParticipantProperties(o,d),this.sendMessageToCallMachine({action:"update-participant",id:o,properties:d})),this}},{key:"updateParticipants",value:function(o){var d=this._participants.local&&this._participants.local.session_id;for(var c in o)c===d&&(c="local"),c&&o[c]&&this.validateParticipantProperties(c,o[c]);return this.sendMessageToCallMachine({action:"update-participants",participants:o}),this}},{key:"updateWaitingParticipant",value:(Ar=P(function*(){var o=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(le(this._callObjectMode,"updateWaitingParticipant()"),J(this._callState,"updateWaitingParticipant()"),typeof d!="string"||V(c)!=="object")throw new Error("updateWaitingParticipant() must take an id string and a updates object");return new Promise(function(f,p){o.sendMessageToCallMachine({action:"daily-method-update-waiting-participant",id:d,updates:c},function(y){y.error&&p(y.error),y.id||p(new Error("unknown error in updateWaitingParticipant()")),f({id:y.id})})})}),function(){return Ar.apply(this,arguments)})},{key:"updateWaitingParticipants",value:(Mr=P(function*(){var o=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(le(this._callObjectMode,"updateWaitingParticipants()"),J(this._callState,"updateWaitingParticipants()"),V(d)!=="object")throw new Error("updateWaitingParticipants() must take a mapping between ids and update objects");return new Promise(function(c,f){o.sendMessageToCallMachine({action:"daily-method-update-waiting-participants",updatesById:d},function(p){p.error&&f(p.error),p.ids||f(new Error("unknown error in updateWaitingParticipants()")),c({ids:p.ids})})})}),function(){return Mr.apply(this,arguments)})},{key:"requestAccess",value:(Cr=P(function*(){var o=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=d.access,f=c===void 0?{level:Vo}:c,p=d.name,y=p===void 0?"":p;return le(this._callObjectMode,"requestAccess()"),J(this._callState,"requestAccess()"),new Promise(function(S,k){o.sendMessageToCallMachine({action:"daily-method-request-access",access:f,name:y},function(A){A.error&&k(A.error),A.access||k(new Error("unknown error in requestAccess()")),S({access:A.access,granted:A.granted})})})}),function(){return Cr.apply(this,arguments)})},{key:"localAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.audio.state):null}},{key:"localVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.video.state):null}},{key:"setLocalAudio",value:function(o){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return"forceDiscardTrack"in d&&(R()?(console.warn("forceDiscardTrack option not supported in React Native; ignoring"),d={}):o&&(console.warn("forceDiscardTrack option only supported when calling setLocalAudio(false); ignoring"),d={})),this.sendMessageToCallMachine({action:"local-audio",state:o,options:d}),this}},{key:"localScreenAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenAudio.state):null}},{key:"localScreenVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenVideo.state):null}},{key:"updateScreenShare",value:function(o){if(this._isScreenSharing)return this.sendMessageToCallMachine({action:"local-screen-update",options:o}),this;console.warn("There is no screen share in progress. Try calling startScreenShare first.")}},{key:"setLocalVideo",value:function(o){return this.sendMessageToCallMachine({action:"local-video",state:o}),this}},{key:"_setAllowLocalAudio",value:function(o){if(this._preloadCache.allowLocalAudio=o,this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-allow-local-audio",state:o}),this}},{key:"_setAllowLocalVideo",value:function(o){if(this._preloadCache.allowLocalVideo=o,this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-allow-local-video",state:o}),this}},{key:"getReceiveSettings",value:(Tr=P(function*(o){var d=this,c=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).showInheritedValues,f=c!==void 0&&c;if(le(this._callObjectMode,"getReceiveSettings()"),!this._callMachineInitialized)return this._receiveSettings;switch(V(o)){case"string":return new Promise(function(p){d.sendMessageToCallMachine({action:"get-single-participant-receive-settings",id:o,showInheritedValues:f},function(y){p(y.receiveSettings)})});case"undefined":return this._receiveSettings;default:throw new Error('first argument to getReceiveSettings() must be a participant id (or "base"), or there should be no arguments')}}),function(o){return Tr.apply(this,arguments)})},{key:"updateReceiveSettings",value:(kr=P(function*(o){var d=this;if(le(this._callObjectMode,"updateReceiveSettings()"),!Qs(o,{allowAllParticipantsKey:!0}))throw new Error(Zs({allowAllParticipantsKey:!0}));return J(this._callState,"updateReceiveSettings()","To specify receive settings earlier, use the receiveSettings config property."),new Promise(function(c){d.sendMessageToCallMachine({action:"update-receive-settings",receiveSettings:o},function(f){c({receiveSettings:f.receiveSettings})})})}),function(o){return kr.apply(this,arguments)})},{key:"_prepInputSettingsForSharing",value:function(o,d){if(o){var c={};if(o.audio){var f,p,y,S;o.audio.settings&&(!Object.keys(o.audio.settings).length&&d||(c.audio={settings:M({},o.audio.settings)})),d&&(f=c.audio)!==null&&f!==void 0&&(p=f.settings)!==null&&p!==void 0&&p.customTrack&&(c.audio.settings={customTrack:this._sharedTracks.audioTrack});var k=((y=o.audio.processor)===null||y===void 0?void 0:y.type)==="none"&&((S=o.audio.processor)===null||S===void 0?void 0:S._isDefaultWhenNone);if(o.audio.processor&&!k){var A=M({},o.audio.processor);delete A._isDefaultWhenNone,c.audio=M(M({},c.audio),{},{processor:A})}}if(o.video){var q,N,H,ve;o.video.settings&&(!Object.keys(o.video.settings).length&&d||(c.video={settings:M({},o.video.settings)})),d&&(q=c.video)!==null&&q!==void 0&&(N=q.settings)!==null&&N!==void 0&&N.customTrack&&(c.video.settings={customTrack:this._sharedTracks.videoTrack});var Le=((H=o.video.processor)===null||H===void 0?void 0:H.type)==="none"&&((ve=o.video.processor)===null||ve===void 0?void 0:ve._isDefaultWhenNone);if(o.video.processor&&!Le){var Be=M({},o.video.processor);delete Be._isDefaultWhenNone,c.video=M(M({},c.video),{},{processor:Be})}}return c}}},{key:"getInputSettings",value:function(){var o=this;return D(),new Promise(function(d){d(o._getInputSettings())})}},{key:"_getInputSettings",value:function(){var o,d,c,f,p,y,S,k,A={processor:{type:"none",_isDefaultWhenNone:!0}};this._inputSettings?(o=((c=this._inputSettings)===null||c===void 0?void 0:c.video)||A,d=((f=this._inputSettings)===null||f===void 0?void 0:f.audio)||A):(o=((p=this._preloadCache)===null||p===void 0||(y=p.inputSettings)===null||y===void 0?void 0:y.video)||A,d=((S=this._preloadCache)===null||S===void 0||(k=S.inputSettings)===null||k===void 0?void 0:k.audio)||A);var q={audio:d,video:o};return this._prepInputSettingsForSharing(q,!0)}},{key:"_updatePreloadCacheInputSettings",value:function(o,d){var c=this._inputSettings||{},f={};if(o.video){var p,y,S;f.video={},o.video.settings?(f.video.settings={},d||o.video.settings.customTrack||(S=c.video)===null||S===void 0||!S.settings?f.video.settings=o.video.settings:f.video.settings=M(M({},c.video.settings),o.video.settings),Object.keys(f.video.settings).length||delete f.video.settings):(p=c.video)!==null&&p!==void 0&&p.settings&&(f.video.settings=c.video.settings),o.video.processor?f.video.processor=o.video.processor:(y=c.video)!==null&&y!==void 0&&y.processor&&(f.video.processor=c.video.processor)}else c.video&&(f.video=c.video);if(o.audio){var k,A,q;f.audio={},o.audio.settings?(f.audio.settings={},d||o.audio.settings.customTrack||(q=c.audio)===null||q===void 0||!q.settings?f.audio.settings=o.audio.settings:f.audio.settings=M(M({},c.audio.settings),o.audio.settings),Object.keys(f.audio.settings).length||delete f.audio.settings):(k=c.audio)!==null&&k!==void 0&&k.settings&&(f.audio.settings=c.audio.settings),o.audio.processor?f.audio.processor=o.audio.processor:(A=c.audio)!==null&&A!==void 0&&A.processor&&(f.audio.processor=c.audio.processor)}else c.audio&&(f.audio=c.audio);this._maybeUpdateInputSettings(f)}},{key:"_devicesFromInputSettings",value:function(o){var d,c,f,p,y=(o==null||(d=o.video)===null||d===void 0||(c=d.settings)===null||c===void 0?void 0:c.deviceId)||null,S=(o==null||(f=o.audio)===null||f===void 0||(p=f.settings)===null||p===void 0?void 0:p.deviceId)||null,k=this._preloadCache.outputDeviceId||null;return{camera:y?{deviceId:y}:{},mic:S?{deviceId:S}:{},speaker:k?{deviceId:k}:{}}}},{key:"updateInputSettings",value:(Er=P(function*(o){var d=this;return D(),Ks(o)?o.video||o.audio?(Xs(o,this.properties.dailyConfig,this._sharedTracks),this._callObjectMode&&!this._callMachineInitialized?(this._updatePreloadCacheInputSettings(o,!0),this._getInputSettings()):new Promise(function(c,f){d.sendMessageToCallMachine({action:"update-input-settings",inputSettings:o},function(p){if(p.error)f(p.error);else{if(p.returnPreloadCache)return d._updatePreloadCacheInputSettings(o,!0),void c(d._getInputSettings());d._maybeUpdateInputSettings(p.inputSettings),c(d._prepInputSettingsForSharing(p.inputSettings,!0))}})})):this._getInputSettings():(console.error(tr()),Promise.reject(tr()))}),function(o){return Er.apply(this,arguments)})},{key:"setBandwidth",value:function(o){var d=o.kbs,c=o.trackConstraints;if(D(),this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-bandwidth",kbs:d,trackConstraints:c}),this}},{key:"getDailyLang",value:function(){var o=this;if(D(),this._callMachineInitialized)return new Promise(function(d){o.sendMessageToCallMachine({action:"get-daily-lang"},function(c){delete c.action,delete c.callbackStamp,d(c)})})}},{key:"setDailyLang",value:function(o){return D(),this.sendMessageToCallMachine({action:"set-daily-lang",lang:o}),this}},{key:"setProxyUrl",value:function(o){return this.sendMessageToCallMachine({action:"set-proxy-url",proxyUrl:o}),this}},{key:"setIceConfig",value:function(o){return this.sendMessageToCallMachine({action:"set-ice-config",iceConfig:o}),this}},{key:"meetingSessionSummary",value:function(){return[je,ke].includes(this._callState)?this._finalSummaryOfPrevSession:this._meetingSessionSummary}},{key:"getMeetingSession",value:(Sr=P(function*(){var o=this;return console.warn("getMeetingSession() is deprecated: use meetingSessionSummary(), which will return immediately"),J(this._callState,"getMeetingSession()"),new Promise(function(d){o.sendMessageToCallMachine({action:"get-meeting-session"},function(c){delete c.action,delete c.callbackStamp,d(c)})})}),function(){return Sr.apply(this,arguments)})},{key:"meetingSessionState",value:function(){return J(this._callState,"meetingSessionState"),this._meetingSessionState}},{key:"setMeetingSessionData",value:function(o){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"replace";le(this._callObjectMode,"setMeetingSessionData()"),J(this._callState,"setMeetingSessionData");try{(function(c,f){new vl({data:c,mergeStrategy:f})})(o,d)}catch(c){throw console.error(c),c}try{this.sendMessageToCallMachine({action:"set-session-data",data:o,mergeStrategy:d})}catch(c){throw new Error("Error setting meeting session data: ".concat(c))}}},{key:"setUserName",value:function(o,d){var c=this;return this.properties.userName=o,new Promise(function(f){c.sendMessageToCallMachine({action:"set-user-name",name:o??"",thisMeetingOnly:R()||!!d&&!!d.thisMeetingOnly},function(p){delete p.action,delete p.callbackStamp,f(p)})})}},{key:"setUserData",value:(wr=P(function*(o){var d=this;try{Hs(o)}catch(c){throw console.error(c),c}if(this.properties.userData=o,this._callMachineInitialized)return new Promise(function(c){try{d.sendMessageToCallMachine({action:"set-user-data",userData:o},function(f){delete f.action,delete f.callbackStamp,c(f)})}catch(f){throw new Error("Error setting user data: ".concat(f))}})}),function(o){return wr.apply(this,arguments)})},{key:"validateAudioLevelInterval",value:function(o){if(o&&(o<100||typeof o!="number"))throw new Error("The interval must be a number greater than or equal to 100 milliseconds.")}},{key:"startLocalAudioLevelObserver",value:function(o){var d=this;if(typeof AudioWorkletNode>"u"&&!R())throw new Error("startLocalAudioLevelObserver() is not supported on this browser");if(this.validateAudioLevelInterval(o),this._callMachineInitialized)return this._isLocalAudioLevelObserverRunning=!0,new Promise(function(c,f){d.sendMessageToCallMachine({action:"start-local-audio-level-observer",interval:o},function(p){d._isLocalAudioLevelObserverRunning=!p.error,p.error?f({error:p.error}):c()})});this._preloadCache.localAudioLevelObserver={enabled:!0,interval:o}}},{key:"isLocalAudioLevelObserverRunning",value:function(){return this._isLocalAudioLevelObserverRunning}},{key:"stopLocalAudioLevelObserver",value:function(){this._preloadCache.localAudioLevelObserver=null,this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-local-audio-level-observer"})}},{key:"startRemoteParticipantsAudioLevelObserver",value:function(o){var d=this;if(this.validateAudioLevelInterval(o),this._callMachineInitialized)return this._isRemoteParticipantsAudioLevelObserverRunning=!0,new Promise(function(c,f){d.sendMessageToCallMachine({action:"start-remote-participants-audio-level-observer",interval:o},function(p){d._isRemoteParticipantsAudioLevelObserverRunning=!p.error,p.error?f({error:p.error}):c()})});this._preloadCache.remoteParticipantsAudioLevelObserver={enabled:!0,interval:o}}},{key:"isRemoteParticipantsAudioLevelObserverRunning",value:function(){return this._isRemoteParticipantsAudioLevelObserverRunning}},{key:"stopRemoteParticipantsAudioLevelObserver",value:function(){this._preloadCache.remoteParticipantsAudioLevelObserver=null,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-remote-participants-audio-level-observer"})}},{key:"startCamera",value:(br=P(function*(){var o=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(le(this._callObjectMode,"startCamera()"),Sn(this._callState,this._isPreparingToJoin,"startCamera()","Did you mean to use setLocalAudio() and/or setLocalVideo() instead?"),this.needsLoad())try{yield this.load(d)}catch(c){return Promise.reject(c)}else{if(this._didPreAuth){if(d.url&&d.url!==this.properties.url)return console.error("url in startCamera() is different than the one used in preAuth()"),Promise.reject();if(d.token&&d.token!==this.properties.token)return console.error("token in startCamera() is different than the one used in preAuth()"),Promise.reject()}this.validateProperties(d),this.properties=M(M({},this.properties),d)}return new Promise(function(c){o._preloadCache.inputSettings=o._prepInputSettingsForSharing(o._inputSettings,!1),o.sendMessageToCallMachine({action:"start-camera",properties:et(o.properties,o.callClientId),preloadCache:et(o._preloadCache,o.callClientId)},function(f){c({camera:f.camera,mic:f.mic,speaker:f.speaker})})})}),function(){return br.apply(this,arguments)})},{key:"validateCustomTrack",value:function(o,d,c){if(c&&c.length>50)throw new Error("Custom track `trackName` must not be more than 50 characters");if(d&&d!=="music"&&d!=="speech"&&!(d instanceof Object))throw new Error("Custom track `mode` must be either `music` | `speech` | `DailyMicAudioModeSettings` or `undefined`");if(c&&["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo","customVideoDefaults"].includes(c))throw new Error("Custom track `trackName` must not match a track name already used by daily: cam-audio, cam-video, customVideoDefaults, screen-video, screen-audio, rmpAudio, rmpVideo");if(!(o instanceof MediaStreamTrack))throw new Error("Custom tracks provided must be instances of MediaStreamTrack")}},{key:"startCustomTrack",value:function(){var o=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{track,mode,trackName};return D(),J(this._callState,"startCustomTrack()"),this.validateCustomTrack(d.track,d.mode,d.trackName),new Promise(function(c,f){o._sharedTracks.customTrack=d.track,d.track=Oe,o.sendMessageToCallMachine({action:"start-custom-track",properties:d},function(p){p.error?f({error:p.error}):c(p.mediaTag)})})}},{key:"stopCustomTrack",value:function(o){var d=this;return D(),J(this._callState,"stopCustomTrack()"),new Promise(function(c){d.sendMessageToCallMachine({action:"stop-custom-track",mediaTag:o},function(f){c(f.mediaTag)})})}},{key:"setCamera",value:function(o){var d=this;return ft(),Nt(this._callMachineInitialized,"setCamera()"),new Promise(function(c){d.sendMessageToCallMachine({action:"set-camera",cameraDeviceId:o},function(f){c({device:f.device})})})}},{key:"setAudioDevice",value:(_r=P(function*(o){return ft(),this.nativeUtils().setAudioDevice(o),{deviceId:yield this.nativeUtils().getAudioDevice()}}),function(o){return _r.apply(this,arguments)})},{key:"cycleCamera",value:function(){var o=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(c){o.sendMessageToCallMachine({action:"cycle-camera",properties:d},function(f){c({device:f.device})})})}},{key:"cycleMic",value:function(){var o=this;return D(),new Promise(function(d){o.sendMessageToCallMachine({action:"cycle-mic"},function(c){d({device:c.device})})})}},{key:"getCameraFacingMode",value:function(){var o=this;return ft(),new Promise(function(d){o.sendMessageToCallMachine({action:"get-camera-facing-mode"},function(c){d(c.facingMode)})})}},{key:"setInputDevicesAsync",value:(ut=P(function*(o){var d=this,c=o.audioDeviceId,f=o.videoDeviceId,p=o.audioSource,y=o.videoSource;if(D(),p!==void 0&&(c=p),y!==void 0&&(f=y),typeof c=="boolean"&&(this._setAllowLocalAudio(c),c=void 0),typeof f=="boolean"&&(this._setAllowLocalVideo(f),f=void 0),!c&&!f)return yield this.getInputDevices();var S={};return c&&(c instanceof MediaStreamTrack?(this._sharedTracks.audioTrack=c,c=Oe,S.audio={settings:{customTrack:c}}):(delete this._sharedTracks.audioTrack,S.audio={settings:{deviceId:c}})),f&&(f instanceof MediaStreamTrack?(this._sharedTracks.videoTrack=f,f=Oe,S.video={settings:{customTrack:f}}):(delete this._sharedTracks.videoTrack,S.video={settings:{deviceId:f}})),this._callObjectMode&&this.needsLoad()?(this._updatePreloadCacheInputSettings(S,!1),this._devicesFromInputSettings(this._inputSettings)):new Promise(function(k){d.sendMessageToCallMachine({action:"set-input-devices",audioDeviceId:c,videoDeviceId:f},function(A){if(delete A.action,delete A.callbackStamp,A.returnPreloadCache)return d._updatePreloadCacheInputSettings(S,!1),void k(d._devicesFromInputSettings(d._inputSettings));k(A)})})}),function(o){return ut.apply(this,arguments)})},{key:"setOutputDeviceAsync",value:(Ue=P(function*(o){var d=this,c=o.outputDeviceId;return D(),c&&(this._preloadCache.outputDeviceId=c),this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise(function(f){d.sendMessageToCallMachine({action:"set-output-device",outputDeviceId:c},function(p){delete p.action,delete p.callbackStamp,p.returnPreloadCache?f(d._devicesFromInputSettings(d._inputSettings)):f(p)})})}),function(o){return Ue.apply(this,arguments)})},{key:"getInputDevices",value:(ge=P(function*(){var o=this;return this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise(function(d){o.sendMessageToCallMachine({action:"get-input-devices"},function(c){c.returnPreloadCache?d(o._devicesFromInputSettings(o._inputSettings)):d({camera:c.camera,mic:c.mic,speaker:c.speaker})})})}),function(){return ge.apply(this,arguments)})},{key:"nativeInCallAudioMode",value:function(){return ft(),this._nativeInCallAudioMode}},{key:"setNativeInCallAudioMode",value:function(o){if(ft(),[co,xl].includes(o)){if(o!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=o,!this.disableReactNativeAutoDeviceManagement("audio")&&Ut(this._callState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error("invalid in-call audio mode specified: ",o)}},{key:"preAuth",value:(ie=P(function*(){var o=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(le(this._callObjectMode,"preAuth()"),Sn(this._callState,this._isPreparingToJoin,"preAuth()"),this.needsLoad()&&(yield this.load(d)),!d.url)throw new Error("preAuth() requires at least a url to be provided");return this.validateProperties(d),this.properties=M(M({},this.properties),d),new Promise(function(c,f){o._preloadCache.inputSettings=o._prepInputSettingsForSharing(o._inputSettings,!1),o.sendMessageToCallMachine({action:"daily-method-preauth",properties:et(o.properties,o.callClientId),preloadCache:et(o._preloadCache,o.callClientId)},function(p){return p.error?f(p.error):p.access?(o._didPreAuth=!0,void c({access:p.access})):f(new Error("unknown error in preAuth()"))})})}),function(){return ie.apply(this,arguments)})},{key:"load",value:(ae=P(function*(o){var d=this;if(this.needsLoad()){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");if(o&&(this.validateProperties(o),this.properties=M(M({},this.properties),o)),!this._callObjectMode&&!this.properties.url)throw new Error("can't load iframe meeting because url property isn't set");return this._updateCallState(Vi),this.emitDailyJSEvent({action:Wo}),this._callObjectMode?new Promise(function(c,f){d._callObjectLoader.cancel();var p=Date.now();d._callObjectLoader.load(d.properties.dailyConfig,function(y){d._bundleLoadTime=y?"no-op":Date.now()-p,d._updateCallState(Ui),y&&d.emitDailyJSEvent({action:$n}),c()},function(y,S){if(d.emitDailyJSEvent({action:zo}),!S){d._updateCallState(ke),d.resetMeetingDependentVars();var k={action:zn,errorMsg:y.msg,error:{type:"connection-error",msg:"Failed to load call object bundle.",details:{on:"load",sourceError:y,bundleUrl:$t(d.properties.dailyConfig)}}};d._maybeSendToSentry(k),d.emitDailyJSEvent(k),f(y.msg)}})}):(this._iframe.src=To(this.assembleMeetingUrl(),this.properties.dailyConfig),new Promise(function(c,f){d._loadedCallback=function(p){d._callState!==ke?(d._updateCallState(Ui),(d.properties.cssFile||d.properties.cssText)&&d.loadCss(d.properties),c()):f(p)}}))}}),function(o){return ae.apply(this,arguments)})},{key:"join",value:(Y=P(function*(){var o=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._testCallInProgress&&this.stopTestCallQuality();var c=!1;if(this.needsLoad()){this.updateIsPreparingToJoin(!0);try{yield this.load(d)}catch(f){return this.updateIsPreparingToJoin(!1),Promise.reject(f)}}else{if(c=!(!this.properties.cssFile&&!this.properties.cssText),this._didPreAuth){if(d.url&&d.url!==this.properties.url)return console.error("url in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject();if(d.token&&d.token!==this.properties.token)return console.error("token in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject()}if(d.url&&!this._callObjectMode&&d.url&&d.url!==this.properties.url)return console.error("url in join() is different than the one used in load() (".concat(this.properties.url," -> ").concat(d.url,")")),this.updateIsPreparingToJoin(!1),Promise.reject();this.validateProperties(d),this.properties=M(M({},this.properties),d)}return d.showLocalVideo!==void 0&&(this._callObjectMode?console.error("showLocalVideo is not available in callObject mode"):this._showLocalVideo=!!d.showLocalVideo),d.showParticipantsBar!==void 0&&(this._callObjectMode?console.error("showParticipantsBar is not available in callObject mode"):this._showParticipantsBar=!!d.showParticipantsBar),this._callState===Re||this._callState===Qt?(console.warn("already joined meeting, call leave() before joining again"),void this.updateIsPreparingToJoin(!1)):(this._updateCallState(Qt,!1),this.emitDailyJSEvent({action:Ko}),this._preloadCache.inputSettings=this._prepInputSettingsForSharing(this._inputSettings||{},!1),this.sendMessageToCallMachine({action:"join-meeting",properties:et(this.properties,this.callClientId),preloadCache:et(this._preloadCache,this.callClientId)}),new Promise(function(f,p){o._joinedCallback=function(y,S){if(o._callState!==ke){if(o._updateCallState(Re),y)for(var k in y){if(o._callObjectMode){var A=o._callMachine().store;eo(y[k],A),to(y[k],A),no(y[k],o._participants[k],A)}o._participants[k]=M({},y[k]),o.toggleParticipantAudioBasedOnNativeAudioFocus()}c&&o.loadCss(o.properties),f(y)}else p(S)}}))}),function(){return Y.apply(this,arguments)})},{key:"leave",value:(z=P(function*(){var o=this;return this._testCallInProgress&&this.stopTestCallQuality(),new Promise(function(d){o._callState===je||o._callState===ke?d():o._callObjectLoader&&!o._callObjectLoader.loaded?(o._callObjectLoader.cancel(),o._updateCallState(je),o.resetMeetingDependentVars(),o.emitDailyJSEvent({action:je}),d()):(o._resolveLeave=d,o.sendMessageToCallMachine({action:"leave-meeting"}))})}),function(){return z.apply(this,arguments)})},{key:"startScreenShare",value:(x=P(function*(){var o=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Nt(this._callMachineInitialized,"startScreenShare()"),d.screenVideoSendSettings&&this._validateVideoSendSettings("screenVideo",d.screenVideoSendSettings),d.mediaStream&&(this._sharedTracks.screenMediaStream=d.mediaStream,d.mediaStream=Oe),typeof DailyNativeUtils<"u"&&DailyNativeUtils.isIOS!==void 0&&DailyNativeUtils.isIOS){var c=this.nativeUtils();if(yield c.isScreenBeingCaptured())return void this.emitDailyJSEvent({action:Wn,type:"screen-share-error",errorMsg:"Could not start the screen sharing. The screen is already been captured!"});c.setSystemScreenCaptureStartCallback(function(){c.setSystemScreenCaptureStartCallback(null),o.sendMessageToCallMachine({action:$i,captureOptions:d})}),c.presentSystemScreenCapturePrompt()}else this.sendMessageToCallMachine({action:$i,captureOptions:d})}),function(){return x.apply(this,arguments)})},{key:"stopScreenShare",value:function(){Nt(this._callMachineInitialized,"stopScreenShare()"),this.sendMessageToCallMachine({action:"local-screen-stop"})}},{key:"startRecording",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=o.type;if(d&&d!=="cloud"&&d!=="raw-tracks"&&d!=="local")throw new Error("invalid type: ".concat(d,", allowed values 'cloud', 'raw-tracks', or 'local'"));this.sendMessageToCallMachine(M({action:"local-recording-start"},o))}},{key:"updateRecording",value:function(o){var d=o.layout,c=d===void 0?{preset:"default"}:d,f=o.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-recording",layout:c,instanceId:f})}},{key:"stopRecording",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(M({action:"local-recording-stop"},o))}},{key:"startLiveStreaming",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(M({action:"daily-method-start-live-streaming"},o))}},{key:"updateLiveStreaming",value:function(o){var d=o.layout,c=d===void 0?{preset:"default"}:d,f=o.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming",layout:c,instanceId:f})}},{key:"addLiveStreamingEndpoints",value:function(o){var d=o.endpoints,c=o.instanceId;this.sendMessageToCallMachine({action:Ji,endpointsOp:ll,endpoints:d,instanceId:c})}},{key:"removeLiveStreamingEndpoints",value:function(o){var d=o.endpoints,c=o.instanceId;this.sendMessageToCallMachine({action:Ji,endpointsOp:ul,endpoints:d,instanceId:c})}},{key:"stopLiveStreaming",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(M({action:"daily-method-stop-live-streaming"},o))}},{key:"validateDailyConfig",value:function(o){o.camSimulcastEncodings&&(console.warn("camSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide camera simulcast settings."),this.validateSimulcastEncodings(o.camSimulcastEncodings)),o.screenSimulcastEncodings&&console.warn("screenSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide screen simulcast settings."),$s()&&o.noAutoDefaultDeviceChange&&console.warn("noAutoDefaultDeviceChange is not supported on Android, and will be ignored.")}},{key:"validateSimulcastEncodings",value:function(o){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(o){if(!(o instanceof Array||Array.isArray(o)))throw new Error("encodings must be an Array");if(!vo(o.length,1,3))throw new Error("encodings must be an Array with between 1 to ".concat(3," layers"));for(var f=0;f<o.length;f++){var p=o[f];for(var y in this._validateEncodingLayerHasValidProperties(p),p)if(wn.includes(y)){if(typeof p[y]!="number")throw new Error("".concat(y," must be a number"));if(d){var S=d[y],k=S.min,A=S.max;if(!vo(p[y],k,A))throw new Error("".concat(y," value not in range. valid range: ").concat(k," to ").concat(A))}}else if(!["active","scalabilityMode"].includes(y))throw new Error("Invalid key ".concat(y,", valid keys are:")+Object.values(wn));if(c&&!p.hasOwnProperty("maxBitrate"))throw new Error("maxBitrate is not specified")}}}},{key:"startRemoteMediaPlayer",value:(j=P(function*(o){var d=this,c=o.url,f=o.settings,p=f===void 0?{state:Hn.PLAY}:f;try{(function(y){if(typeof y!="string")throw new Error('url parameter must be "string" type')})(c),go(p),function(y){for(var S in y)if(!ho.includes(S))throw new Error("Invalid key ".concat(S,", valid keys are: ").concat(ho));y.simulcastEncodings&&this.validateSimulcastEncodings(y.simulcastEncodings,zs,!0)}(p)}catch(y){throw console.error("invalid argument Error: ".concat(y)),console.error(`startRemoteMediaPlayer arguments must be of the form:
  { url: "playback url",
  settings?:
  {state: "play"|"pause", simulcastEncodings?: [{}] } }`),y}return new Promise(function(y,S){d.sendMessageToCallMachine({action:"daily-method-start-remote-media-player",url:c,settings:p},function(k){k.error?S({error:k.error,errorMsg:k.errorMsg}):y({session_id:k.session_id,remoteMediaPlayerState:{state:k.state,settings:k.settings}})})})}),function(o){return j.apply(this,arguments)})},{key:"stopRemoteMediaPlayer",value:(O=P(function*(o){var d=this;if(typeof o!="string")throw new Error(" remotePlayerID must be of type string");return new Promise(function(c,f){d.sendMessageToCallMachine({action:"daily-method-stop-remote-media-player",session_id:o},function(p){p.error?f({error:p.error,errorMsg:p.errorMsg}):c()})})}),function(o){return O.apply(this,arguments)})},{key:"updateRemoteMediaPlayer",value:(T=P(function*(o){var d=this,c=o.session_id,f=o.settings;try{go(f)}catch(p){throw console.error("invalid argument Error: ".concat(p)),console.error(`updateRemoteMediaPlayer arguments must be of the form:
  session_id: "participant session",
  { settings?: {state: "play"|"pause"} }`),p}return new Promise(function(p,y){d.sendMessageToCallMachine({action:"daily-method-update-remote-media-player",session_id:c,settings:f},function(S){S.error?y({error:S.error,errorMsg:S.errorMsg}):p({session_id:S.session_id,remoteMediaPlayerState:{state:S.state,settings:S.settings}})})})}),function(o){return T.apply(this,arguments)})},{key:"startTranscription",value:function(o){J(this._callState,"startTranscription()"),this.sendMessageToCallMachine(M({action:"daily-method-start-transcription"},o))}},{key:"updateTranscription",value:function(o){if(J(this._callState,"updateTranscription()"),!o)throw new Error("updateTranscription Error: options is mandatory");if(V(o)!=="object")throw new Error("updateTranscription Error: options must be object type");if(o.participants&&!Array.isArray(o.participants))throw new Error("updateTranscription Error: participants must be an array");this.sendMessageToCallMachine(M({action:"daily-method-update-transcription"},o))}},{key:"stopTranscription",value:function(o){if(J(this._callState,"stopTranscription()"),o&&V(o)!=="object")throw new Error("stopTranscription Error: options must be object type");if(o&&!o.instanceId)throw new Error('"instanceId" not provided');this.sendMessageToCallMachine(M({action:"daily-method-stop-transcription"},o))}},{key:"startDialOut",value:(E=P(function*(o){var d=this;J(this._callState,"startDialOut()");var c=function(f){if(f){if(!Array.isArray(f))throw new Error("Error starting dial out: audio codec must be an array");if(f.length<=0)throw new Error("Error starting dial out: audio codec array specified but empty");f.forEach(function(p){if(typeof p!="string")throw new Error("Error starting dial out: audio codec must be a string");if(p!=="OPUS"&&p!=="PCMU"&&p!=="PCMA"&&p!=="G722")throw new Error("Error starting dial out: audio codec must be one of OPUS, PCMU, PCMA, G722")})}};if(!o.sipUri&&!o.phoneNumber)throw new Error("Error starting dial out: either a sip uri or phone number must be provided");if(o.sipUri&&o.phoneNumber)throw new Error("Error starting dial out: only one of sip uri or phone number must be provided");if(o.sipUri){if(typeof o.sipUri!="string")throw new Error("Error starting dial out: sipUri must be a string");if(!o.sipUri.startsWith("sip:"))throw new Error("Error starting dial out: Invalid SIP URI, must start with 'sip:'");if(o.video&&typeof o.video!="boolean")throw new Error("Error starting dial out: video must be a boolean value");(function(f){if(f&&(c(f.audio),f.video)){if(!Array.isArray(f.video))throw new Error("Error starting dial out: video codec must be an array");if(f.video.length<=0)throw new Error("Error starting dial out: video codec array specified but empty");f.video.forEach(function(p){if(typeof p!="string")throw new Error("Error starting dial out: video codec must be a string");if(p!=="H264"&&p!=="VP8")throw new Error("Error starting dial out: video codec must be H264 or VP8")})}})(o.codecs)}if(o.phoneNumber){if(typeof o.phoneNumber!="string")throw new Error("Error starting dial out: phoneNumber must be a string");if(!/^\+\d{1,}$/.test(o.phoneNumber))throw new Error("Error starting dial out: Invalid phone number, must be valid phone number as per E.164");o.codecs&&c(o.codecs.audio)}if(o.callerId){if(typeof o.callerId!="string")throw new Error("Error starting dial out: callerId must be a string");if(o.sipUri)throw new Error("Error starting dial out: callerId not allowed with sipUri")}if(o.displayName){if(typeof o.displayName!="string")throw new Error("Error starting dial out: displayName must be a string");if(o.displayName.length>=200)throw new Error("Error starting dial out: displayName length must be less than 200")}if(o.userId){if(typeof o.userId!="string")throw new Error("Error starting dial out: userId must be a string");if(o.userId.length>36)throw new Error("Error starting dial out: userId length must be less than or equal to 36")}return new Promise(function(f,p){d.sendMessageToCallMachine(M({action:"dialout-start"},o),function(y){y.error?p(y.error):f(y)})})}),function(o){return E.apply(this,arguments)})},{key:"stopDialOut",value:function(o){var d=this;return J(this._callState,"stopDialOut()"),new Promise(function(c,f){d.sendMessageToCallMachine(M({action:"dialout-stop"},o),function(p){p.error?f(p.error):c(p)})})}},{key:"sipCallTransfer",value:(_=P(function*(o){var d=this;if(J(this._callState,"sipCallTransfer()"),!o)throw new Error("sipCallTransfer() requires a sessionId and toEndPoint");return o.useSipRefer=!1,mo(o,"sipCallTransfer"),new Promise(function(c,f){d.sendMessageToCallMachine(M({action:Gi},o),function(p){p.error?f(p.error):c(p)})})}),function(o){return _.apply(this,arguments)})},{key:"sipRefer",value:(w=P(function*(o){var d=this;if(J(this._callState,"sipRefer()"),!o)throw new Error("sessionId and toEndPoint are mandatory parameter");return o.useSipRefer=!0,mo(o,"sipRefer"),new Promise(function(c,f){d.sendMessageToCallMachine(M({action:Gi},o),function(p){p.error?f(p.error):c(p)})})}),function(o){return w.apply(this,arguments)})},{key:"sendDTMF",value:(v=P(function*(o){var d=this;return J(this._callState,"sendDTMF()"),function(c){var f=c.sessionId,p=c.tones;if(!f||!p)throw new Error("sessionId and tones are mandatory parameter");if(typeof f!="string"||typeof p!="string")throw new Error("sessionId and tones should be of string type");if(p.length>20)throw new Error("tones string must be upto 20 characters");var y=/[^0-9A-D*#]/g,S=p.match(y);if(S&&S[0])throw new Error("".concat(S[0]," is not valid DTMF tone"))}(o),new Promise(function(c,f){d.sendMessageToCallMachine(M({action:"send-dtmf"},o),function(p){p.error?f(p.error):c(p)})})}),function(o){return v.apply(this,arguments)})},{key:"getNetworkStats",value:function(){var o=this;return this._callState!==Re?{stats:{latest:{}}}:new Promise(function(d){o.sendMessageToCallMachine({action:"get-calc-stats"},function(c){d(M({stats:c.stats},o._network))})})}},{key:"testWebsocketConnectivity",value:(g=P(function*(){var o=this;if(En(this._testCallInProgress,"testWebsocketConnectivity()"),this.needsLoad())try{yield this.load()}catch(d){return Promise.reject(d)}return new Promise(function(d,c){o.sendMessageToCallMachine({action:"test-websocket-connectivity"},function(f){f.error?c(f.error):d(f.results)})})}),function(){return g.apply(this,arguments)})},{key:"abortTestWebsocketConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-websocket-connectivity"})}},{key:"_validateVideoTrackForNetworkTests",value:function(o){return o?o instanceof MediaStreamTrack?!!jl(o,{isLocalScreenVideo:!1})||(console.error("Video track is not playable. This test needs a live video track."),!1):(console.error("Video track needs to be of type `MediaStreamTrack`."),!1):(console.error("Missing video track. You must provide a video track in order to run this test."),!1)}},{key:"testCallQuality",value:(m=P(function*(){var o=this;D(),le(this._callObjectMode,"testCallQuality()"),Nt(this._callMachineInitialized,"testCallQuality()",null,!0),Sn(this._callState,this._isPreparingToJoin,"testCallQuality()");var d=this._testCallAlreadyInProgress,c=function(p){d||(o._testCallInProgress=p)};if(c(!0),this.needsLoad())try{var f=this._callState;yield this.load(),this._callState=f}catch(p){return c(!1),Promise.reject(p)}return new Promise(function(p){o.sendMessageToCallMachine({action:"test-call-quality",dailyJsVersion:o.properties.dailyJsVersion},function(y){var S=y.results,k=S.result,A=Lr(S,Dl);if(k==="failed"){var q,N=M({},A);(q=A.error)!==null&&q!==void 0&&q.details?(A.error.details=JSON.parse(A.error.details),N.error=M(M({},N.error),{},{details:M({},N.error.details)}),N.error.details.duringTest="testCallQuality"):(N.error=N.error?M({},N.error):{},N.error.details={duringTest:"testCallQuality"}),o._maybeSendToSentry(N)}c(!1),p(M({result:k},A))})})}),function(){return m.apply(this,arguments)})},{key:"stopTestCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-call-quality"})}},{key:"testConnectionQuality",value:(h=P(function*(o){var d;R()?(console.warn("testConnectionQuality() is deprecated: use testPeerToPeerCallQuality() instead"),d=yield this.testPeerToPeerCallQuality(o)):(console.warn("testConnectionQuality() is deprecated: use testCallQuality() instead"),d=yield this.testCallQuality());var c={result:d.result,secondsElapsed:d.secondsElapsed};return d.data&&(c.data={maxRTT:d.data.maxRoundTripTime,packetLoss:d.data.avgRecvPacketLoss}),c}),function(o){return h.apply(this,arguments)})},{key:"testPeerToPeerCallQuality",value:(u=P(function*(o){var d=this;if(En(this._testCallInProgress,"testPeerToPeerCallQuality()"),this.needsLoad())try{yield this.load()}catch(p){return Promise.reject(p)}var c=o.videoTrack,f=o.duration;if(!this._validateVideoTrackForNetworkTests(c))throw new Error("Video track error");return this._sharedTracks.videoTrackForConnectionQualityTest=c,new Promise(function(p,y){d.sendMessageToCallMachine({action:"test-p2p-call-quality",duration:f},function(S){S.error?y(S.error):p(S.results)})})}),function(o){return u.apply(this,arguments)})},{key:"stopTestConnectionQuality",value:function(){R()?(console.warn("stopTestConnectionQuality() is deprecated: use testPeerToPeerCallQuality() and stopTestPeerToPeerCallQuality() instead"),this.stopTestPeerToPeerCallQuality()):(console.warn("stopTestConnectionQuality() is deprecated: use testCallQuality() and stopTestCallQuality() instead"),this.stopTestCallQuality())}},{key:"stopTestPeerToPeerCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-p2p-call-quality"})}},{key:"testNetworkConnectivity",value:(l=P(function*(o){var d=this;if(En(this._testCallInProgress,"testNetworkConnectivity()"),this.needsLoad())try{yield this.load()}catch(c){return Promise.reject(c)}if(!this._validateVideoTrackForNetworkTests(o))throw new Error("Video track error");return this._sharedTracks.videoTrackForNetworkConnectivityTest=o,new Promise(function(c,f){d.sendMessageToCallMachine({action:"test-network-connectivity"},function(p){p.error?f(p.error):c(p.results)})})}),function(o){return l.apply(this,arguments)})},{key:"abortTestNetworkConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-network-connectivity"})}},{key:"getCpuLoadStats",value:function(){var o=this;return new Promise(function(d){o._callState===Re?o.sendMessageToCallMachine({action:"get-cpu-load-stats"},function(c){d(c.cpuStats)}):d({cpuLoadState:void 0,cpuLoadStateReason:void 0,stats:{}})})}},{key:"_validateEncodingLayerHasValidProperties",value:function(o){var d;if(!(((d=Object.keys(o))===null||d===void 0?void 0:d.length)>0))throw new Error("Empty encoding is not allowed. At least one of these valid keys should be specified:"+Object.values(wn))}},{key:"_validateVideoSendSettings",value:function(o,d){var c=o==="screenVideo"?["default-screen-video","detail-optimized","motion-optimized","motion-and-detail-balanced"]:["default-video","bandwidth-optimized","bandwidth-and-quality-balanced","quality-optimized","adaptive-2-layers","adaptive-3-layers"],f="Video send settings should be either an object or one of the supported presets: ".concat(c.join());if(typeof d=="string"){if(!c.includes(d))throw new Error(f)}else{if(V(d)!=="object")throw new Error(f);if(!d.maxQuality&&!d.encodings&&d.allowAdaptiveLayers===void 0)throw new Error("Video send settings must contain at least maxQuality, allowAdaptiveLayers or encodings attribute");if(d.maxQuality&&["low","medium","high"].indexOf(d.maxQuality)===-1)throw new Error("maxQuality must be either low, medium or high");if(d.encodings){var p=!1;switch(Object.keys(d.encodings).length){case 1:p=!d.encodings.low;break;case 2:p=!d.encodings.low||!d.encodings.medium;break;case 3:p=!d.encodings.low||!d.encodings.medium||!d.encodings.high;break;default:p=!0}if(p)throw new Error("Encodings must be defined as: low, low and medium, or low, medium and high.");d.encodings.low&&this._validateEncodingLayerHasValidProperties(d.encodings.low),d.encodings.medium&&this._validateEncodingLayerHasValidProperties(d.encodings.medium),d.encodings.high&&this._validateEncodingLayerHasValidProperties(d.encodings.high)}}}},{key:"validateUpdateSendSettings",value:function(o){var d=this;if(!o||Object.keys(o).length===0)throw new Error("Send settings must contain at least information for one track!");Object.entries(o).forEach(function(c){var f=Se(c,2),p=f[0],y=f[1];d._validateVideoSendSettings(p,y)})}},{key:"updateSendSettings",value:function(o){var d=this;return this.validateUpdateSendSettings(o),this.needsLoad()?(this._preloadCache.sendSettings=o,{sendSettings:this._preloadCache.sendSettings}):new Promise(function(c,f){d.sendMessageToCallMachine({action:"update-send-settings",sendSettings:o},function(p){p.error?f(p.error):c(p.sendSettings)})})}},{key:"getSendSettings",value:function(){return this._sendSettings||this._preloadCache.sendSettings}},{key:"getLocalAudioLevel",value:function(){return this._localAudioLevel}},{key:"getRemoteParticipantsAudioLevel",value:function(){return this._remoteParticipantsAudioLevel}},{key:"getActiveSpeaker",value:function(){return D(),this._activeSpeaker}},{key:"setActiveSpeakerMode",value:function(o){return D(),this.sendMessageToCallMachine({action:"set-active-speaker-mode",enabled:o}),this}},{key:"activeSpeakerMode",value:function(){return D(),this._activeSpeakerMode}},{key:"subscribeToTracksAutomatically",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:"setSubscribeToTracksAutomatically",value:function(o){return J(this._callState,"setSubscribeToTracksAutomatically()","Use the subscribeToTracksAutomatically configuration property."),this._preloadCache.subscribeToTracksAutomatically=o,this.sendMessageToCallMachine({action:"daily-method-subscribe-to-tracks-automatically",enabled:o}),this}},{key:"enumerateDevices",value:(a=P(function*(){var o=this;if(this._callObjectMode){var d=yield navigator.mediaDevices.enumerateDevices();return Ve()==="Firefox"&&Kt().major>115&&Kt().major<123&&(d=d.filter(function(c){return c.kind!=="audiooutput"})),{devices:d.map(function(c){var f=JSON.parse(JSON.stringify(c));if(!R()&&c.kind==="videoinput"&&c.getCapabilities){var p,y=c.getCapabilities();f.facing=(y==null||(p=y.facingMode)===null||p===void 0?void 0:p.length)>=1?y.facingMode[0]:void 0}return f})}}return new Promise(function(c){o.sendMessageToCallMachine({action:"enumerate-devices"},function(f){c({devices:f.devices})})})}),function(){return a.apply(this,arguments)})},{key:"sendAppMessage",value:function(o){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"*";if(J(this._callState,"sendAppMessage()"),JSON.stringify(o).length>this._maxAppMessageSize)throw new Error("Message data too large. Max size is "+this._maxAppMessageSize);return this.sendMessageToCallMachine({action:"app-msg",data:o,to:d}),this}},{key:"addFakeParticipant",value:function(o){return D(),J(this._callState,"addFakeParticipant()"),this.sendMessageToCallMachine(M({action:"add-fake-participant"},o)),this}},{key:"setShowNamesMode",value:function(o){return ne(this._callObjectMode,"setShowNamesMode()"),D(),o&&o!=="always"&&o!=="never"?(console.error('setShowNamesMode argument should be "always", "never", or false'),this):(this.sendMessageToCallMachine({action:"set-show-names",mode:o}),this)}},{key:"setShowLocalVideo",value:function(){var o=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return ne(this._callObjectMode,"setShowLocalVideo()"),D(),J(this._callState,"setShowLocalVideo()"),typeof o!="boolean"?(console.error("setShowLocalVideo only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-local-video",show:o}),this._showLocalVideo=o,this)}},{key:"showLocalVideo",value:function(){return ne(this._callObjectMode,"showLocalVideo()"),D(),this._showLocalVideo}},{key:"setShowParticipantsBar",value:function(){var o=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return ne(this._callObjectMode,"setShowParticipantsBar()"),D(),J(this._callState,"setShowParticipantsBar()"),typeof o!="boolean"?(console.error("setShowParticipantsBar only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-participants-bar",show:o}),this._showParticipantsBar=o,this)}},{key:"showParticipantsBar",value:function(){return ne(this._callObjectMode,"showParticipantsBar()"),D(),this._showParticipantsBar}},{key:"customIntegrations",value:function(){return D(),ne(this._callObjectMode,"customIntegrations()"),this._customIntegrations}},{key:"setCustomIntegrations",value:function(o){return D(),ne(this._callObjectMode,"setCustomIntegrations()"),J(this._callState,"setCustomIntegrations()"),na(o)?(this.sendMessageToCallMachine({action:"set-custom-integrations",integrations:o}),this._customIntegrations=o,this):this}},{key:"startCustomIntegrations",value:function(o){var d=this;if(D(),ne(this._callObjectMode,"startCustomIntegrations()"),J(this._callState,"startCustomIntegrations()"),Array.isArray(o)&&o.some(function(p){return typeof p!="string"})||!Array.isArray(o)&&typeof o!="string")return console.error("startCustomIntegrations() only accepts string | string[]"),this;var c=typeof o=="string"?[o]:o,f=c.filter(function(p){return!(p in d._customIntegrations)});return f.length?(console.error(`Can't find custom integration(s): "`.concat(f.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"start-custom-integrations",ids:c}),this)}},{key:"stopCustomIntegrations",value:function(o){var d=this;if(D(),ne(this._callObjectMode,"stopCustomIntegrations()"),J(this._callState,"stopCustomIntegrations()"),Array.isArray(o)&&o.some(function(p){return typeof p!="string"})||!Array.isArray(o)&&typeof o!="string")return console.error("stopCustomIntegrations() only accepts string | string[]"),this;var c=typeof o=="string"?[o]:o,f=c.filter(function(p){return!(p in d._customIntegrations)});return f.length?(console.error(`Can't find custom integration(s): "`.concat(f.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"stop-custom-integrations",ids:c}),this)}},{key:"customTrayButtons",value:function(){return ne(this._callObjectMode,"customTrayButtons()"),D(),this._customTrayButtons}},{key:"updateCustomTrayButtons",value:function(o){return ne(this._callObjectMode,"updateCustomTrayButtons()"),D(),J(this._callState,"updateCustomTrayButtons()"),ta(o)?(this.sendMessageToCallMachine({action:"update-custom-tray-buttons",btns:o}),this._customTrayButtons=o,this):(console.error("updateCustomTrayButtons only accepts a dictionary of the type ".concat(JSON.stringify(Zt))),this)}},{key:"theme",value:function(){return ne(this._callObjectMode,"theme()"),this.properties.theme}},{key:"setTheme",value:function(o){var d=this;return ne(this._callObjectMode,"setTheme()"),new Promise(function(c,f){try{d.validateProperties({theme:o}),d.properties.theme=M({},o),d.sendMessageToCallMachine({action:"set-theme",theme:d.properties.theme});try{d.emitDailyJSEvent({action:Yo,theme:d.properties.theme})}catch(p){console.log("could not emit 'theme-updated'",p)}c(d.properties.theme)}catch(p){f(p)}})}},{key:"requestFullscreen",value:(s=P(function*(){if(D(),this._iframe&&!document.fullscreenElement&&Yi())try{(yield this._iframe.requestFullscreen)?this._iframe.requestFullscreen():this._iframe.webkitRequestFullscreen()}catch(o){console.log("could not make video call fullscreen",o)}}),function(){return s.apply(this,arguments)})},{key:"exitFullscreen",value:function(){D(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:"getSidebarView",value:(i=P(function*(){var o=this;return this._callObjectMode?(console.error("getSidebarView is not available in callObject mode"),Promise.resolve(null)):new Promise(function(d){o.sendMessageToCallMachine({action:"get-sidebar-view"},function(c){d(c.view)})})}),function(){return i.apply(this,arguments)})},{key:"setSidebarView",value:function(o){return this._callObjectMode?(console.error("setSidebarView is not available in callObject mode"),this):(this.sendMessageToCallMachine({action:"set-sidebar-view",view:o}),this)}},{key:"room",value:(r=P(function*(){var o=this,d=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).includeRoomConfigDefaults,c=d===void 0||d;return this._accessState.access===qt||this.needsLoad()?this.properties.url?{roomUrlPendingJoin:this.properties.url}:null:new Promise(function(f){o.sendMessageToCallMachine({action:"lib-room-info",includeRoomConfigDefaults:c},function(p){delete p.action,delete p.callbackStamp,f(p)})})}),function(){return r.apply(this,arguments)})},{key:"geo",value:(e=P(function*(){try{var o=yield fetch("https://gs.daily.co/_ks_/x-swsl/:");return{current:(yield o.json()).geo}}catch(d){return console.error("geo lookup failed",d),{current:""}}}),function(){return e.apply(this,arguments)})},{key:"setNetworkTopology",value:(t=P(function*(o){var d=this;return D(),J(this._callState,"setNetworkTopology()"),new Promise(function(c,f){d.sendMessageToCallMachine({action:"set-network-topology",opts:o},function(p){p.error?f({error:p.error}):c({workerId:p.workerId})})})}),function(o){return t.apply(this,arguments)})},{key:"getNetworkTopology",value:(n=P(function*(){var o=this;return new Promise(function(d,c){o.needsLoad()&&d({topology:"none"}),o.sendMessageToCallMachine({action:"get-network-topology"},function(f){f.error?c({error:f.error}):d({topology:f.topology})})})}),function(){return n.apply(this,arguments)})},{key:"setPlayNewParticipantSound",value:function(o){if(D(),typeof o!="number"&&o!==!0&&o!==!1)throw new Error("argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ".concat(o));this.sendMessageToCallMachine({action:"daily-method-set-play-ding",arg:o})}},{key:"on",value:function(o,d){return Me.prototype.on.call(this,o,d)}},{key:"once",value:function(o,d){return Me.prototype.once.call(this,o,d)}},{key:"off",value:function(o,d){return Me.prototype.off.call(this,o,d)}},{key:"validateProperties",value:function(o){var d,c;if(o!=null&&(d=o.dailyConfig)!==null&&d!==void 0&&d.userMediaAudioConstraints){var f,p,y;R()||console.warn("userMediaAudioConstraints is deprecated. You can override constraints with inputSettings.audio.settings, found in DailyCallOptions.");var S=o.inputSettings||{};S.audio=((f=o.inputSettings)===null||f===void 0?void 0:f.audio)||{},S.audio.settings=((p=o.inputSettings)===null||p===void 0||(y=p.audio)===null||y===void 0?void 0:y.settings)||{},S.audio.settings=M(M({},S.audio.settings),o.dailyConfig.userMediaAudioConstraints),o.inputSettings=S,delete o.dailyConfig.userMediaAudioConstraints}if(o!=null&&(c=o.dailyConfig)!==null&&c!==void 0&&c.userMediaVideoConstraints){var k,A,q;R()||console.warn("userMediaVideoConstraints is deprecated. You can override constraints with inputSettings.video.settings, found in DailyCallOptions.");var N=o.inputSettings||{};N.video=((k=o.inputSettings)===null||k===void 0?void 0:k.video)||{},N.video.settings=((A=o.inputSettings)===null||A===void 0||(q=A.video)===null||q===void 0?void 0:q.settings)||{},N.video.settings=M(M({},N.video.settings),o.dailyConfig.userMediaVideoConstraints),o.inputSettings=N,delete o.dailyConfig.userMediaVideoConstraints}for(var H in o){if(!Ye[H])throw new Error("unrecognized property '".concat(H,"'"));if(Ye[H].validate&&!Ye[H].validate(o[H],this))throw new Error("property '".concat(H,"': ").concat(Ye[H].help))}}},{key:"assembleMeetingUrl",value:function(){var o,d,c=M(M({},this.properties),{},{emb:this.callClientId,embHref:encodeURIComponent(window.location.href),proxy:(o=this.properties.dailyConfig)!==null&&o!==void 0&&o.proxyUrl?encodeURIComponent((d=this.properties.dailyConfig)===null||d===void 0?void 0:d.proxyUrl):void 0}),f=c.url.match(/\?/)?"&":"?";return c.url+f+Object.keys(Ye).filter(function(p){return Ye[p].queryString&&c[p]!==void 0}).map(function(p){return"".concat(Ye[p].queryString,"=").concat(c[p])}).join("&")}},{key:"needsLoad",value:function(){return[Un,Vi,je,ke].includes(this._callState)}},{key:"sendMessageToCallMachine",value:function(o,d){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");this._messageChannel.sendMessageToCallMachine(o,d,this.callClientId,this._iframe)}},{key:"forwardPackagedMessageToCallMachine",value:function(o){this._messageChannel.forwardPackagedMessageToCallMachine(o,this._iframe,this.callClientId)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(o){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(o,this.callClientId)}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(o){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(o)}},{key:"handleMessageFromCallMachine",value:function(o){switch(o.action){case Jo:this.sendMessageToCallMachine(M({action:Go},this.properties));break;case"call-machine-initialized":this._callMachineInitialized=!0;var d={action:It,level:"log",code:1011,stats:{event:"bundle load",time:this._bundleLoadTime==="no-op"?0:this._bundleLoadTime,preLoaded:this._bundleLoadTime==="no-op",url:$t(this.properties.dailyConfig)}};this.sendMessageToCallMachine(d),this._delayDuplicateInstanceLog&&this._logDuplicateInstanceAttempt();break;case $n:this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null),this.emitDailyJSEvent(o);break;case Xo:var c,f=M({},o);delete f.internal,this._maxAppMessageSize=((c=o.internal)===null||c===void 0?void 0:c._maxAppMessageSize)||gn,this._joinedCallback&&(this._joinedCallback(o.participants),this._joinedCallback=null),this.emitDailyJSEvent(f);break;case es:case ts:if(this._callState===je)return;if(o.participant&&o.participant.session_id){var p=o.participant.local?"local":o.participant.session_id;if(this._callObjectMode){var y=this._callMachine().store;eo(o.participant,y),to(o.participant,y),no(o.participant,this._participants[p],y)}try{this.maybeParticipantTracksStopped(this._participants[p],o.participant),this.maybeParticipantTracksStarted(this._participants[p],o.participant),this.maybeEventRecordingStopped(this._participants[p],o.participant),this.maybeEventRecordingStarted(this._participants[p],o.participant)}catch(ln){console.error("track events error",ln)}this.compareEqualForParticipantUpdateEvent(o.participant,this._participants[p])||(this._participants[p]=M({},o.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus(),this.emitDailyJSEvent(o))}break;case ns:if(o.participant&&o.participant.session_id){var S=this._participants[o.participant.session_id];S&&this.maybeParticipantTracksStopped(S,null),delete this._participants[o.participant.session_id],this.emitDailyJSEvent(o)}break;case rs:ee(this._participantCounts,o.participantCounts)||(this._participantCounts=o.participantCounts,this.emitDailyJSEvent(o));break;case is:var k={access:o.access};o.awaitingAccess&&(k.awaitingAccess=o.awaitingAccess),ee(this._accessState,k)||(this._accessState=k,this.emitDailyJSEvent(o));break;case os:if(o.meetingSession){this._meetingSessionSummary=o.meetingSession,this.emitDailyJSEvent(o);var A=M(M({},o),{},{action:"meeting-session-updated"});this.emitDailyJSEvent(A)}break;case zn:var q;this._iframe&&!o.preserveIframe&&(this._iframe.src=""),this._updateCallState(ke),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(o.errorMsg),this._loadedCallback=null),o.preserveIframe;var N=Lr(o,Nl);N!=null&&(q=N.error)!==null&&q!==void 0&&q.details&&(N.error.details=JSON.parse(N.error.details)),this._maybeSendToSentry(o),this._joinedCallback&&(this._joinedCallback(null,N),this._joinedCallback=null),this.emitDailyJSEvent(N);break;case Zo:this._callState!==ke&&this._updateCallState(je),this.resetMeetingDependentVars(),this._resolveLeave&&(this._resolveLeave(),this._resolveLeave=null),this.emitDailyJSEvent(o);break;case"selected-devices-updated":o.devices&&this.emitDailyJSEvent(o);break;case Os:var H=o.threshold,ve=o.quality;H===this._network.threshold&&ve===this._network.quality||(this._network.quality=ve,this._network.threshold=H,this.emitDailyJSEvent(o));break;case Ls:o&&o.cpuLoadState&&this.emitDailyJSEvent(o);break;case Is:o&&o.faceCounts!==void 0&&this.emitDailyJSEvent(o);break;case Ms:var Le=o.activeSpeaker;this._activeSpeaker.peerId!==Le.peerId&&(this._activeSpeaker.peerId=Le.peerId,this.emitDailyJSEvent({action:o.action,activeSpeaker:this._activeSpeaker}));break;case"show-local-video-changed":if(this._callObjectMode)return;var Be=o.show;this._showLocalVideo=Be,this.emitDailyJSEvent({action:o.action,show:Be});break;case As:var dt=o.enabled;this._activeSpeakerMode!==dt&&(this._activeSpeakerMode=dt,this.emitDailyJSEvent({action:o.action,enabled:this._activeSpeakerMode}));break;case as:case cs:case ls:this._waitingParticipants=o.allWaitingParticipants,this.emitDailyJSEvent({action:o.action,participant:o.participant});break;case Fs:ee(this._receiveSettings,o.receiveSettings)||(this._receiveSettings=o.receiveSettings,this.emitDailyJSEvent({action:o.action,receiveSettings:o.receiveSettings}));break;case Yn:this._maybeUpdateInputSettings(o.inputSettings);break;case"send-settings-updated":ee(this._sendSettings,o.sendSettings)||(this._sendSettings=o.sendSettings,this._preloadCache.sendSettings=null,this.emitDailyJSEvent({action:o.action,sendSettings:o.sendSettings}));break;case"local-audio-level":this._localAudioLevel=o.audioLevel,this._preloadCache.localAudioLevelObserver=null,this.emitDailyJSEvent(o);break;case"remote-participants-audio-level":this._remoteParticipantsAudioLevel=o.participantsAudioLevel,this._preloadCache.remoteParticipantsAudioLevelObserver=null,this.emitDailyJSEvent(o);break;case ws:var K=o.session_id;this._rmpPlayerState[K]=o.playerState,this.emitDailyJSEvent(o);break;case Es:delete this._rmpPlayerState[o.session_id],this.emitDailyJSEvent(o);break;case Ss:var ye=o.session_id,$e=this._rmpPlayerState[ye];$e&&this.compareEqualForRMPUpdateEvent($e,o.remoteMediaPlayerState)||(this._rmpPlayerState[ye]=o.remoteMediaPlayerState,this.emitDailyJSEvent(o));break;case"custom-button-click":case"sidebar-view-changed":this.emitDailyJSEvent(o);break;case ss:var kt=this._meetingSessionState.topology!==(o.meetingSessionState&&o.meetingSessionState.topology);this._meetingSessionState=kn(o.meetingSessionState,this._callObjectMode),(this._callObjectMode||kt)&&this.emitDailyJSEvent(o);break;case ks:this._isScreenSharing=!0,this.emitDailyJSEvent(o);break;case Ts:case Cs:this._isScreenSharing=!1,this.emitDailyJSEvent(o);break;case Jn:case Gn:case ms:case gs:case vs:case hs:case ps:case fs:case Ho:case Qo:case _s:case bs:case"test-completed":case Ps:case ys:case js:case Ds:case Ns:case Rs:case Wn:case xs:case"dialin-ready":case"dialin-connected":case"dialin-error":case"dialin-stopped":case"dialin-warning":case"dialout-connected":case"dialout-answered":case"dialout-error":case"dialout-stopped":case"dialout-warning":this.emitDailyJSEvent(o);break;case"request-fullscreen":this.requestFullscreen();break;case"request-exit-fullscreen":this.exitFullscreen()}}},{key:"maybeEventRecordingStopped",value:function(o,d){var c="record";o&&(d.local||d[c]!==!1||o[c]===d[c]||this.emitDailyJSEvent({action:Gn}))}},{key:"maybeEventRecordingStarted",value:function(o,d){var c="record";o&&(d.local||d[c]!==!0||o[c]===d[c]||this.emitDailyJSEvent({action:Jn}))}},{key:"_trackStatePlayable",value:function(o){return!(!o||o.state!==qo)}},{key:"_trackChanged",value:function(o,d){return(o==null?void 0:o.id)!==(d==null?void 0:d.id)}},{key:"maybeEventTrackStopped",value:function(o,d,c){var f,p,y=(f=d==null?void 0:d.tracks[o])!==null&&f!==void 0?f:null,S=(p=c==null?void 0:c.tracks[o])!==null&&p!==void 0?p:null,k=y==null?void 0:y.track;if(k){var A=this._trackStatePlayable(y),q=this._trackStatePlayable(S),N=this._trackChanged(k,S==null?void 0:S.track);A&&(q&&!N||this.emitDailyJSEvent({action:ds,track:k,participant:c??d,type:o}))}}},{key:"maybeEventTrackStarted",value:function(o,d,c){var f,p,y=(f=d==null?void 0:d.tracks[o])!==null&&f!==void 0?f:null,S=(p=c==null?void 0:c.tracks[o])!==null&&p!==void 0?p:null,k=S==null?void 0:S.track;if(k){var A=this._trackStatePlayable(y),q=this._trackStatePlayable(S),N=this._trackChanged(y==null?void 0:y.track,k);q&&(A&&!N||this.emitDailyJSEvent({action:us,track:k,participant:c,type:o}))}}},{key:"maybeParticipantTracksStopped",value:function(o,d){if(o)for(var c in o.tracks)this.maybeEventTrackStopped(c,o,d)}},{key:"maybeParticipantTracksStarted",value:function(o,d){if(d)for(var c in d.tracks)this.maybeEventTrackStarted(c,o,d)}},{key:"compareEqualForRMPUpdateEvent",value:function(o,d){var c,f;return o.state===d.state&&((c=o.settings)===null||c===void 0?void 0:c.volume)===((f=d.settings)===null||f===void 0?void 0:f.volume)}},{key:"emitDailyJSEvent",value:function(o){try{o.callClientId=this.callClientId,this.emit(o.action,o)}catch(d){console.log("could not emit",o,d)}}},{key:"compareEqualForParticipantUpdateEvent",value:function(o,d){return!!ee(o,d)&&(!o.videoTrack||!d.videoTrack||o.videoTrack.id===d.videoTrack.id&&o.videoTrack.muted===d.videoTrack.muted&&o.videoTrack.enabled===d.videoTrack.enabled)&&(!o.audioTrack||!d.audioTrack||o.audioTrack.id===d.audioTrack.id&&o.audioTrack.muted===d.audioTrack.muted&&o.audioTrack.enabled===d.audioTrack.enabled)}},{key:"nativeUtils",value:function(){return R()?typeof DailyNativeUtils>"u"?(console.warn("in React Native, DailyNativeUtils is expected to be available"),null):DailyNativeUtils:null}},{key:"updateIsPreparingToJoin",value:function(o){this._updateCallState(this._callState,o)}},{key:"_updateCallState",value:function(o){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._isPreparingToJoin;if(o!==this._callState||d!==this._isPreparingToJoin){var c=this._callState,f=this._isPreparingToJoin;this._callState=o,this._isPreparingToJoin=d;var p=this._callState===Re;this.updateShowAndroidOngoingMeetingNotification(p);var y=Ut(c,f),S=Ut(this._callState,this._isPreparingToJoin);y!==S&&(this.updateKeepDeviceAwake(S),this.updateDeviceAudioMode(S),this.updateNoOpRecordingEnsuringBackgroundContinuity(S))}}},{key:"resetMeetingDependentVars",value:function(){this._participants={},this._participantCounts=uo,this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:qt},this._finalSummaryOfPrevSession=this._meetingSessionSummary,this._meetingSessionSummary={},this._meetingSessionState=kn(lo,this._callObjectMode),this._isScreenSharing=!1,this._receiveSettings={},this._inputSettings=void 0,this._sendSettings={},this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this._maxAppMessageSize=gn,this._callMachineInitialized=!1,this._bundleLoadTime=void 0,this._preloadCache}},{key:"updateKeepDeviceAwake",value:function(o){R()&&this.nativeUtils().setKeepDeviceAwake(o,this.callClientId)}},{key:"updateDeviceAudioMode",value:function(o){if(R()&&!this.disableReactNativeAutoDeviceManagement("audio")){var d=o?this._nativeInCallAudioMode:"idle";this.nativeUtils().setAudioMode(d)}}},{key:"updateShowAndroidOngoingMeetingNotification",value:function(o){if(R()&&this.nativeUtils().setShowOngoingMeetingNotification){var d,c,f,p;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var y=this.properties.reactNativeConfig.androidInCallNotification;d=y.title,c=y.subtitle,f=y.iconName,p=y.disableForCustomOverride}p&&(o=!1),this.nativeUtils().setShowOngoingMeetingNotification(o,d,c,f,this.callClientId)}}},{key:"updateNoOpRecordingEnsuringBackgroundContinuity",value:function(o){R()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(o)}},{key:"toggleParticipantAudioBasedOnNativeAudioFocus",value:function(){var o,d;if(R()){var c=(o=this._callMachine())===null||o===void 0||(d=o.store)===null||d===void 0?void 0:d.getState();for(var f in c==null?void 0:c.streams){var p=c.streams[f];p&&p.pendingTrack&&p.pendingTrack.kind==="audio"&&(p.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:"disableReactNativeAutoDeviceManagement",value:function(o){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[o]}},{key:"absoluteUrl",value:function(o){if(o!==void 0){var d=document.createElement("a");return d.href=o,d.href}}},{key:"sayHello",value:function(){var o="hello, world.";return console.log(o),o}},{key:"_logUseAfterDestroy",value:function(){var o=Object.values(Ge)[0];if(this.needsLoad())if(o&&!o.needsLoad()){var d={action:It,level:"error",code:this.strictMode?9995:9997};o.sendMessageToCallMachine(d)}else this.strictMode||console.error("You are are attempting to use a call instance that was previously destroyed, which is unsupported. Please remove `strictMode: false` from your constructor properties to enable strict mode to track down and fix this unsupported usage.");else{var c={action:It,level:"error",code:this.strictMode?9995:9997};this._messageChannel.sendMessageToCallMachine(c,null,this.callClientId,this._iframe)}}},{key:"_logDuplicateInstanceAttempt",value:function(){for(var o=0,d=Object.values(Ge);o<d.length;o++){var c=d[o];c._callMachineInitialized?(c.sendMessageToCallMachine({action:It,level:"warn",code:this.allowMultipleCallInstances?9993:9992}),c._delayDuplicateInstanceLog=!1):c._delayDuplicateInstanceLog=!0}}},{key:"_maybeSendToSentry",value:function(o){var d,c,f,p,y,S;if(!((d=o.error)!==null&&d!==void 0&&d.type&&(![$o,Bo,Bn].includes(o.error.type)||o.error.type===Bn&&o.error.msg.includes("deleted")))){var k=(c=this.properties)!==null&&c!==void 0&&c.url?new URL(this.properties.url):void 0,A="production";k&&k.host.includes(".staging.daily")&&(A="staging");var q,N,H,ve,Le,Be=[hc(),uc(),Ic(),Pc(),Rc(),Fc(),pc(),xc()].filter(function(ma){return!["BrowserApiErrors","Breadcrumbs","GlobalHandlers"].includes(ma.name)}),dt=new yc({dsn:"https://f10f1c81e5d44a4098416c0867a8b740@o77906.ingest.sentry.io/168844",transport:Ec,stackParser:Oc,integrations:Be,environment:A}),K=new Pe;if(K.setClient(dt),dt.init(),this.session_id&&K.setExtra("sessionId",this.session_id),this.properties){var ye=M({},this.properties);ye.userName=ye.userName?"[Filtered]":void 0,ye.userData=ye.userData?"[Filtered]":void 0,ye.token=ye.token?"[Filtered]":void 0,K.setExtra("properties",ye)}if(k){var $e=k.searchParams.get("domain");if(!$e){var kt=k.host.match(/(.*?)\./);$e=kt&&kt[1]||""}$e&&K.setTag("domain",$e)}o.error&&(K.setTag("fatalErrorType",o.error.type),K.setExtra("errorDetails",o.error.details),!((q=o.error.details)===null||q===void 0)&&q.uri&&K.setTag("serverAddress",o.error.details.uri),!((N=o.error.details)===null||N===void 0)&&N.workerGroup&&K.setTag("workerGroup",o.error.details.workerGroup),!((H=o.error.details)===null||H===void 0)&&H.geoGroup&&K.setTag("geoGroup",o.error.details.geoGroup),!((ve=o.error.details)===null||ve===void 0)&&ve.on&&K.setTag("connectionAttempt",o.error.details.on),(Le=o.error.details)!==null&&Le!==void 0&&Le.bundleUrl&&(K.setTag("bundleUrl",o.error.details.bundleUrl),K.setTag("bundleError",o.error.details.sourceError.type))),K.setTags({callMode:this._callObjectMode?R()?"reactNative":(f=this.properties)!==null&&f!==void 0&&(p=f.dailyConfig)!==null&&p!==void 0&&(y=p.callMode)!==null&&y!==void 0&&y.includes("prebuilt")?this.properties.dailyConfig.callMode:"custom":"prebuilt-frame",version:ce.version()});var ln=((S=o.error)===null||S===void 0?void 0:S.msg)||o.errorMsg;K.captureException(new Error(ln))}}},{key:"_callMachine",value:function(){var o,d,c;return(o=window._daily)===null||o===void 0||(d=o.instances)===null||d===void 0||(c=d[this.callClientId])===null||c===void 0?void 0:c.callMachine}},{key:"_maybeUpdateInputSettings",value:function(o){if(!ee(this._inputSettings,o)){var d=this._getInputSettings();this._inputSettings=o;var c=this._getInputSettings();ee(d,c)||this.emitDailyJSEvent({action:Yn,inputSettings:c})}}}],[{key:"supportedBrowser",value:function(){if(R())return{supported:!0,mobile:!0,name:"React Native",version:null,supportsScreenShare:!0,supportsSfu:!0,supportsVideoProcessing:!1,supportsAudioProcessing:!1};var o=Ma.getParser(se());return{supported:!!Wi(),mobile:o.getPlatformType()==="mobile",name:o.getBrowserName(),version:o.getBrowserVersion(),supportsFullscreen:!!Yi(),supportsScreenShare:!!dl(),supportsSfu:!!Wi(),supportsVideoProcessing:Us(),supportsAudioProcessing:Bs()}}},{key:"version",value:function(){return"0.75.2"}},{key:"createCallObject",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o.layout="none",new ce(null,o)}},{key:"wrap",value:function(o){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(D(),!o||!o.contentWindow||typeof o.src!="string")throw new Error("DailyIframe::Wrap needs an iframe-like first argument");return d.layout||(d.customLayout?d.layout="custom-v1":d.layout="browser"),new ce(o,d)}},{key:"createFrame",value:function(o,d){var c,f;D(),o&&d?(c=o,f=d):o&&o.append?(c=o,f={}):(c=document.body,f=o||{});var p=f.iframeStyle;p||(p=c===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});var y=document.createElement("iframe");window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?y.allow="microphone, camera":y.allow="microphone; camera; autoplay; display-capture; screen-wake-lock",y.style.visibility="hidden",c.appendChild(y),y.style.visibility=null,Object.keys(p).forEach(function(S){return y.style[S]=p[S]}),f.layout||(f.customLayout?f.layout="custom-v1":f.layout="browser");try{return new ce(y,f)}catch(S){throw c.removeChild(y),S}}},{key:"createTransparentFrame",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};D();var d=document.createElement("iframe");return d.allow="microphone; camera; autoplay",d.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
      pointer-events: none;
    `,document.body.appendChild(d),o.layout||(o.layout="custom-v1"),ce.wrap(d,o)}},{key:"getCallInstance",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;return o?Ge[o]:Object.values(Ge)[0]}}]),ce}();function et(n,t){var e={};for(var r in n)if(n[r]instanceof MediaStreamTrack)console.warn("MediaStreamTrack found in props or cache.",r),e[r]=Oe;else if(r==="dailyConfig"){if(n[r].modifyLocalSdpHook){var i=window._daily.instances[t].customCallbacks||{};i.modifyLocalSdpHook=n[r].modifyLocalSdpHook,window._daily.instances[t].customCallbacks=i,delete n[r].modifyLocalSdpHook}if(n[r].modifyRemoteSdpHook){var s=window._daily.instances[t].customCallbacks||{};s.modifyRemoteSdpHook=n[r].modifyRemoteSdpHook,window._daily.instances[t].customCallbacks=s,delete n[r].modifyRemoteSdpHook}e[r]=n[r]}else e[r]=n[r];return e}function J(n){var t=arguments.length>2?arguments[2]:void 0;if(n!==Re){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," only supported after join.");throw t&&(e+=" ".concat(t)),console.error(e),new Error(e)}}function Ut(n,t){return[Qt,Re].includes(n)||t}function Sn(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"This daily-js method",r=arguments.length>3?arguments[3]:void 0;if(Ut(n,t)){var i="".concat(e," not supported after joining a meeting.");throw r&&(i+=" ".concat(r)),console.error(i),new Error(i)}}function Nt(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method",e=arguments.length>2?arguments[2]:void 0;if(!n){var r="".concat(t,arguments.length>3&&arguments[3]!==void 0&&arguments[3]?" requires preAuth() or startCamera() to initialize call state.":" requires preAuth(), startCamera(), or join() to initialize call state.");throw e&&(r+=" ".concat(e)),console.error(r),new Error(r)}}function En(n){if(n){var t="A pre-call quality test is in progress. Please try ".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," again once testing has completed. Use stopTestCallQuality() to end it early.");throw console.error(t),new Error(t)}}function le(n){if(!n){var t="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported on custom callObject instances");throw console.error(t),new Error(t)}}function ne(n){if(n){var t="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported as part of Daily's Prebuilt");throw console.error(t),new Error(t)}}function D(){if(R())throw new Error("This daily-js method is not currently supported in React Native")}function ft(){if(!R())throw new Error("This daily-js method is only supported in React Native")}function Hs(n){if(n===void 0)return!0;var t;if(typeof n=="string")t=n;else try{t=JSON.stringify(n),ee(JSON.parse(t),n)||console.warn("The userData provided will be modified when serialized.")}catch(e){throw Error("userData must be serializable to JSON: ".concat(e))}if(t.length>4096)throw Error("userData is too large (".concat(t.length," characters). Maximum size suppported is ").concat(4096,"."));return!0}function Qs(n,t){for(var e=t.allowAllParticipantsKey,r=function(g){var v=["local"];return e||v.push("*"),g&&!v.includes(g)},i=function(g){return!!(g.layer===void 0||Number.isInteger(g.layer)&&g.layer>=0||g.layer==="inherit")},s=function(g){return!!g&&!(g.video&&!i(g.video))&&!(g.screenVideo&&!i(g.screenVideo))},a=0,l=Object.entries(n);a<l.length;a++){var u=Se(l[a],2),h=u[0],m=u[1];if(!r(h)||!s(m))return!1}return!0}function Ks(n){if(V(n)!=="object")return!1;for(var t=0,e=Object.entries(n);t<e.length;t++){var r=Se(e[t],2),i=r[0],s=r[1];switch(i){case"video":if(V(s)!=="object")return!1;for(var a=0,l=Object.entries(s);a<l.length;a++){var u=Se(l[a],2),h=u[0],m=u[1];switch(h){case"processor":if(!Vl(m))return!1;break;case"settings":if(!fo(m))return!1;break;default:return!1}}break;case"audio":if(V(s)!=="object")return!1;for(var g=0,v=Object.entries(s);g<v.length;g++){var w=Se(v[g],2),_=w[0],E=w[1];switch(_){case"processor":if(!ql(E))return!1;break;case"settings":if(!fo(E))return!1;break;default:return!1}}break;default:return!1}}return!0}function Xs(n,t,e){var r,i=[];n.video&&n.video.processor&&(Us((r=t==null?void 0:t.useLegacyVideoProcessor)!==null&&r!==void 0&&r)||(n.video.settings?delete n.video.processor:delete n.video,i.push("video"))),n.audio&&n.audio.processor&&(Bs()||(n.audio.settings?delete n.audio.processor:delete n.audio,i.push("audio"))),i.length>0&&console.error("Ignoring settings for browser- or platform-unsupported input processor(s): ".concat(i.join(", "))),n.audio&&n.audio.settings&&(n.audio.settings.customTrack?(e.audioTrack=n.audio.settings.customTrack,n.audio.settings={customTrack:Oe}):delete e.audioTrack),n.video&&n.video.settings&&(n.video.settings.customTrack?(e.videoTrack=n.video.settings.customTrack,n.video.settings={customTrack:Oe}):delete e.videoTrack)}function ql(n){if(R())return console.warn("Video processing is not yet supported in React Native"),!1;var t=["type"];return!!n&&V(n)==="object"&&(Object.keys(n).filter(function(e){return!t.includes(e)}).forEach(function(e){console.warn("invalid key inputSettings -> audio -> processor : ".concat(e)),delete n[e]}),!!function(e){return typeof e!="string"?!1:Object.values(qs).includes(e)?!0:(console.error("inputSettings audio processor type invalid"),!1)}(n.type))}function Vl(n){if(R())return console.warn("Video processing is not yet supported in React Native"),!1;var t=["type","config"];return!n||V(n)!=="object"||!function(e){return typeof e!="string"?!1:Object.values(Vt).includes(e)?!0:(console.error("inputSettings video processor type invalid"),!1)}(n.type)||n.config&&(V(n.config)!=="object"||!function(e,r){var i=Object.keys(r);if(i.length===0)return!0;var s="invalid object in inputSettings -> video -> processor -> config";switch(e){case Vt.BGBLUR:return i.length>1||i[0]!=="strength"?(console.error(s),!1):!(typeof r.strength!="number"||r.strength<=0||r.strength>1||isNaN(r.strength))||(console.error("".concat(s,"; expected: {0 < strength <= 1}, got: ").concat(r.strength)),!1);case Vt.BGIMAGE:return!(r.source!==void 0&&!function(a){if(a.source==="default")return a.type="default",!0;if(a.source instanceof ArrayBuffer)return!0;if(Jt(a.source))return a.type="url",!!function(h){var m=new URL(h),g=m.pathname;if(m.protocol==="data:")try{var v=g.substring(g.indexOf(":")+1,g.indexOf(";")).split("/")[1];return yn.includes(v)}catch(_){return console.error("failed to deduce blob content type",_),!1}var w=g.split(".").at(-1).toLowerCase().trim();return yn.includes(w)}(a.source)||(console.error("invalid image type; supported types: [".concat(yn.join(", "),"]")),!1);return l=a.source,u=Number(l),isNaN(u)||!Number.isInteger(u)||u<=0||u>10?(console.error("invalid image selection; must be an int, > 0, <= ".concat(10)),!1):(a.type="daily-preselect",!0);var l,u}(r));default:return!0}}(n.type,n.config))?!1:(Object.keys(n).filter(function(e){return!t.includes(e)}).forEach(function(e){console.warn("invalid key inputSettings -> video -> processor : ".concat(e)),delete n[e]}),!0)}function fo(n){return V(n)==="object"&&(!n.customTrack||n.customTrack instanceof MediaStreamTrack)}function tr(){var n=Object.values(Vt).join(" | "),t=Object.values(qs).join(" | ");return"inputSettings must be of the form: { video?: { processor?: { type: [ ".concat(n," ], config?: {} } }, audio?: { processor: {type: [ ").concat(t," ] } } }")}function Zs(n){var t=n.allowAllParticipantsKey;return"receiveSettings must be of the form { [<remote participant id> | ".concat(Uo).concat(t?' | "'.concat("*",'"'):"","]: ")+'{ [video: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]], [screenVideo: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]] }}}'}function ea(){return"customIntegrations should be an object of type ".concat(JSON.stringify(er),".")}function ta(n){if(n&&V(n)!=="object"||Array.isArray(n))return console.error("customTrayButtons should be an Object of the type ".concat(JSON.stringify(Zt),".")),!1;if(n)for(var t=0,e=Object.entries(n);t<e.length;t++)for(var r=Se(e[t],1)[0],i=0,s=Object.entries(n[r]);i<s.length;i++){var a=Se(s[i],2),l=a[0],u=a[1],h=Zt.id[l];if(!h)return console.error("customTrayButton does not support key ".concat(l)),!1;switch(l){case"iconPath":case"iconPathDarkMode":if(!Jt(u))return console.error("customTrayButton ".concat(l," should be a url.")),!1;break;case"visualState":if(!["default","sidebar-open","active"].includes(u))return console.error("customTrayButton ".concat(l," should be ").concat(h,". Got: ").concat(u)),!1;break;default:if(V(u)!==h)return console.error("customTrayButton ".concat(l," should be a ").concat(h,".")),!1}}return!0}function na(n){if(!n||n&&V(n)!=="object"||Array.isArray(n))return console.error(ea()),!1;for(var t=function(g){return"".concat(g," should be ").concat(er.id[g])},e=function(g,v){return console.error("customIntegration ".concat(g,": ").concat(v))},r=0,i=Object.entries(n);r<i.length;r++){var s=Se(i[r],1)[0];if(!("label"in n[s]))return e(s,"label is required"),!1;if(!("location"in n[s]))return e(s,"location is required"),!1;if(!("src"in n[s])&&!("srcdoc"in n[s]))return e(s,"src or srcdoc is required"),!1;for(var a=0,l=Object.entries(n[s]);a<l.length;a++){var u=Se(l[a],2),h=u[0],m=u[1];switch(h){case"allow":case"csp":case"name":case"referrerPolicy":case"sandbox":if(typeof m!="string")return e(s,t(h)),!1;break;case"iconURL":if(!Jt(m))return e(s,"".concat(h," should be a url")),!1;break;case"src":if("srcdoc"in n[s])return e(s,"cannot have both src and srcdoc"),!1;if(!Jt(m))return e(s,'src "'.concat(m,'" is not a valid URL')),!1;break;case"srcdoc":if("src"in n[s])return e(s,"cannot have both src and srcdoc"),!1;if(typeof m!="string")return e(s,t(h)),!1;break;case"location":if(!["main","sidebar"].includes(m))return e(s,t(h)),!1;break;case"controlledBy":if(m!=="*"&&m!=="owners"&&(!Array.isArray(m)||m.some(function(g){return typeof g!="string"})))return e(s,t(h)),!1;break;case"shared":if((!Array.isArray(m)||m.some(function(g){return typeof g!="string"}))&&m!=="owners"&&typeof m!="boolean")return e(s,t(h)),!1;break;default:if(!er.id[h])return console.error("customIntegration does not support key ".concat(h)),!1}}}return!0}function ra(n,t){if(t===void 0)return!1;switch(V(t)){case"string":return V(n)===t;case"object":if(V(n)!=="object")return!1;for(var e in n)if(!ra(n[e],t[e]))return!1;return!0;default:return!1}}function mo(n,t){var e=n.sessionId,r=n.toEndPoint,i=n.useSipRefer;if(!e||!r)throw new Error("".concat(t,"() requires a sessionId and toEndPoint"));if(typeof e!="string"||typeof r!="string")throw new Error("Invalid paramater: sessionId and toEndPoint must be of type string");if(i&&!r.startsWith("sip:"))throw new Error('"toEndPoint" must be a "sip" address');if(!r.startsWith("sip:")&&!r.startsWith("+"))throw new Error("toEndPoint: ".concat(r,' must starts with either "sip:" or "+"'))}function go(n){if(V(n)!=="object")throw new Error('RemoteMediaPlayerSettings: must be "object" type');if(n.state&&!Object.values(Hn).includes(n.state))throw new Error("Invalid value for RemoteMediaPlayerSettings.state, valid values are: "+JSON.stringify(Hn));if(n.volume){if(typeof n.volume!="number")throw new Error('RemoteMediaPlayerSettings.volume: must be "number" type');if(n.volume<0||n.volume>2)throw new Error("RemoteMediaPlayerSettings.volume: must be between 0.0 - 2.0")}}function vo(n,t,e){return!(typeof n!="number"||n<t||n>e)}function kn(n,t){return n&&!t&&delete n.data,n}const Ul=Object.freeze(Object.defineProperty({__proto__:null,DAILY_ACCESS_LEVEL_FULL:Vo,DAILY_ACCESS_LEVEL_LOBBY:Jc,DAILY_ACCESS_LEVEL_NONE:Gc,DAILY_ACCESS_UNKNOWN:qt,DAILY_CAMERA_ERROR_CAM_AND_MIC_IN_USE:nl,DAILY_CAMERA_ERROR_CAM_IN_USE:el,DAILY_CAMERA_ERROR_CONSTRAINTS:sl,DAILY_CAMERA_ERROR_MIC_IN_USE:tl,DAILY_CAMERA_ERROR_NOT_FOUND:ol,DAILY_CAMERA_ERROR_PERMISSIONS:rl,DAILY_CAMERA_ERROR_UNDEF_MEDIADEVICES:il,DAILY_CAMERA_ERROR_UNKNOWN:al,DAILY_EVENT_ACCESS_STATE_UPDATED:is,DAILY_EVENT_ACTIVE_SPEAKER_CHANGE:Ms,DAILY_EVENT_ACTIVE_SPEAKER_MODE_CHANGE:As,DAILY_EVENT_APP_MSG:_s,DAILY_EVENT_CAMERA_ERROR:Qo,DAILY_EVENT_CPU_LOAD_CHANGE:Ls,DAILY_EVENT_ERROR:zn,DAILY_EVENT_EXIT_FULLSCREEN:vt,DAILY_EVENT_FACE_COUNTS_UPDATED:Is,DAILY_EVENT_FULLSCREEN:gt,DAILY_EVENT_IFRAME_LAUNCH_CONFIG:Go,DAILY_EVENT_IFRAME_READY_FOR_LAUNCH_CONFIG:Jo,DAILY_EVENT_INPUT_SETTINGS_UPDATED:Yn,DAILY_EVENT_JOINED_MEETING:Xo,DAILY_EVENT_JOINING_MEETING:Ko,DAILY_EVENT_LANG_UPDATED:xs,DAILY_EVENT_LEFT_MEETING:Zo,DAILY_EVENT_LIVE_STREAMING_ERROR:Rs,DAILY_EVENT_LIVE_STREAMING_STARTED:js,DAILY_EVENT_LIVE_STREAMING_STOPPED:Ns,DAILY_EVENT_LIVE_STREAMING_UPDATED:Ds,DAILY_EVENT_LOADED:$n,DAILY_EVENT_LOADING:Wo,DAILY_EVENT_LOAD_ATTEMPT_FAILED:zo,DAILY_EVENT_LOCAL_SCREEN_SHARE_CANCELED:Cs,DAILY_EVENT_LOCAL_SCREEN_SHARE_STARTED:ks,DAILY_EVENT_LOCAL_SCREEN_SHARE_STOPPED:Ts,DAILY_EVENT_MEETING_SESSION_DATA_ERROR:cl,DAILY_EVENT_MEETING_SESSION_STATE_UPDATED:ss,DAILY_EVENT_MEETING_SESSION_SUMMARY_UPDATED:os,DAILY_EVENT_NETWORK_CONNECTION:Ps,DAILY_EVENT_NETWORK_QUALITY_CHANGE:Os,DAILY_EVENT_NONFATAL_ERROR:Wn,DAILY_EVENT_PARTICIPANT_COUNTS_UPDATED:rs,DAILY_EVENT_PARTICIPANT_JOINED:es,DAILY_EVENT_PARTICIPANT_LEFT:ns,DAILY_EVENT_PARTICIPANT_UPDATED:ts,DAILY_EVENT_RECEIVE_SETTINGS_UPDATED:Fs,DAILY_EVENT_RECORDING_DATA:ys,DAILY_EVENT_RECORDING_ERROR:gs,DAILY_EVENT_RECORDING_STARTED:Jn,DAILY_EVENT_RECORDING_STATS:ms,DAILY_EVENT_RECORDING_STOPPED:Gn,DAILY_EVENT_RECORDING_UPLOAD_COMPLETED:vs,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STARTED:ws,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STOPPED:Es,DAILY_EVENT_REMOTE_MEDIA_PLAYER_UPDATED:Ss,DAILY_EVENT_STARTED_CAMERA:Ho,DAILY_EVENT_THEME_UPDATED:Yo,DAILY_EVENT_TRACK_STARTED:us,DAILY_EVENT_TRACK_STOPPED:ds,DAILY_EVENT_TRANSCRIPTION_ERROR:fs,DAILY_EVENT_TRANSCRIPTION_MSG:bs,DAILY_EVENT_TRANSCRIPTION_STARTED:hs,DAILY_EVENT_TRANSCRIPTION_STOPPED:ps,DAILY_EVENT_WAITING_PARTICIPANT_ADDED:as,DAILY_EVENT_WAITING_PARTICIPANT_REMOVED:ls,DAILY_EVENT_WAITING_PARTICIPANT_UPDATED:cs,DAILY_FATAL_ERROR_CONNECTION:$o,DAILY_FATAL_ERROR_EJECTED:Wc,DAILY_FATAL_ERROR_EOL:Bo,DAILY_FATAL_ERROR_EXP_ROOM:Qc,DAILY_FATAL_ERROR_EXP_TOKEN:Kc,DAILY_FATAL_ERROR_MEETING_FULL:Xc,DAILY_FATAL_ERROR_NBF_ROOM:zc,DAILY_FATAL_ERROR_NBF_TOKEN:Hc,DAILY_FATAL_ERROR_NOT_ALLOWED:Zc,DAILY_FATAL_ERROR_NO_ROOM:Bn,DAILY_RECEIVE_SETTINGS_ALL_PARTICIPANTS_KEY:Yc,DAILY_RECEIVE_SETTINGS_BASE_KEY:Uo,DAILY_STATE_ERROR:ke,DAILY_STATE_JOINED:Re,DAILY_STATE_JOINING:Qt,DAILY_STATE_LEFT:je,DAILY_STATE_NEW:Un,DAILY_TRACK_STATE_BLOCKED:qc,DAILY_TRACK_STATE_INTERRUPTED:$c,DAILY_TRACK_STATE_LOADING:Bc,DAILY_TRACK_STATE_OFF:Vc,DAILY_TRACK_STATE_PLAYABLE:qo,DAILY_TRACK_STATE_SENDABLE:Uc,default:Fl},Symbol.toStringTag,{value:"Module"})),Bl=ya(Ul);var yr={exports:{}},ot=typeof Reflect=="object"?Reflect:null,yo=ot&&typeof ot.apply=="function"?ot.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)},Bt;ot&&typeof ot.ownKeys=="function"?Bt=ot.ownKeys:Object.getOwnPropertySymbols?Bt=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Bt=function(t){return Object.getOwnPropertyNames(t)};function $l(n){console&&console.warn&&console.warn(n)}var ia=Number.isNaN||function(t){return t!==t};function B(){B.init.call(this)}yr.exports=B;yr.exports.once=Wl;B.EventEmitter=B;B.prototype._events=void 0;B.prototype._eventsCount=0;B.prototype._maxListeners=void 0;var _o=10;function an(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(B,"defaultMaxListeners",{enumerable:!0,get:function(){return _o},set:function(n){if(typeof n!="number"||n<0||ia(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");_o=n}});B.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};B.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||ia(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function oa(n){return n._maxListeners===void 0?B.defaultMaxListeners:n._maxListeners}B.prototype.getMaxListeners=function(){return oa(this)};B.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var i=t==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var l=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw l.context=a,l}var u=s[t];if(u===void 0)return!1;if(typeof u=="function")yo(u,this,e);else for(var h=u.length,m=ua(u,h),r=0;r<h;++r)yo(m[r],this,e);return!0};function sa(n,t,e,r){var i,s,a;if(an(e),s=n._events,s===void 0?(s=n._events=Object.create(null),n._eventsCount=0):(s.newListener!==void 0&&(n.emit("newListener",t,e.listener?e.listener:e),s=n._events),a=s[t]),a===void 0)a=s[t]=e,++n._eventsCount;else if(typeof a=="function"?a=s[t]=r?[e,a]:[a,e]:r?a.unshift(e):a.push(e),i=oa(n),i>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=n,l.type=t,l.count=a.length,$l(l)}return n}B.prototype.addListener=function(t,e){return sa(this,t,e,!1)};B.prototype.on=B.prototype.addListener;B.prototype.prependListener=function(t,e){return sa(this,t,e,!0)};function Jl(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function aa(n,t,e){var r={fired:!1,wrapFn:void 0,target:n,type:t,listener:e},i=Jl.bind(r);return i.listener=e,r.wrapFn=i,i}B.prototype.once=function(t,e){return an(e),this.on(t,aa(this,t,e)),this};B.prototype.prependOnceListener=function(t,e){return an(e),this.prependListener(t,aa(this,t,e)),this};B.prototype.removeListener=function(t,e){var r,i,s,a,l;if(an(e),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===e||r.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||e));else if(typeof r!="function"){for(s=-1,a=r.length-1;a>=0;a--)if(r[a]===e||r[a].listener===e){l=r[a].listener,s=a;break}if(s<0)return this;s===0?r.shift():Gl(r,s),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,l||e)}return this};B.prototype.off=B.prototype.removeListener;B.prototype.removeAllListeners=function(t){var e,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var s=Object.keys(r),a;for(i=0;i<s.length;++i)a=s[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=r[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this};function ca(n,t,e){var r=n._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?e?[i.listener||i]:[i]:e?Yl(i):ua(i,i.length)}B.prototype.listeners=function(t){return ca(this,t,!0)};B.prototype.rawListeners=function(t){return ca(this,t,!1)};B.listenerCount=function(n,t){return typeof n.listenerCount=="function"?n.listenerCount(t):la.call(n,t)};B.prototype.listenerCount=la;function la(n){var t=this._events;if(t!==void 0){var e=t[n];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}B.prototype.eventNames=function(){return this._eventsCount>0?Bt(this._events):[]};function ua(n,t){for(var e=new Array(t),r=0;r<t;++r)e[r]=n[r];return e}function Gl(n,t){for(;t+1<n.length;t++)n[t]=n[t+1];n.pop()}function Yl(n){for(var t=new Array(n.length),e=0;e<t.length;++e)t[e]=n[e].listener||n[e];return t}function Wl(n,t){return new Promise(function(e,r){function i(a){n.removeListener(t,s),r(a)}function s(){typeof n.removeListener=="function"&&n.removeListener("error",i),e([].slice.call(arguments))}da(n,t,s,{once:!0}),t!=="error"&&zl(n,i,{once:!0})})}function zl(n,t,e){typeof n.on=="function"&&da(n,"error",t,e)}function da(n,t,e,r){if(typeof n.on=="function")r.once?n.once(t,e):n.on(t,e);else if(typeof n.addEventListener=="function")n.addEventListener(t,function i(s){r.once&&n.removeEventListener(t,i),e(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var Hl=yr.exports,cn={},Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.Api=Fe.HttpClient=Fe.ContentType=void 0;var C;(function(n){n.Json="application/json",n.FormData="multipart/form-data",n.UrlEncoded="application/x-www-form-urlencoded",n.Text="text/plain"})(C||(Fe.ContentType=C={}));class ha{constructor(t={}){I(this,"baseUrl","https://api.vapi.ai");I(this,"securityData",null);I(this,"securityWorker");I(this,"abortControllers",new Map);I(this,"customFetch",(...t)=>fetch(...t));I(this,"baseApiParams",{credentials:"same-origin",headers:{},redirect:"follow",referrerPolicy:"no-referrer"});I(this,"setSecurityData",t=>{this.securityData=t});I(this,"contentFormatters",{[C.Json]:t=>t!==null&&(typeof t=="object"||typeof t=="string")?JSON.stringify(t):t,[C.Text]:t=>t!==null&&typeof t!="string"?JSON.stringify(t):t,[C.FormData]:t=>Object.keys(t||{}).reduce((e,r)=>{const i=t[r];return e.append(r,i instanceof Blob?i:typeof i=="object"&&i!==null?JSON.stringify(i):`${i}`),e},new FormData),[C.UrlEncoded]:t=>this.toQueryString(t)});I(this,"createAbortSignal",t=>{if(this.abortControllers.has(t)){const r=this.abortControllers.get(t);return r?r.signal:void 0}const e=new AbortController;return this.abortControllers.set(t,e),e.signal});I(this,"abortRequest",t=>{const e=this.abortControllers.get(t);e&&(e.abort(),this.abortControllers.delete(t))});I(this,"request",async({body:t,secure:e,path:r,type:i,query:s,format:a,baseUrl:l,cancelToken:u,...h})=>{const m=(typeof e=="boolean"?e:this.baseApiParams.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},g=this.mergeRequestParams(h,m),v=s&&this.toQueryString(s),w=this.contentFormatters[i||C.Json],_=a||g.format;return this.customFetch(`${l||this.baseUrl||""}${r}${v?`?${v}`:""}`,{...g,headers:{...g.headers||{},...i&&i!==C.FormData?{"Content-Type":i}:{}},signal:(u?this.createAbortSignal(u):g.signal)||null,body:typeof t>"u"||t===null?null:w(t)}).then(async E=>{const T=E;T.data=null,T.error=null;const O=_?await E[_]().then(j=>(T.ok?T.data=j:T.error=j,T)).catch(j=>(T.error=j,T)):T;if(u&&this.abortControllers.delete(u),!E.ok)throw O;return O})});Object.assign(this,t)}encodeQueryParam(t,e){return`${encodeURIComponent(t)}=${encodeURIComponent(typeof e=="number"?e:`${e}`)}`}addQueryParam(t,e){return this.encodeQueryParam(e,t[e])}addArrayQueryParam(t,e){return t[e].map(i=>this.encodeQueryParam(e,i)).join("&")}toQueryString(t){const e=t||{};return Object.keys(e).filter(i=>typeof e[i]<"u").map(i=>Array.isArray(e[i])?this.addArrayQueryParam(e,i):this.addQueryParam(e,i)).join("&")}addQueryParams(t){const e=this.toQueryString(t);return e?`?${e}`:""}mergeRequestParams(t,e){return{...this.baseApiParams,...t,...e||{},headers:{...this.baseApiParams.headers||{},...t.headers||{},...e&&e.headers||{}}}}}Fe.HttpClient=ha;class Ql extends ha{constructor(){super(...arguments);I(this,"call",{callControllerCreate:(e,r={})=>this.request({path:"/call",method:"POST",body:e,secure:!0,type:C.Json,format:"json",...r}),callControllerFindAll:(e,r={})=>this.request({path:"/call",method:"GET",query:e,secure:!0,format:"json",...r}),callControllerFindOne:(e,r={})=>this.request({path:`/call/${e}`,method:"GET",secure:!0,format:"json",...r}),callControllerUpdate:(e,r,i={})=>this.request({path:`/call/${e}`,method:"PATCH",body:r,secure:!0,type:C.Json,format:"json",...i}),callControllerDeleteCallData:(e,r={})=>this.request({path:`/call/${e}`,method:"DELETE",secure:!0,format:"json",...r}),callControllerCreatePhoneCall:(e,r={})=>this.request({path:"/call/phone",method:"POST",body:e,secure:!0,type:C.Json,format:"json",...r}),callControllerCreateWebCall:(e,r={})=>this.request({path:"/call/web",method:"POST",body:e,secure:!0,type:C.Json,format:"json",...r})});I(this,"v2",{callControllerFindAllPaginated:(e,r={})=>this.request({path:"/v2/call",method:"GET",query:e,secure:!0,format:"json",...r}),callControllerFindAllMetadataPaginated:(e,r={})=>this.request({path:"/v2/call/metadata",method:"GET",query:e,secure:!0,format:"json",...r}),assistantControllerFindAllPaginated:(e,r={})=>this.request({path:"/v2/assistant",method:"GET",query:e,secure:!0,format:"json",...r}),phoneNumberControllerFindAllPaginated:(e,r={})=>this.request({path:"/v2/phone-number",method:"GET",query:e,secure:!0,format:"json",...r})});I(this,"chat",{chatController:(e={})=>this.request({path:"/chat",method:"POST",secure:!0,format:"json",...e}),chatControllerChatCompletions:(e,r={})=>this.request({path:"/chat/completions",method:"POST",body:e,secure:!0,type:C.Json,format:"json",...r})});I(this,"assistant",{assistantControllerCreate:(e,r={})=>this.request({path:"/assistant",method:"POST",body:e,secure:!0,type:C.Json,format:"json",...r}),assistantControllerFindAll:(e,r={})=>this.request({path:"/assistant",method:"GET",query:e,secure:!0,format:"json",...r}),assistantControllerFindOne:(e,r={})=>this.request({path:`/assistant/${e}`,method:"GET",secure:!0,format:"json",...r}),assistantControllerUpdate:(e,r,i={})=>this.request({path:`/assistant/${e}`,method:"PATCH",body:r,secure:!0,type:C.Json,format:"json",...i}),assistantControllerReplace:(e,r,i={})=>this.request({path:`/assistant/${e}`,method:"PUT",body:r,secure:!0,type:C.Json,format:"json",...i}),assistantControllerRemove:(e,r={})=>this.request({path:`/assistant/${e}`,method:"DELETE",secure:!0,format:"json",...r})});I(this,"phoneNumber",{phoneNumberControllerImportTwilio:(e,r={})=>this.request({path:"/phone-number/import/twilio",method:"POST",body:e,secure:!0,type:C.Json,format:"json",...r}),phoneNumberControllerImportVonage:(e,r={})=>this.request({path:"/phone-number/import/vonage",method:"POST",body:e,secure:!0,type:C.Json,format:"json",...r}),phoneNumberControllerCreate:(e,r={})=>this.request({path:"/phone-number",method:"POST",body:e,secure:!0,type:C.Json,format:"json",...r}),phoneNumberControllerFindAll:(e,r={})=>this.request({path:"/phone-number",method:"GET",query:e,secure:!0,format:"json",...r}),phoneNumberControllerFindOne:(e,r={})=>this.request({path:`/phone-number/${e}`,method:"GET",secure:!0,format:"json",...r}),phoneNumberControllerUpdate:(e,r,i={})=>this.request({path:`/phone-number/${e}`,method:"PATCH",body:r,secure:!0,type:C.Json,format:"json",...i}),phoneNumberControllerRemove:(e,r={})=>this.request({path:`/phone-number/${e}`,method:"DELETE",secure:!0,format:"json",...r})});I(this,"tool",{toolControllerCreate:(e,r={})=>this.request({path:"/tool",method:"POST",body:e,secure:!0,type:C.Json,format:"json",...r}),toolControllerFindAll:(e,r={})=>this.request({path:"/tool",method:"GET",query:e,secure:!0,format:"json",...r}),toolControllerFindOne:(e,r={})=>this.request({path:`/tool/${e}`,method:"GET",secure:!0,format:"json",...r}),toolControllerUpdate:(e,r,i={})=>this.request({path:`/tool/${e}`,method:"PATCH",body:r,secure:!0,type:C.Json,format:"json",...i}),toolControllerRemove:(e,r={})=>this.request({path:`/tool/${e}`,method:"DELETE",secure:!0,format:"json",...r})});I(this,"file",{fileControllerCreateDeprecated:(e,r={})=>this.request({path:"/file/upload",method:"POST",body:e,secure:!0,type:C.FormData,format:"json",...r}),fileControllerCreate:(e,r={})=>this.request({path:"/file",method:"POST",body:e,secure:!0,type:C.FormData,format:"json",...r}),fileControllerFindAll:(e={})=>this.request({path:"/file",method:"GET",secure:!0,format:"json",...e}),fileControllerFindOne:(e,r={})=>this.request({path:`/file/${e}`,method:"GET",secure:!0,format:"json",...r}),fileControllerUpdate:(e,r,i={})=>this.request({path:`/file/${e}`,method:"PATCH",body:r,secure:!0,type:C.Json,format:"json",...i}),fileControllerRemove:(e,r={})=>this.request({path:`/file/${e}`,method:"DELETE",secure:!0,format:"json",...r})});I(this,"knowledgeBase",{knowledgeBaseControllerCreate:(e,r={})=>this.request({path:"/knowledge-base",method:"POST",body:e,secure:!0,type:C.Json,format:"json",...r}),knowledgeBaseControllerFindAll:(e,r={})=>this.request({path:"/knowledge-base",method:"GET",query:e,secure:!0,format:"json",...r}),knowledgeBaseControllerFindOne:(e,r={})=>this.request({path:`/knowledge-base/${e}`,method:"GET",secure:!0,format:"json",...r}),knowledgeBaseControllerUpdate:(e,r,i={})=>this.request({path:`/knowledge-base/${e}`,method:"PATCH",body:r,secure:!0,type:C.Json,format:"json",...i}),knowledgeBaseControllerRemove:(e,r={})=>this.request({path:`/knowledge-base/${e}`,method:"DELETE",secure:!0,format:"json",...r})});I(this,"workflow",{workflowControllerFindAll:(e={})=>this.request({path:"/workflow",method:"GET",secure:!0,format:"json",...e}),workflowControllerCreate:(e,r={})=>this.request({path:"/workflow",method:"POST",body:e,secure:!0,type:C.Json,format:"json",...r}),workflowControllerFindOne:(e,r={})=>this.request({path:`/workflow/${e}`,method:"GET",secure:!0,format:"json",...r}),workflowControllerDelete:(e,r={})=>this.request({path:`/workflow/${e}`,method:"DELETE",secure:!0,format:"json",...r}),workflowControllerUpdate:(e,r,i={})=>this.request({path:`/workflow/${e}`,method:"PATCH",body:r,secure:!0,type:C.Json,format:"json",...i})});I(this,"squad",{squadControllerCreate:(e,r={})=>this.request({path:"/squad",method:"POST",body:e,secure:!0,type:C.Json,format:"json",...r}),squadControllerFindAll:(e,r={})=>this.request({path:"/squad",method:"GET",query:e,secure:!0,format:"json",...r}),squadControllerFindOne:(e,r={})=>this.request({path:`/squad/${e}`,method:"GET",secure:!0,format:"json",...r}),squadControllerUpdate:(e,r,i={})=>this.request({path:`/squad/${e}`,method:"PATCH",body:r,secure:!0,type:C.Json,format:"json",...i}),squadControllerRemove:(e,r={})=>this.request({path:`/squad/${e}`,method:"DELETE",secure:!0,format:"json",...r})});I(this,"testSuite",{testSuiteControllerFindAllPaginated:(e,r={})=>this.request({path:"/test-suite",method:"GET",query:e,secure:!0,format:"json",...r}),testSuiteControllerCreate:(e,r={})=>this.request({path:"/test-suite",method:"POST",body:e,secure:!0,type:C.Json,format:"json",...r}),testSuiteControllerFindOne:(e,r={})=>this.request({path:`/test-suite/${e}`,method:"GET",secure:!0,format:"json",...r}),testSuiteControllerUpdate:(e,r,i={})=>this.request({path:`/test-suite/${e}`,method:"PATCH",body:r,secure:!0,type:C.Json,format:"json",...i}),testSuiteControllerRemove:(e,r={})=>this.request({path:`/test-suite/${e}`,method:"DELETE",secure:!0,format:"json",...r}),testSuiteTestControllerFindAllPaginated:(e,r,i={})=>this.request({path:`/test-suite/${e}/test`,method:"GET",query:r,secure:!0,format:"json",...i}),testSuiteTestControllerCreate:(e,r,i={})=>this.request({path:`/test-suite/${e}/test`,method:"POST",body:r,secure:!0,type:C.Json,format:"json",...i}),testSuiteTestControllerFindOne:(e,r,i={})=>this.request({path:`/test-suite/${e}/test/${r}`,method:"GET",secure:!0,format:"json",...i}),testSuiteTestControllerUpdate:(e,r,i,s={})=>this.request({path:`/test-suite/${e}/test/${r}`,method:"PATCH",body:i,secure:!0,type:C.Json,format:"json",...s}),testSuiteTestControllerRemove:(e,r,i={})=>this.request({path:`/test-suite/${e}/test/${r}`,method:"DELETE",secure:!0,format:"json",...i}),testSuiteRunControllerFindAllPaginated:(e,r,i={})=>this.request({path:`/test-suite/${e}/run`,method:"GET",query:r,secure:!0,format:"json",...i}),testSuiteRunControllerCreate:(e,r,i={})=>this.request({path:`/test-suite/${e}/run`,method:"POST",body:r,secure:!0,type:C.Json,format:"json",...i}),testSuiteRunControllerFindOne:(e,r,i={})=>this.request({path:`/test-suite/${e}/run/${r}`,method:"GET",secure:!0,format:"json",...i}),testSuiteRunControllerUpdate:(e,r,i,s={})=>this.request({path:`/test-suite/${e}/run/${r}`,method:"PATCH",body:i,secure:!0,type:C.Json,format:"json",...s}),testSuiteRunControllerRemove:(e,r,i={})=>this.request({path:`/test-suite/${e}/run/${r}`,method:"DELETE",secure:!0,format:"json",...i})});I(this,"metrics",{analyticsControllerFindAllDeprecated:(e,r={})=>this.request({path:"/metrics",method:"GET",query:e,secure:!0,format:"json",...r})});I(this,"analytics",{analyticsControllerQuery:(e,r={})=>this.request({path:"/analytics",method:"POST",body:e,secure:!0,type:C.Json,format:"json",...r})});I(this,"log",{loggingControllerCallLogsQuery:(e,r={})=>this.request({path:"/log",method:"GET",query:e,secure:!0,format:"json",...r}),loggingControllerCallLogsDeleteQuery:(e,r={})=>this.request({path:"/log",method:"DELETE",query:e,secure:!0,...r})});I(this,"logs",{loggingControllerLogsQuery:(e,r={})=>this.request({path:"/logs",method:"GET",query:e,secure:!0,format:"json",...r}),loggingControllerLogsDeleteQuery:(e,r={})=>this.request({path:"/logs",method:"DELETE",query:e,secure:!0,...r})});I(this,"org",{orgControllerCreate:(e,r={})=>this.request({path:"/org",method:"POST",body:e,secure:!0,type:C.Json,format:"json",...r}),orgControllerFindAll:(e={})=>this.request({path:"/org",method:"GET",secure:!0,format:"json",...e}),orgControllerFindOne:(e,r={})=>this.request({path:`/org/${e}`,method:"GET",secure:!0,format:"json",...r}),orgControllerUpdate:(e,r,i={})=>this.request({path:`/org/${e}`,method:"PATCH",body:r,secure:!0,type:C.Json,format:"json",...i}),orgControllerDeleteOrg:(e,r={})=>this.request({path:`/org/${e}`,method:"DELETE",secure:!0,...r}),orgControllerFindAllUsers:(e,r={})=>this.request({path:`/org/${e}/user`,method:"GET",secure:!0,format:"json",...r}),orgControllerOrgLeave:(e,r={})=>this.request({path:`/org/${e}/leave`,method:"DELETE",secure:!0,...r}),orgControllerOrgRemoveUser:(e,r,i={})=>this.request({path:`/org/${e}/member/${r}/leave`,method:"DELETE",secure:!0,...i}),orgControllerUsersInvite:(e,r,i={})=>this.request({path:`/org/${e}/invite`,method:"POST",body:r,secure:!0,type:C.Json,...i}),orgControllerUserUpdate:(e,r,i={})=>this.request({path:`/org/${e}/role`,method:"PATCH",body:r,secure:!0,type:C.Json,...i})});I(this,"token",{tokenControllerCreate:(e,r={})=>this.request({path:"/token",method:"POST",body:e,secure:!0,type:C.Json,format:"json",...r}),tokenControllerFindAll:(e,r={})=>this.request({path:"/token",method:"GET",query:e,secure:!0,format:"json",...r}),tokenControllerFindOne:(e,r={})=>this.request({path:`/token/${e}`,method:"GET",secure:!0,format:"json",...r}),tokenControllerUpdate:(e,r,i={})=>this.request({path:`/token/${e}`,method:"PATCH",body:r,secure:!0,type:C.Json,format:"json",...i}),tokenControllerRemove:(e,r={})=>this.request({path:`/token/${e}`,method:"DELETE",secure:!0,format:"json",...r})});I(this,"credential",{credentialControllerCreate:(e,r={})=>this.request({path:"/credential",method:"POST",body:e,secure:!0,type:C.Json,format:"json",...r}),credentialControllerFindAll:(e,r={})=>this.request({path:"/credential",method:"GET",query:e,secure:!0,format:"json",...r}),credentialControllerFindOne:(e,r={})=>this.request({path:`/credential/${e}`,method:"GET",secure:!0,format:"json",...r}),credentialControllerUpdate:(e,r,i={})=>this.request({path:`/credential/${e}`,method:"PATCH",body:r,secure:!0,type:C.Json,format:"json",...i}),credentialControllerRemove:(e,r={})=>this.request({path:`/credential/${e}`,method:"DELETE",secure:!0,format:"json",...r}),credentialControllerGenerateSession:(e,r={})=>this.request({path:"/credential/session",method:"POST",body:e,secure:!0,type:C.Json,format:"json",...r}),credentialControllerHandleWebhook:(e,r={})=>this.request({path:"/credential/webhook",method:"POST",body:e,type:C.Json,...r}),credentialControllerTriggerCredentialAction:(e,r={})=>this.request({path:"/credential/trigger",method:"POST",body:e,secure:!0,type:C.Json,...r})});I(this,"template",{templateControllerCreate:(e,r={})=>this.request({path:"/template",method:"POST",body:e,secure:!0,type:C.Json,format:"json",...r}),templateControllerFindAll:(e,r={})=>this.request({path:"/template",method:"GET",query:e,secure:!0,format:"json",...r}),templateControllerFindAllPinned:(e={})=>this.request({path:"/template/pinned",method:"GET",secure:!0,format:"json",...e}),templateControllerFindOne:(e,r={})=>this.request({path:`/template/${e}`,method:"GET",secure:!0,format:"json",...r}),templateControllerUpdate:(e,r,i={})=>this.request({path:`/template/${e}`,method:"PATCH",body:r,secure:!0,type:C.Json,format:"json",...i}),templateControllerRemove:(e,r={})=>this.request({path:`/template/${e}`,method:"DELETE",secure:!0,format:"json",...r})});I(this,"voiceLibrary",{voiceLibraryControllerVoiceGetByProvider:(e,r,i={})=>this.request({path:`/voice-library/${e}`,method:"GET",query:r,secure:!0,format:"json",...i}),voiceLibraryControllerVoiceGetAccentsByProvider:(e,r={})=>this.request({path:`/voice-library/${e}/accents`,method:"GET",secure:!0,format:"json",...r}),voiceLibraryControllerVoiceLibrarySyncByProvider:(e,r={})=>this.request({path:`/voice-library/sync/${e}`,method:"POST",secure:!0,format:"json",...r}),voiceLibraryControllerVoiceLibrarySyncDefaultVoices:(e,r={})=>this.request({path:"/voice-library/sync",method:"POST",body:e,secure:!0,type:C.Json,format:"json",...r}),voiceLibraryControllerVoiceLibraryCreateSesameVoice:(e,r={})=>this.request({path:"/voice-library/create-sesame-voice",method:"POST",body:e,secure:!0,type:C.Json,...r})});I(this,"provider",{providerControllerGetWorkflows:(e,r,i={})=>this.request({path:`/${e}/workflows`,method:"GET",query:r,secure:!0,format:"json",...i}),providerControllerGetWorkflowTriggerHook:(e,r,i={})=>this.request({path:`/${e}/workflows/${r}/hooks`,method:"GET",secure:!0,format:"json",...i}),providerControllerGetLocations:(e,r={})=>this.request({path:`/${e}/locations`,method:"GET",secure:!0,format:"json",...r}),voiceProviderControllerSearchVoices:(e,r,i={})=>this.request({path:`/${e}/voices/search`,method:"GET",query:r,secure:!0,format:"json",...i}),voiceProviderControllerSearchVoice:(e,r,i={})=>this.request({path:`/${e}/voice/search`,method:"GET",query:r,secure:!0,format:"json",...i}),voiceProviderControllerAddVoices:(e,r,i={})=>this.request({path:`/${e}/voices/add`,method:"POST",body:r,secure:!0,type:C.Json,format:"json",...i}),voiceProviderControllerAddVoice:(e,r,i={})=>this.request({path:`/${e}/voice/add`,method:"POST",body:r,secure:!0,type:C.Json,format:"json",...i})});I(this,"v11Labs",{voiceProviderControllerCloneVoices:(e,r={})=>this.request({path:"/11labs/voice/clone",method:"POST",body:e,secure:!0,type:C.FormData,...r})})}}Fe.Api=Ql;Object.defineProperty(cn,"__esModule",{value:!0});cn.client=void 0;const Kl=Fe,Xl=new Kl.Api({baseUrl:"https://api.vapi.ai",baseApiParams:{secure:!0},securityWorker:async n=>{if(n)return{headers:{Authorization:`Bearer ${n}`}}}});cn.client=Xl;var pa=Pr&&Pr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(nr,"__esModule",{value:!0});const Zl=pa(Bl),eu=pa(Hl),Tn=cn;async function tu(n,t){n.muted=!1,n.autoplay=!0,t!=null&&(n.srcObject=new MediaStream([t]),await n.play())}async function nu(n,t){const e=document.createElement("audio");return e.dataset.participantId=t,document.body.appendChild(e),await tu(e,n),e}function ru(n){const t=document.querySelector(`audio[data-participant-id="${n}"]`);t==null||t.remove()}function iu(n,t,e,r){n.participant.local||t.updateParticipant(n.participant.session_id,{setSubscribedTracks:{audio:!0,video:e||r}})}class ou extends eu.default{on(t,e){return super.on(t,e),this}once(t,e){return super.once(t,e),this}emit(t,...e){return super.emit(t,...e)}removeListener(t,e){return super.removeListener(t,e),this}removeAllListeners(t){return super.removeAllListeners(t),this}}class su extends ou{constructor(e,r,i,s){super();I(this,"started",!1);I(this,"call",null);I(this,"speakingTimeout",null);I(this,"dailyCallConfig",{});I(this,"dailyCallObject",{});I(this,"hasEmittedCallEndedStatus",!1);Tn.client.baseUrl=r??"https://api.vapi.ai",Tn.client.setSecurityData(e),this.dailyCallConfig=i??{},this.dailyCallObject=s??{}}cleanup(){var e;this.started=!1,this.hasEmittedCallEndedStatus=!1,(e=this.call)==null||e.destroy(),this.call=null,this.speakingTimeout=null}isMobileDevice(){if(typeof navigator>"u")return!1;const e=navigator.userAgent;return/android|iphone|ipad|ipod|iemobile|blackberry|bada/i.test(e.toLowerCase())}async sleep(e){return new Promise(r=>setTimeout(r,e))}async start(e,r,i){var s,a,l,u;if(!e&&!i)throw new Error("Assistant or Squad must be provided.");if(this.started)return null;this.started=!0;try{const h=(await Tn.client.call.callControllerCreateWebCall({assistant:typeof e=="string"?void 0:e,assistantId:typeof e=="string"?e:void 0,assistantOverrides:r,squad:typeof i=="string"?void 0:i,squadId:typeof i=="string"?i:void 0})).data;this.call&&this.cleanup();const m=((s=h==null?void 0:h.artifactPlan)==null?void 0:s.videoRecordingEnabled)??!1,g=((l=(a=h==null?void 0:h.assistant)==null?void 0:a.voice)==null?void 0:l.provider)==="tavus";if(this.call=Zl.default.createCallObject({audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??m,dailyConfig:this.dailyCallConfig}),(u=this.call.iframe())==null||u.style.setProperty("display","none"),this.call.on("left-meeting",()=>{var v;this.emit("call-end"),this.hasEmittedCallEndedStatus||(this.emit("message",{type:"status-update",status:"ended",endedReason:"customer-ended-call"}),this.hasEmittedCallEndedStatus=!0),m&&((v=this.call)==null||v.stopRecording()),this.cleanup()}),this.call.on("error",v=>{var w;this.emit("error",v),m&&((w=this.call)==null||w.stopRecording())}),this.call.on("camera-error",v=>{this.emit("error",v)}),this.call.on("track-started",async v=>{var w,_,E;!v||!v.participant||(w=v.participant)!=null&&w.local||((_=v.participant)==null?void 0:_.user_name)==="Vapi Speaker"&&(v.track.kind==="video"&&this.emit("video",v.track),v.track.kind==="audio"&&await nu(v.track,v.participant.session_id),(E=this.call)==null||E.sendAppMessage("playable"))}),this.call.on("participant-joined",v=>{!v||!this.call||iu(v,this.call,m,g)}),this.call.on("participant-updated",v=>{v&&this.emit("daily-participant-updated",v.participant)}),this.call.on("participant-left",v=>{v&&ru(v.participant.session_id)}),this.isMobileDevice()&&await this.sleep(1e3),await this.call.join({url:h.webCallUrl,subscribeToTracksAutomatically:!1}),m){const v=new Date().getTime();this.call.startRecording({width:1280,height:720,backgroundColor:"#FF1F2D3D",layout:{preset:"default"}}),this.call.on("recording-started",()=>{this.send({type:"control",control:"say-first-message",videoRecordingStartDelaySeconds:(new Date().getTime()-v)/1e3})})}return this.call.startRemoteParticipantsAudioLevelObserver(100),this.call.on("remote-participants-audio-level",v=>{v&&this.handleRemoteParticipantsAudioLevel(v)}),this.call.on("app-message",v=>this.onAppMessage(v)),this.call.on("nonfatal-error",v=>{var w;(v==null?void 0:v.type)==="audio-processor-error"&&((w=this.call)==null||w.updateInputSettings({audio:{processor:{type:"none"}}}).then(()=>{var _;(_=this.call)==null||_.setLocalAudio(!0)}))}),this.call.updateInputSettings({audio:{processor:{type:"noise-cancellation"}}}),h}catch(h){return console.error(h),this.emit("error",h),this.cleanup(),null}}onAppMessage(e){if(e)try{if(e.data==="listening")return this.emit("call-start");try{const r=JSON.parse(e.data);this.emit("message",r),r&&"type"in r&&"status"in r&&r.type==="status-update"&&r.status==="ended"&&(this.hasEmittedCallEndedStatus=!0)}catch(r){console.log("Error parsing message data: ",r)}}catch(r){console.error(r)}}handleRemoteParticipantsAudioLevel(e){const r=Object.values(e.participantsAudioLevel).reduce((s,a)=>s+a,0);this.emit("volume-level",Math.min(1,r/.15)),r>.01&&(this.speakingTimeout?(clearTimeout(this.speakingTimeout),this.speakingTimeout=null):this.emit("speech-start"),this.speakingTimeout=setTimeout(()=>{this.emit("speech-end"),this.speakingTimeout=null},1e3))}stop(){var e;this.started=!1,(e=this.call)==null||e.destroy(),this.call=null}send(e){var r;(r=this.call)==null||r.sendAppMessage(JSON.stringify(e))}setMuted(e){if(!this.call)throw new Error("Call object is not available.");this.call.setLocalAudio(!e)}isMuted(){return this.call?this.call.localAudio()===!1:!1}say(e,r,i){this.send({type:"say",message:e,endCallAfterSpoken:r,interruptionsEnabled:i??!1})}setInputDevicesAsync(e){var r;(r=this.call)==null||r.setInputDevicesAsync(e)}async increaseMicLevel(e){if(!this.call)throw new Error("Call object is not available.");try{const r=await navigator.mediaDevices.getUserMedia({audio:!0}),i=new AudioContext,s=i.createMediaStreamSource(r),a=i.createGain();a.gain.value=e,s.connect(a);const l=i.createMediaStreamDestination();a.connect(l);const[u]=l.stream.getAudioTracks();await this.call.setInputDevicesAsync({audioSource:u})}catch(r){console.error("Error adjusting microphone level:",r)}}setOutputDeviceAsync(e){var r;(r=this.call)==null||r.setOutputDeviceAsync(e)}getDailyCallObject(){return this.call}startScreenSharing(e,r){var i;(i=this.call)==null||i.startScreenShare({displayMediaOptions:e,screenVideoSendSettings:r})}stopScreenSharing(){var e;(e=this.call)==null||e.stopScreenShare()}}var au=nr.default=su;const uu=_a({__proto__:null,default:au},[nr]);export{uu as v};
